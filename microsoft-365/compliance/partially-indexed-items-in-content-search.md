---
title: 内容搜索和其他电子数据展示工具中的部分索引项
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: reference
f1_keywords:
- ms.o365.cc.UnindexedItemsLearnMore
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- SPO160
- MOE150
- MET150
ms.assetid: d1691de4-ca0d-446f-a0d0-373a4fc8487b
description: 了解 Exchange 和 SharePoint 中可以包含在 Microsoft 365 合规中心运行电子数据展示搜索中的未建立索引的项目。
ms.openlocfilehash: 308e0755f1966b8e4559cf6f08b3133a00ea1b5a
ms.sourcegitcommit: 88ab08c0fa1acbc9e066009e131b9f2b0d506c64
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/10/2021
ms.locfileid: "50711902"
---
# <a name="partially-indexed-items-in-ediscovery"></a>电子数据展示中的部分索引项

在运行搜索时，从 Microsoft 365 合规中心运行电子数据展示搜索会自动将部分索引项包括在估计的搜索结果中。 部分索引项目是 SharePoint 和 OneDrive for Business 网站上由于某种原因未完全索引搜索的 Exchange 邮箱项目和文档。 在 Exchange 中，部分索引项通常包含 (文件类型的文件集，该文件类型无法) 电子邮件的索引。 以下是在运行电子数据展示搜索时无法为项目编制索引并作为部分索引项返回的其他一些原因：
  
- 文件类型是索引无法识别或不支持的文件类型。

- 邮件具有没有有效处理程序的附加文件，如图像文件;这是部分索引电子邮件项目的最常见原因。

- 文件类型支持检索，但是特定文件出现检索错误。

- 附加到电子邮件的文件过多。

- 附加到电子邮件的文件过大。

- 文件使用非 Microsoft 技术进行加密。

- 文件具有密码保护。

> [!NOTE]
> 大多数组织的内容量少于 1%，按部分索引的大小小于 12%。 卷和大小差异的原因是，较大的文件包含无法完全编制索引的内容的可能性更高。
  
对于法律调查，您的组织可能需要查看部分索引项。 还可以指定在将搜索结果导出到本地计算机或准备结果以使用高级电子数据展示进行分析时是否包含部分索引项。 有关详细信息，请参阅 [调查电子数据展示中的](investigating-partially-indexed-items-in-ediscovery.md)部分索引项。
  
## <a name="file-types-not-indexed-for-search"></a>文件类型未编入索引以供搜索

某些类型的文件（如位图或 MP3 文件）不包含可编入索引的内容。 因此，Exchange 和 SharePoint 中的搜索索引服务器不会在这些类型的文件上执行全文索引。 这些文件类型视为不受支持的文件类型。 还有一些文件类型已默认或由管理员禁用全文检索。 不支持和禁用的文件类型在内容搜索中标记为未索引项。 如前所述，运行搜索、将搜索结果导出到本地计算机或为高级电子数据展示准备搜索结果时，部分索引项可包含在搜索结果集内。
  
有关支持和禁用的文件格式列表，请参阅以下主题：
  
- **Exchange**  - [由 Exchange 搜索编制索引的文件格式](https://go.microsoft.com/fwlink/p/?LinkID=386618)

- **Exchange**  - [Get-SearchDocumentFormat](https://go.microsoft.com/fwlink/p/?LinkID=724037)

- **SharePoint**  - SharePoint 中的默认已爬网文件扩展 [名和分析文件类型](https://go.microsoft.com/fwlink/p/?LinkID=404033)
  
## <a name="messages-and-documents-with-partially-indexed-file-types-can-be-returned-in-search-results"></a>可以在搜索结果中返回具有部分索引文件类型的邮件和文档

不是每个包含部分索引文件附件的电子邮件或每个部分索引的 SharePoint 文档都会自动返回为部分索引项。 这是因为其他邮件或文档属性（如电子邮件中的 **Subject** 属性和文档的标题或 **作者** 属性）已编制索引并可供搜索。 例如，如果关键字出现在电子邮件的主题或文档的文件名或标题中，则搜索"财务"的关键字将返回具有部分索引文件附件的项目。 但是，如果关键字只出现在文件的正文中，则邮件或文档将作为部分索引项返回。
  
同样，当其他邮件或文档属性（已编制索引且可搜索）符合搜索条件时，包含部分索引文件附件和部分索引文件类型的文档的邮件将包含在搜索结果中。 可检索的邮件属性包括发送和接收日期、发件人和收件人、附件的文件名以及邮件正文中的文本。 可检索的文档属性包括创建和修改日期。 因此，即使邮件附件可能是部分索引项，如果其他邮件或文档属性的值与搜索条件匹配，邮件也会包括在常规搜索结果中。
  
有关可以使用安全 &与合规中心中的搜索功能搜索的电子邮件和文档属性的列表，请参阅关键字查询和电子数据展示的搜索 [条件](keyword-queries-and-search-conditions.md)。
  
## <a name="partially-indexed-items-included-in-the-search-results"></a>搜索结果中包含的部分索引项

您的组织可能需要识别部分索引项并执行其他分析，以确定它们是什么、它们包含哪些内容以及它们是否与特定调查相关。 如前所述，搜索的内容位置中的部分索引项会自动包含在估计的搜索结果中。 在导出搜索结果或为高级电子数据展示准备搜索结果时，您可以选择包含这些部分索引项。
  
对于部分索引项，请牢记以下事项：
  
- 运行电子数据展示搜索时，搜索查询) 返回的部分索引 Exchange 项目 (的总数和大小会显示在出控件页上的搜索统计信息中，并标记为未编制 **索引的项目**。 有关显示在标注页上的部分索引项的统计信息不包括 SharePoint 或 OneDrive 中的部分索引项。

- 如果要导出结果的搜索是组织中特定内容位置或所有内容位置的搜索，则仅导出包含与搜索条件匹配的项的内容位置中的未索引项目。 In other words, if no search results are found in a mailbox or site, then any unindexed items in that mailbox or site won't be exported. 这是因为从组织中很多位置导出部分索引的项目可能会增加导出错误的可能性，并增加导出和下载搜索结果所花的时间。

    若要从搜索的所有内容位置导出部分索引项，请通过从搜索查询) 中删除任何关键字，将搜索配置为返回所有项目 (，然后在导出搜索结果 (时仅导出部分索引项，方法是单击"输出选项 **) "** 下的"仅具有无法识别的格式、已加密或由于其他原因未编制索引的项目"。

- 如果选择在搜索结果中包括所有邮箱项目，或者搜索查询未指定任何关键字或仅指定日期范围，则部分索引项目可能不会复制到包含部分索引项目的 PST 文件中。 这是因为所有项目（包括任何部分索引的项目）将自动包含在常规搜索结果中。

- 部分索引项无法预览。 您必须导出搜索结果以查看搜索返回的部分索引项。

此外，导出搜索结果并包括导出中的部分索引项时，SharePoint 项中的部分索引项将导出到名为 **"不可搜索"的文件夹**。 导出部分索引的 Exchange 项目时，根据部分索引项是否与搜索查询匹配以及导出设置的配置，导出它们的方式会有所不同。 

下表显示了已编制索引的项目和部分索引项的导出行为，以及是否为不同的导出配置设置包含每个导出行为。

|**导出配置**|**与搜索查询匹配的索引项**|**与搜索查询匹配的部分索引项**|**与搜索查询不匹配的部分索引项**|
|:-----|:-----|:-----|:-----|
|仅导出索引项  <br/> |Exported<br/> |导出 (导出的索引项中包含的) <br/>  |未导出 <br/>|
|仅导出部分索引项  <br/> |未导出  <br/> |导出 (部分索引项) <br/> |导出 (部分索引项) |
|导出已编制索引的项目和部分索引项  <br/> |Exported<br/> |导出 (导出的索引项中包含的) <br/>  |导出 (部分索引项) <br/>|
||||

## <a name="partially-indexed-items-excluded-from-the-search-results"></a>从搜索结果中排除的部分索引项

如果某个项目已部分编制索引，但不符合搜索查询条件，则它不会作为部分索引项包含在搜索结果中。 换句话说，该项目会被排除在搜索结果之外。 例如，假设您运行搜索且不包括任何关键字或属性，因为您想要包括所有内容。 但您包括了查询的日期范围条件。 如果部分索引项超出该日期范围，它将不会作为部分索引项包含在内。 日期范围是一种从搜索结果中排除部分索引项的有效方法。
  
同样，如果您选择在导出搜索结果时包含部分索引项，将不会导出从搜索结果中排除的部分索引项。
  
此规则的一个例外是创建与电子数据展示案例关联的基于查询的保留。 如果创建基于查询的电子数据展示保留，则所有部分索引项将置于保留状态。 这包括与搜索查询条件不匹配的部分索引项和可能超出日期范围条件的部分索引项。 有关创建基于查询电子数据展示保留项的信息，请参阅["创建电子数据展示保留"。](create-ediscovery-holds.md)
  
## <a name="indexing-limits-for-messages"></a>邮件索引限制

下表介绍了可能导致电子邮件作为 Microsoft 365 电子数据展示搜索中的部分索引项返回的索引限制。
  
有关 SharePoint 文档的索引限制列表，请参阅 [SharePoint Online 的搜索限制](https://docs.microsoft.com/sharepoint/search-limits)。
  
|**索引限制**|**注释**|**说明**|
|:-----|:-----|:-----|
|排除 Excel 文件 (的最大附件)   <br/> |150 MB  <br/> |用于分析索引的电子邮件附件的最大大小。 任何大于此限制的附件将不会解析为编制索引，并且包含附件的邮件将被标记为部分索引。  <br/><br/> **注意：** 分析是索引服务从附件中提取文本、删除不必要的字符（如标点符号和空格）的过程，然后在称为词汇切分) 的进程中将文本划分为单词 (，然后将这些字符存储在索引中。           |
|Excel 文件的最大大小  <br/> |4 MB  <br/> |位于网站上或附加到将进行分析以编制索引的电子邮件的 Excel 文件的最大大小。 任何大于此限制的 Excel 文件都将不会进行分析，并且包含文件附件的文件或电子邮件将被标记为未索引。  <br/> |
|最大附件数  <br/> |250  <br/> |附加到电子邮件（将进行分析以编制索引）的最大文件数。 如果邮件包含 250 多个附件，则分析和索引前 250 个附件，并且邮件标记为部分索引，因为它具有未分析的其他附件。  <br/> |
|最大附件深度  <br/> |30  <br/> |分析的最大嵌套附件数。 例如，如果电子邮件附加了另一封邮件，并且附加的邮件有一个附加的 Word 文档，则 Word 文档和附加的邮件将编制索引。 此行为将针对最多 30 个嵌套附件继续。  <br/> |
|附加图像的最大数量  <br/> |0  <br/> |附加到电子邮件的图像将被分析程序跳过，并且不会编制索引。  <br/> |
|分析项目所花费的最大时间  <br/> |30 秒  <br/> |分析项目以编制索引最多需要 30 秒。 如果分析时间超过 30 秒，该项目将标记为部分索引。  <br/> |
|最大分析程序输出  <br/> |200 万个字符  <br/> |来自已编制索引分析程序的文本输出的最大量。 例如，如果分析程序从文档中提取了 800 万个字符，则仅对前 200 万个字符编制索引。  <br/> |
|最大批注标记数  <br/> |200 万  <br/> |为电子邮件编制索引时，每个单词都使用不同的处理说明进行注释，以指定该单词的索引编制方式。 每组处理指令称为注释令牌。 若要在 Office 365 中保持服务质量，电子邮件的批注令牌限制为 200 万个。  <br/> |
|索引中的最大正文大小  <br/> |6700 万个字符  <br/> |电子邮件正文及其所有附件中的字符总数。 当对电子邮件编制索引时，邮件正文中所有文本以及所有附件都连接在一个字符串中。 索引的此字符串的最大大小为 6700 万个字符。  <br/> |
|正文中的最大唯一标记数  <br/> |100 万  <br/> |如前所述，令牌是从内容中提取文本、删除标点符号和空格，然后将它划分为称为 (令牌) 存储在索引中的单词的结果。 例如，短语包含  `"cat, mouse, bird, dog, dog"` 5 个标记。 但其中只有 4 个是唯一的标记。 每个电子邮件有 100 万个唯一令牌的限制，这有助于防止索引因随机令牌过大。  <br/> |

## <a name="more-information-about-partially-indexed-items"></a>有关部分索引项详细信息

- 如前所述，由于对邮件和文档属性及其元数据编制索引，因此，如果关键字出现在已编制索引的元数据中，则关键字搜索可能会返回结果。 不过，如果该关键字仅出现在文件类型不受支持的项目的内容中，则相同的关键字搜索可能不会返回相同的项目。 在这种情况下，该项目将作为部分索引项返回。

- 如果部分索引项因满足搜索查询条件 (而未排除) 而包含在搜索结果中，则它不会作为部分索引项包含在估计的搜索统计信息中。 此外，导出搜索结果时，它不会包含在部分索引项中。

- 尽管文件类型受索引支持，并且已编制索引，但可能会存在索引或搜索错误，导致文件作为部分索引项返回。 例如，搜索非常大的 Excel 文件可能部分成功 (因为前 4 MB) 索引，但由于文件大小限制超出，因此失败。 在这种情况下，可能会将同一文件与搜索结果一起返回，并作为部分索引项返回。

- 使用 [Microsoft](encryption.md) 加密技术加密并附加到符合搜索条件的电子邮件的文件可以预览并在导出时解密。 目前，使用 Microsoft 加密技术加密 (存储在 SharePoint 或 OneDrive for Business) 部分索引。

- 使用 S/MIME 加密的电子邮件已部分编制索引。 这包括带有或不带文件附件的加密邮件。

- 使用 Azure 权限管理保护的电子邮件将编制索引，如果与搜索查询匹配，则这些电子邮件将包含在搜索结果中。 受权限保护的电子邮件将被解密，可以预览和导出。 此功能要求您分配 RMS 解密角色，该角色默认分配给电子数据展示管理器角色组。

## <a name="see-also"></a>另请参阅

[调查电子数据展示中的部分索引项](investigating-partially-indexed-items-in-ediscovery.md)
