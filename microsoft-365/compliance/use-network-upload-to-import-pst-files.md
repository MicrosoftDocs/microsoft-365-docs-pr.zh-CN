---
title: 使用网络上载导入组织的 PST 文件
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- MOE150
- MED150
- MET150
ms.assetid: 103f940c-0468-4e1a-b527-cc8ad13a5ea6
description: 面向管理员：了解如何使用网络上传将多个 PST 文件批量导入 Microsoft 365 中的用户邮箱。
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: c126a8e00ae5182d42122fb98f95ffd585360412
ms.sourcegitcommit: 66f1f430b3dcae5f46cb362a32d6fb7da4cff5c1
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/13/2020
ms.locfileid: "46662286"
---
# <a name="use-network-upload-to-import-your-organizations-pst-files-to-microsoft-365"></a><span data-ttu-id="6e505-103">使用网络上传将组织的 PST 文件导入到 Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="6e505-103">Use network upload to import your organization's PST files to Microsoft 365</span></span>

> [!NOTE]
> <span data-ttu-id="6e505-104">本文适用于管理员。</span><span class="sxs-lookup"><span data-stu-id="6e505-104">This article is for administrators.</span></span> <span data-ttu-id="6e505-105">你正在尝试将 PST 文件导入到自己的邮箱吗？</span><span class="sxs-lookup"><span data-stu-id="6e505-105">Are you trying to import PST files to your own mailbox?</span></span> <span data-ttu-id="6e505-106">请参阅[从 Outlook .pst 文件导入电子邮件、联系人和日历](https://go.microsoft.com/fwlink/p/?LinkID=785075)</span><span class="sxs-lookup"><span data-stu-id="6e505-106">See [Import email, contacts, and calendar from an Outlook .pst file](https://go.microsoft.com/fwlink/p/?LinkID=785075)</span></span>
  
<span data-ttu-id="6e505-107">下面是使用网络上传将多个 PST 文件批量导入到 Microsoft 365 邮箱所需的分步说明。</span><span class="sxs-lookup"><span data-stu-id="6e505-107">Here are the step-by-step instructions required to use network upload to bulk-import multiple PST files to Microsoft 365 mailboxes.</span></span> <span data-ttu-id="6e505-108">有关使用网络上传将 PST 文件批量导入到 Microsoft 365 邮箱的常见问题，请参阅[使用网络上传导入 PST 文件的常见问题](faqimporting-pst-files-to-office-365.md#using-network-upload-to-import-pst-files)。</span><span class="sxs-lookup"><span data-stu-id="6e505-108">For frequently asked questions about using network upload to bulk-import PST files to Microsoft 365 mailboxes, see [FAQs for using network upload to import PST files](faqimporting-pst-files-to-office-365.md#using-network-upload-to-import-pst-files).</span></span>
  
[<span data-ttu-id="6e505-109">步骤 1：复制 SAS URL 并安装 AzCopy</span><span class="sxs-lookup"><span data-stu-id="6e505-109">Step 1: Copy the SAS URL and install AzCopy</span></span>](#step-1-copy-the-sas-url-and-install-azcopy)

[<span data-ttu-id="6e505-110">步骤 2：将 PST 文件上传到 Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="6e505-110">Step 2: Upload your PST files to Microsoft 365</span></span>](#step-2-upload-your-pst-files-to-office-365)

[<span data-ttu-id="6e505-111">（可选）步骤 3：查看已上传的 PST 文件的列表</span><span class="sxs-lookup"><span data-stu-id="6e505-111">(Optional) Step 3: View a list of the PST files uploaded</span></span>](#optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365)

[<span data-ttu-id="6e505-112">步骤 4：创建 PST 导入映射文件</span><span class="sxs-lookup"><span data-stu-id="6e505-112">Step 4: Create the PST Import mapping file</span></span>](#step-4-create-the-pst-import-mapping-file)

[<span data-ttu-id="6e505-113">步骤 5：创建 PST 导入作业</span><span class="sxs-lookup"><span data-stu-id="6e505-113">Step 5: Create a PST Import job</span></span>](#step-5-create-a-pst-import-job)

[<span data-ttu-id="6e505-114">步骤 6：筛选数据并启动 PST 导入作业</span><span class="sxs-lookup"><span data-stu-id="6e505-114">Step 6: Filter data and start the PST Import job</span></span>](#step-6-filter-data-and-start-the-pst-import-job)

<span data-ttu-id="6e505-115">只需执行步骤 1 一次，就可以将 PST 文件导入到 Microsoft 365 邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-115">You have to perform Step 1 only once to import PST files to Microsoft 365 mailboxes.</span></span> <span data-ttu-id="6e505-116">执行这些步骤后，每当你想要上传和导入一批 PST 文件时，请按照步骤 2 到步骤 6 进行操作。</span><span class="sxs-lookup"><span data-stu-id="6e505-116">After you perform these steps, follow Step 2 through Step 6 each time you want to upload and import a batch of PST files.</span></span>

## <a name="before-you-import-pst-files"></a><span data-ttu-id="6e505-117">导入 PST 文件前</span><span class="sxs-lookup"><span data-stu-id="6e505-117">Before you import PST files</span></span>
  
- <span data-ttu-id="6e505-118">必须分配有 Exchange Online 中的邮箱导入导出角色，才能将 PST 文件导入到 Microsoft 365 邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-118">You have to be assigned the Mailbox Import Export role in Exchange Online to import PST files to Microsoft 365 mailboxes.</span></span> <span data-ttu-id="6e505-119">默认情况下，不会向 Exchange Online 中任何角色组分配此角色。</span><span class="sxs-lookup"><span data-stu-id="6e505-119">By default, this role isn't assigned to any role group in Exchange Online.</span></span> <span data-ttu-id="6e505-120">可以向“组织管理”角色组添加“邮箱导入导出”角色。</span><span class="sxs-lookup"><span data-stu-id="6e505-120">You can add the Mailbox Import Export role to the Organization Management role group.</span></span> <span data-ttu-id="6e505-121">或者，可以创建一个角色组，分配“邮箱导入导出”角色，然后将自己添加为成员。</span><span class="sxs-lookup"><span data-stu-id="6e505-121">Or you can create a role group, assign the Mailbox Import Export role, and then add yourself as a member.</span></span> <span data-ttu-id="6e505-122">有关详细信息，请参阅[管理角色组](https://go.microsoft.com/fwlink/p/?LinkId=730688)中的“向角色组添加角色”或“创建角色组”部分。</span><span class="sxs-lookup"><span data-stu-id="6e505-122">For more information, see the "Add a role to a role group" or the "Create a role group" sections in [Manage role groups](https://go.microsoft.com/fwlink/p/?LinkId=730688).</span></span>
    
    <span data-ttu-id="6e505-123">此外，若要在安全与合规中心创建导入作业，必须满足以下条件之一：</span><span class="sxs-lookup"><span data-stu-id="6e505-123">Also, to create import jobs in the Security & Compliance Center, one of the following must be true:</span></span>
    
  - <span data-ttu-id="6e505-124">必须分配有 Exchange Onlin 中的“邮件收件人”角色。</span><span class="sxs-lookup"><span data-stu-id="6e505-124">You have to be assigned the Mail Recipients role in Exchange Online.</span></span> <span data-ttu-id="6e505-125">默认情况下，此角色分配给“组织管理和收件人管理”角色组。</span><span class="sxs-lookup"><span data-stu-id="6e505-125">By default, this role is assigned to the Organization Management and Recipient Management roles groups.</span></span>
    
    <span data-ttu-id="6e505-126">或</span><span class="sxs-lookup"><span data-stu-id="6e505-126">Or</span></span>
    
  - <span data-ttu-id="6e505-127">必须是你组织中的全局管理员。</span><span class="sxs-lookup"><span data-stu-id="6e505-127">You have to be a global administrator in your organization.</span></span>
    
  > [!TIP]
    > <span data-ttu-id="6e505-128">请考虑在 Exchange Online 中创建新角色组，此角色组专门用于导入 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-128">Consider creating a new role group in Exchange Online that's specifically intended for importing PST files.</span></span> <span data-ttu-id="6e505-129">若要获取导入 PST 文件所需的最低级别权限，请将“邮件导入导出和邮件收件人”角色分配给新角色组，然后添加成员。</span><span class="sxs-lookup"><span data-stu-id="6e505-129">For the minimum level of privileges required to import PST files, assign the Mailbox Import Export and Mail Recipients roles to the new role group, and then add members.</span></span>
  
- <span data-ttu-id="6e505-130">唯一受支持的将 PST 文件导入到 Microsoft 365 的方法是使用 AzCopy 工具，如本主题中所述。</span><span class="sxs-lookup"><span data-stu-id="6e505-130">The only supported method for importing PST files to Microsoft 365 is to use the AzCopy tool, as described in this topic.</span></span> <span data-ttu-id="6e505-131">无法使用 Azure 存储资源管理器将 PST 文件直接上传到 Azure 存储区域。</span><span class="sxs-lookup"><span data-stu-id="6e505-131">You can't use the Azure Storage Explorer to upload PST files directly to the Azure Storage area.</span></span>
    
- <span data-ttu-id="6e505-132">需要将要导入到 Microsoft 365 中的 PST 文件存储在组织中的文件服务器或共享文件夹中。</span><span class="sxs-lookup"><span data-stu-id="6e505-132">You need to store the PST files that you want to import to Microsoft 365 on a file server or shared folder in your organization.</span></span> <span data-ttu-id="6e505-133">在步骤 2 中，你将运行 AzCopy 工具，以便将存储在文件服务器或共享文件夹中的 PST 文件上传到 Microsoft 365。</span><span class="sxs-lookup"><span data-stu-id="6e505-133">In Step 2, you run the AzCopy tool to upload the PST files that are stored on a file server or shared folder to Microsoft 365.</span></span>
    
- <span data-ttu-id="6e505-134">大型 PST 文件可能会影响 PST 导入过程的性能。</span><span class="sxs-lookup"><span data-stu-id="6e505-134">Large PST files may impact the performance of the PST import process.</span></span> <span data-ttu-id="6e505-135">因此，我们建议你在步骤 2 中上传到 Azure 存储位置的每个 PST 文件不应大于 20 GB。</span><span class="sxs-lookup"><span data-stu-id="6e505-135">So we recommend that each PST file you upload to the Azure Storage location in Step 2 should be no larger than 20 GB.</span></span>

- <span data-ttu-id="6e505-136">此过程涉及复制和保存包含访问密钥的 URL 副本。</span><span class="sxs-lookup"><span data-stu-id="6e505-136">This procedure involves copying and saving a copy of a URL that contains an access key.</span></span> <span data-ttu-id="6e505-137">此信息将在步骤 2 中用于上载 PST 文件，而且如果要查看上载到 Office 365 的 PST 文件列表，还会在步骤 3 中用到。</span><span class="sxs-lookup"><span data-stu-id="6e505-137">This information will be used in Step 2 to upload your PST files, and in Step 3 if you want to view a list of the PST files uploaded to Office 365.</span></span> <span data-ttu-id="6e505-138">请务必采取预防措施来保护此 URL，就像保护密码或其他与安全相关的信息一样。</span><span class="sxs-lookup"><span data-stu-id="6e505-138">Be sure to take precautions to protect this URL like you would protect passwords or other security-related information.</span></span> <span data-ttu-id="6e505-139">例如，可以将其保存到受密码保护的 Microsoft Word 文档或加密的 USB 驱动器。</span><span class="sxs-lookup"><span data-stu-id="6e505-139">For example, you might save it to a password-protected Microsoft Word document or to an encrypted USB drive.</span></span> <span data-ttu-id="6e505-140">请参阅[更多信息](#more-information)部分，查看此组合 URL 和密钥的示例。</span><span class="sxs-lookup"><span data-stu-id="6e505-140">See the [More information](#more-information) section for an example of this combined URL and key.</span></span>
    
- <span data-ttu-id="6e505-141">你可以将 PST 文件导入 Office 365 中的非活动邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-141">You can import PST files to an inactive mailbox in Office 365.</span></span> <span data-ttu-id="6e505-142">可通过在 PST 导入映射文件中的 `Mailbox` 参数中指定非活动邮箱的 GUID 来实现此操作。</span><span class="sxs-lookup"><span data-stu-id="6e505-142">You do this by specifying the GUID of the inactive mailbox in the  `Mailbox` parameter in the PST Import mapping file.</span></span> <span data-ttu-id="6e505-143">有关信息，请参阅本主题中“**说明**”选项卡上的步骤 4。</span><span class="sxs-lookup"><span data-stu-id="6e505-143">See Step 4 on the **Instructions** tab in this topic for information.</span></span> 
    
- <span data-ttu-id="6e505-144">在 Exchange 混合部署中，对于主邮箱位于本地的用户，可将 PST 文件导入到基于云的存档邮箱中。</span><span class="sxs-lookup"><span data-stu-id="6e505-144">In an Exchange hybrid deployment, you can import PST files to a cloud-based archive mailbox for a user whose primary mailbox is on-premises.</span></span> <span data-ttu-id="6e505-145">为此，请在 PST 导入映射文件中执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="6e505-145">You do this by doing the following in the PST Import mapping file:</span></span>
    
  - <span data-ttu-id="6e505-146">在 `Mailbox` 参数中指定用户本地邮箱的电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="6e505-146">Specify the email address for the user's on-premises mailbox in the  `Mailbox` parameter.</span></span>
    
  - <span data-ttu-id="6e505-147">在 `IsArchive` 参数中指定 **TRUE** 值。</span><span class="sxs-lookup"><span data-stu-id="6e505-147">Specify the **TRUE** value in the  `IsArchive` parameter.</span></span>
    
    <span data-ttu-id="6e505-148">请参阅[步骤 4](#step-4-create-the-pst-import-mapping-file) 以了解更多信息。</span><span class="sxs-lookup"><span data-stu-id="6e505-148">See [Step 4](#step-4-create-the-pst-import-mapping-file) for more information.</span></span>
    
- <span data-ttu-id="6e505-149">导入 PST 文件后，邮箱的保留挂起设置将无限期打开。</span><span class="sxs-lookup"><span data-stu-id="6e505-149">After PST files are imported, the retention hold setting for the mailbox is turned on for an indefinite duration.</span></span> <span data-ttu-id="6e505-150">这意味着分配给该邮箱的保留策略将不会得到处理，除非你关闭保留挂起或设置关闭挂起的日期。</span><span class="sxs-lookup"><span data-stu-id="6e505-150">This means that the retention policy assigned to the mailbox won't be processed until you turn off the retention hold or set a date to turn off the hold.</span></span> <span data-ttu-id="6e505-151">我们为什么要这样做？</span><span class="sxs-lookup"><span data-stu-id="6e505-151">Why do we do this?</span></span> <span data-ttu-id="6e505-152">如果导入到邮箱的邮件是旧邮件，则可能会被永久删除（清除），因为根据为邮箱配置的保留设置，它们的保留期已过期。</span><span class="sxs-lookup"><span data-stu-id="6e505-152">If messages imported to a mailbox are old, they might be permanently deleted (purged) because their retention period has expired based on the retention settings configured for the mailbox.</span></span> <span data-ttu-id="6e505-153">将邮箱置于保留挂起状态将为邮箱所有者提供时间来管理这些新导入的邮件，或为你提供时间来更改邮箱的保留设置。</span><span class="sxs-lookup"><span data-stu-id="6e505-153">Placing the mailbox on retention hold gives the mailbox owner time to manage these newly imported messages or give you time to change the retention settings for the mailbox.</span></span> <span data-ttu-id="6e505-154">有关管理保留挂起的建议，请参阅本主题中的“[更多信息](#more-information)”部分。</span><span class="sxs-lookup"><span data-stu-id="6e505-154">See the [More information](#more-information) section in this topic for suggestions about managing the retention hold.</span></span>
    
- <span data-ttu-id="6e505-155">默认情况下，Microsoft 365 邮箱可以接收的最大邮件大小为 35 MB。</span><span class="sxs-lookup"><span data-stu-id="6e505-155">By default, the maximum message size that can be received by a Microsoft 365 mailbox is 35 MB.</span></span> <span data-ttu-id="6e505-156">这是因为邮箱的 *MaxReceiveSize* 属性的默认值被设置为 35 MB。</span><span class="sxs-lookup"><span data-stu-id="6e505-156">That's because the default value for the  *MaxReceiveSize*  property for a mailbox is set to 35 MB.</span></span> <span data-ttu-id="6e505-157">但是，Microsoft 365 中最大邮件接收大小的限制为 150 MB。</span><span class="sxs-lookup"><span data-stu-id="6e505-157">However, the limit for the maximum message receive size in Microsoft 365 is 150 MB.</span></span> <span data-ttu-id="6e505-158">因此，如果你导入的 PST 文件中包含大于 35 MB 的项目，则 Office 365 导入服务会自动将目标邮箱上的 *MaxReceiveSize* 属性值更改为 150 MB。</span><span class="sxs-lookup"><span data-stu-id="6e505-158">So if you import a PST file that contains an item larger than 35 MB, the Office 365 Import service we will automatically change the value of the  *MaxReceiveSize*  property on the target mailbox to 150 MB.</span></span> <span data-ttu-id="6e505-159">这将允许将最大 150 MB 的邮件导入到用户邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-159">This allows messages up to 150 MB to be imported to user mailboxes.</span></span>
    
    > [!TIP]
    > <span data-ttu-id="6e505-160">若要确定邮箱的邮件接收大小，可在 Exchange Online PowerShell 中运行此命令：`Get-Mailbox <user mailbox> | FL MaxReceiveSize`。</span><span class="sxs-lookup"><span data-stu-id="6e505-160">To identify the message receive size for a mailbox, you can run this command in Exchange Online PowerShell:  `Get-Mailbox <user mailbox> | FL MaxReceiveSize`.</span></span>

- <span data-ttu-id="6e505-161">有关 PST 导入过程的高级别概述，请参阅本文的 [导入过程的工作原理](#how-the-import-process-works) 部分。</span><span class="sxs-lookup"><span data-stu-id="6e505-161">For a high-level overview of the PST Import process, see [How the import process works](#how-the-import-process-works) section in this article.</span></span>

## <a name="step-1-copy-the-sas-url-and-install-azcopy"></a><span data-ttu-id="6e505-162">步骤 1：复制 SAS URL 并安装 AzCopy</span><span class="sxs-lookup"><span data-stu-id="6e505-162">Step 1: Copy the SAS URL and install AzCopy</span></span>

<span data-ttu-id="6e505-163">第一步是下载并安装 AzCopy 工具，你将在步骤 2 中运行该工具，以便将 PST 文件上传到 Office 365。</span><span class="sxs-lookup"><span data-stu-id="6e505-163">The first step is to download and install the AzCopy tool, which is the tool that you run in Step 2 to upload PST files to Office 365.</span></span> <span data-ttu-id="6e505-164">还会复制组织的 SAS URL。</span><span class="sxs-lookup"><span data-stu-id="6e505-164">You also copy the SAS URL for your organization.</span></span> <span data-ttu-id="6e505-165">此 URL 是组织 Microsoft 云中 Azure 存储位置的网络 URL 与共享访问签名 (SAS) 密钥的组合。</span><span class="sxs-lookup"><span data-stu-id="6e505-165">This URL is a combination of the network URL for the Azure Storage location in the Microsoft cloud for your organization and a Shared Access Signature (SAS) key.</span></span> <span data-ttu-id="6e505-166">此密钥为你提供将 PST 文件上传到 Azure 存储位置所需的权限。</span><span class="sxs-lookup"><span data-stu-id="6e505-166">This key provides you with the necessary permissions to upload PST files to your Azure Storage location.</span></span> <span data-ttu-id="6e505-167">请务必采取预防措施来保护 SAS URL。</span><span class="sxs-lookup"><span data-stu-id="6e505-167">Be sure to take precautions to protect the SAS URL.</span></span> <span data-ttu-id="6e505-168">它是你的组织所特有的，并将在步骤 2 中使用。</span><span class="sxs-lookup"><span data-stu-id="6e505-168">It's unique to your organization and will be used in Step 2.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6e505-169">若要使用本文中所述的网络上载方法和命令语法导入 PST 文件，必须使用可以在以下过程的步骤 6b 中下载的 AzCopy 版本。</span><span class="sxs-lookup"><span data-stu-id="6e505-169">To import PST files using the network upload method and command syntax documented in this article, you must use the version of AzCopy that can be downloaded in step 6b in the following procedure.</span></span> <span data-ttu-id="6e505-170">你也可以从[此处](https://aka.ms/downloadazcopy)下载相同版本的 AzCopy。</span><span class="sxs-lookup"><span data-stu-id="6e505-170">You can also download that same version of AzCopy from [here](https://aka.ms/downloadazcopy).</span></span> <span data-ttu-id="6e505-171">不支持使用不同版本的 AzCopy。</span><span class="sxs-lookup"><span data-stu-id="6e505-171">Using a different version of AzCopy isn't supported.</span></span>
  
1. <span data-ttu-id="6e505-172">转到 [https://protection.office.com](https://protection.office.com)，然后使用你组织中的管理员帐户的凭据进行登录。</span><span class="sxs-lookup"><span data-stu-id="6e505-172">Go to [https://protection.office.com](https://protection.office.com) and sign in using the credentials for an administrator account in your organization.</span></span>
    
2. <span data-ttu-id="6e505-173">在安全与合规中心的左窗格中，单击“**信息管理**”\>“**导入**”\>“**导入 PST 文件**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-173">In the left pane of the Security & Compliance Center, click **Information governance** \> **Import** \> **Import PST files**.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="6e505-174">你必须分配有相应的权限，才能访问安全与合规中心中的“**导入**”页面。</span><span class="sxs-lookup"><span data-stu-id="6e505-174">You have to be assigned the appropriate permissions to access the **Import** page in the Security & Compliance Center.</span></span> <span data-ttu-id="6e505-175">有关更多详细信息，请参阅**准备工作**部分。</span><span class="sxs-lookup"><span data-stu-id="6e505-175">See the **Before you begin** section for more information.</span></span> 
    
3. <span data-ttu-id="6e505-176">在“**导入 PST 文件**”页面上，单击 ![添加图标](../media/ITPro-EAC-AddIcon.gif)“**新建导入作业**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-176">On the **Import PST files** page, click ![Add Icon](../media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>
    
    <span data-ttu-id="6e505-177">系统将显示导入作业向导。</span><span class="sxs-lookup"><span data-stu-id="6e505-177">The import job wizard is displayed.</span></span>
    
4. <span data-ttu-id="6e505-178">为 PST 导入作业键入一个名称，然后单击“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-178">Type a name for the PST import job, and then click **Next**.</span></span> <span data-ttu-id="6e505-179">请使用小写字母、数字、连字符和下划线。</span><span class="sxs-lookup"><span data-stu-id="6e505-179">Use lowercase letters, numbers, hyphens, and underscores.</span></span> <span data-ttu-id="6e505-180">无法在名称中使用大写字母或包含空格。</span><span class="sxs-lookup"><span data-stu-id="6e505-180">You can't use uppercase letters or include spaces in the name.</span></span>
    
5. <span data-ttu-id="6e505-181">在“**你想要上载或发送数据?**”页面上，单击“**上传你的数据**”，然后单击“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-181">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>
    
    ![单击“上传你的数据”以创建网络上载导入作业](../media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. <span data-ttu-id="6e505-183">在“**导入数据**”页面上，执行以下两项操作：</span><span class="sxs-lookup"><span data-stu-id="6e505-183">On the **Import data** page, do the following two things:</span></span> 
    
    ![在“导入数据”页面上复制 SAS URL 并下载 AzCopy 工具](../media/74411014-ec4b-4e25-9065-404c934cce17.png)
  
    1. <span data-ttu-id="6e505-185">在步骤 2 中，单击“**显示网络上传 SAS URL**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-185">In step 2, click **Show network upload SAS URL**.</span></span> <span data-ttu-id="6e505-186">系统显示 SAS URL 后，单击“**复制到剪贴板**”，然后将其粘贴并保存到文件中，以便以后可以访问它。</span><span class="sxs-lookup"><span data-stu-id="6e505-186">After the SAS URL is displayed, click **Copy to clipboard** and then paste it and save it to a file so you can access it later.</span></span>
    
    1. <span data-ttu-id="6e505-187">在步骤 3 中，单击“**下载 Azure AzCopy**”以下载并安装 AzCopy 工具。</span><span class="sxs-lookup"><span data-stu-id="6e505-187">In step 3, click **Download Azure AzCopy** to download and install the AzCopy tool.</span></span> <span data-ttu-id="6e505-188">在弹出的窗口中，单击“**运行**”来安装 AzCopy。</span><span class="sxs-lookup"><span data-stu-id="6e505-188">In the pop-up window, click **Run** to install AzCopy.</span></span> 
    
   > [!NOTE]
   > <span data-ttu-id="6e505-189">可将“**导入数据**”页面保留为打开状态（如果需要再次复制 SAS URL），也可以单击“**取消**”将其关闭。</span><span class="sxs-lookup"><span data-stu-id="6e505-189">You can leave the **Import data** page open (in case you need to copy the SAS URL again) or click **Cancel** to close it.</span></span> 
 
## <a name="step-2-upload-your-pst-files-to-office-365"></a><span data-ttu-id="6e505-190">步骤 2：将 PST 文件上载到 Office 365</span><span class="sxs-lookup"><span data-stu-id="6e505-190">Step 2: Upload your PST files to Office 365</span></span>

<span data-ttu-id="6e505-191">现在就可以使用 AzCopy.exe 工具将 PST 文件上传到 Office 365。</span><span class="sxs-lookup"><span data-stu-id="6e505-191">Now you're ready to use the AzCopy.exe tool to upload PST files to Office 365.</span></span> <span data-ttu-id="6e505-192">此工具将其上传并存储在 Microsoft 云中的 Azure 存储位置。</span><span class="sxs-lookup"><span data-stu-id="6e505-192">This tool uploads and stores them in an Azure Storage location in the Microsoft cloud.</span></span> <span data-ttu-id="6e505-193">如前所述，您上传 PST 文件的 Azure 存储位置位于您的组织所在的 Microsoft 数据中心同一区域。</span><span class="sxs-lookup"><span data-stu-id="6e505-193">As previously explained, the Azure Storage location that you upload your PST files is located in the same regional Microsoft datacenter where your organization is located.</span></span> <span data-ttu-id="6e505-194">若要完成此步骤，PST 文件必须位于你组织中的文件共享或文件服务器中。</span><span class="sxs-lookup"><span data-stu-id="6e505-194">To complete this step, the PST files have to be located in a file share or file server in your organization.</span></span> <span data-ttu-id="6e505-195">这在此过程中称为源目录。</span><span class="sxs-lookup"><span data-stu-id="6e505-195">This is known as the source directory in this procedure.</span></span> <span data-ttu-id="6e505-196">每次运行 AzCopy 工具时，都可以指定不同的源目录。</span><span class="sxs-lookup"><span data-stu-id="6e505-196">Each time you run the AzCopy tool, you can specify a different source directory.</span></span> 

> [!NOTE]
> <span data-ttu-id="6e505-197">如前文所述，上传到 Azure 存储位置的每个 PST 文件不应大于 20 GB。</span><span class="sxs-lookup"><span data-stu-id="6e505-197">As previously stated, each PST file that you upload to the Azure Storage location should be no larger than 20 GB.</span></span> <span data-ttu-id="6e505-198">大于 20 GB 的 PST 文件可能会影响在步骤 6 中启动的 PST 导入过程的性能。</span><span class="sxs-lookup"><span data-stu-id="6e505-198">PST files larger than 20 GB may impact the performance of the PST import process that you start in Step 6.</span></span>

1. <span data-ttu-id="6e505-199">在您的本地计算机上打开命令提示符。</span><span class="sxs-lookup"><span data-stu-id="6e505-199">Open a Command Prompt on your local computer.</span></span>
    
2. <span data-ttu-id="6e505-200">转到您在步骤 1 中安装 AzCopy.exe 工具的目录。</span><span class="sxs-lookup"><span data-stu-id="6e505-200">Go to the directory where you installed the AzCopy.exe tool in Step 1.</span></span> <span data-ttu-id="6e505-201">如果在默认位置安装该工具，请转到 `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`。</span><span class="sxs-lookup"><span data-stu-id="6e505-201">If you installed the tool in the default location, go to `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`.</span></span>
    
3. <span data-ttu-id="6e505-202">运行以下命令以将 PST 文件上载到 Office 365。</span><span class="sxs-lookup"><span data-stu-id="6e505-202">Run the following command to upload the PST files to Office 365.</span></span>

    ```powershell
    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y
    ```

    > [!IMPORTANT] 
    > <span data-ttu-id="6e505-203">必须在上一个命令中将某个目录指定为源位置；无法指定单个 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-203">You must specify a directory as the source location in the previous command; you can't specify an individual PST file.</span></span> <span data-ttu-id="6e505-204">系统将上载源目录中的所有 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-204">All PST files in the source directory will be uploaded.</span></span>
 
    <span data-ttu-id="6e505-205">下表介绍了 AzCopy.exe 参数及其所需的值。</span><span class="sxs-lookup"><span data-stu-id="6e505-205">The following table describes the AzCopy.exe parameters and their required values.</span></span> <span data-ttu-id="6e505-206">在上一步中获得的信息会用在这些参数的值中。</span><span class="sxs-lookup"><span data-stu-id="6e505-206">The information you obtained in the previous step is used in the values for these parameters.</span></span>
    
    | <span data-ttu-id="6e505-207">参数</span><span class="sxs-lookup"><span data-stu-id="6e505-207">Parameter</span></span> | <span data-ttu-id="6e505-208">说明</span><span class="sxs-lookup"><span data-stu-id="6e505-208">Description</span></span> | <span data-ttu-id="6e505-209">示例</span><span class="sxs-lookup"><span data-stu-id="6e505-209">Example</span></span> |
    |:-----|:-----|:-----|
    | `/Source:` <br/> |<span data-ttu-id="6e505-210">指定组织中包含将被上载到 Office 365 的 PST 文件的源目录。</span><span class="sxs-lookup"><span data-stu-id="6e505-210">Specifies the source directory in your organization that contains the PST files that will be uploaded to Office 365.</span></span>  <br/> <span data-ttu-id="6e505-211">请务必用双引号 (" ") 引住此参数的值。</span><span class="sxs-lookup"><span data-stu-id="6e505-211">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/Source:"\\FILESERVER01\PSTs"` <br/> |
    | `/Dest:` <br/> |<span data-ttu-id="6e505-212">指定你在步骤 1 中获得的 SAS URL。</span><span class="sxs-lookup"><span data-stu-id="6e505-212">Specifies the SAS URL that you obtained in Step 1.</span></span>  <br/> <span data-ttu-id="6e505-213">请务必用双引号 (" ") 引住此参数的值。</span><span class="sxs-lookup"><span data-stu-id="6e505-213">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span><br/><br/><span data-ttu-id="6e505-214">**注意：** 如果在脚本或批处理文件中使用 SAS URL，则需留意需要转义的某些字符。</span><span class="sxs-lookup"><span data-stu-id="6e505-214">**Note:** If you use the SAS URL in a script or batch file, you need to watch out for certain characters that need to be escaped.</span></span> <span data-ttu-id="6e505-215">例如，必须将 `%` 更改为 `%%` 并将 `&` 更改为 `^&`。</span><span class="sxs-lookup"><span data-stu-id="6e505-215">For example, you have to change `%` to `%%` and change `&` to `^&`.</span></span><br/><br/><span data-ttu-id="6e505-216">**提示：**（可选）可指定要将 PST 文件上传到的 Azure 存储位置中的子文件夹。</span><span class="sxs-lookup"><span data-stu-id="6e505-216">**Tip:** (Optional) You can specify a subfolder in the Azure Storage location to upload the PST files to.</span></span> <span data-ttu-id="6e505-217">可以通过在 SAS URL 中添加子文件夹位置（在“ingestiondata”后面）来执行此操作。</span><span class="sxs-lookup"><span data-stu-id="6e505-217">You do this by adding a subfolder location (after "ingestiondata") in the SAS URL.</span></span> <span data-ttu-id="6e505-218">第一个示例不指定子文件夹。</span><span class="sxs-lookup"><span data-stu-id="6e505-218">The first example doesn't specify a subfolder.</span></span> <span data-ttu-id="6e505-219">这意味着 PST 被上传到 Azure 存储位置的根文件夹（名为 *ingestiondata*）中。</span><span class="sxs-lookup"><span data-stu-id="6e505-219">That means the PSTs are uploaded to the root (named  *ingestiondata*) of the Azure Storage location.</span></span> <span data-ttu-id="6e505-220">第二个示例会将 PST 文件上传到 Azure 存储位置根文件夹中的一个子文件夹（名为 *PSTFiles*）中。</span><span class="sxs-lookup"><span data-stu-id="6e505-220">The second example uploads the PST files to a subfolder (named  *PSTFiles*) in the root of the Azure Storage location.</span></span>  <br/> | `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> <span data-ttu-id="6e505-221">或</span><span class="sxs-lookup"><span data-stu-id="6e505-221">Or</span></span>  <br/>  `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> |
    | `/V:` <br/> |<span data-ttu-id="6e505-p128">将详细状态消息输出到日志文件。默认情况下，详细日志文件名为 AzCopyVerbose.log，所在路径为 %LocalAppData%\Microsoft\Azure\AzCopy。如果对此选项指定现有的文件位置，则详细日志将被附加到该文件中。</span><span class="sxs-lookup"><span data-stu-id="6e505-p128">Outputs verbose status messages into a log file. By default, the verbose log file is named AzCopyVerbose.log in %LocalAppData%\Microsoft\Azure\AzCopy. If you specify an existing file location for this option, the verbose log will be appended to that file.</span></span>  <br/> <span data-ttu-id="6e505-225">请务必用双引号 (" ") 引住此参数的值。</span><span class="sxs-lookup"><span data-stu-id="6e505-225">Be sure to surround the value of this parameter with double-quotation marks (" ").</span></span>  <br/> | `/V:"c:\Users\Admin\Desktop\Uploadlog.log"` <br/> |
    | `/S` <br/> |<span data-ttu-id="6e505-226">此可选开关指定递归模式，这样，AzCopy 工具将复制位于 `/Source:` 参数指定的源目录的子文件夹中的 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-226">This optional switch specifies the recursive mode so that the AzCopy tool copies PSTs files that are located in subfolders in the source directory that is specified by the  `/Source:` parameter.</span></span>  <br/> <span data-ttu-id="6e505-227">**注意：** 如果包含该开关，子文件夹中的 PST 文件在上传后将在 Azure 存储位置中具有不同的文件路径名。</span><span class="sxs-lookup"><span data-stu-id="6e505-227">**Note:** If you include this switch, PST files in subfolders will have a different file pathname in the Azure Storage location after they're uploaded.</span></span> <span data-ttu-id="6e505-228">必须在步骤 4 中创建的 CSV 文件中指定确切的文件路径名。</span><span class="sxs-lookup"><span data-stu-id="6e505-228">You'll have to specify the exact file pathname in the CSV file that you create in Step 4.</span></span>  <br/> | `/S` <br/> |
    | `/Y` <br/> |<span data-ttu-id="6e505-229">此必需开关允许在将 PST 文件上传到 Azure 存储位置时使用只写 SAS 令牌。</span><span class="sxs-lookup"><span data-stu-id="6e505-229">This required switch allows the use of write-only SAS tokens when you upload the PST files to the Azure Storage location.</span></span> <span data-ttu-id="6e505-230">在步骤 1 中获得（并在 `/Dest:` 参数中指定）的 SAS URL 是一个只写 SAS URL，这便是必须包含此开关的原因。</span><span class="sxs-lookup"><span data-stu-id="6e505-230">The SAS URL you obtained in step 1 (and specified in  `/Dest:` parameter) is a write-only SAS URL, which is why you must include this switch.</span></span> <span data-ttu-id="6e505-231">只写 SAS URL 不会阻止你使用 Azure 存储资源管理器查看上传到 Azure 存储位置的 PST 文件的列表。</span><span class="sxs-lookup"><span data-stu-id="6e505-231">A write-only SAS URL won't prevent you from using the Azure Storage Explorer to view a list of the PST files uploaded to the Azure Storage location.</span></span>  <br/> | `/Y` <br/> |

<span data-ttu-id="6e505-232">以下是对每个参数使用实际值的 AzCopy.exe 工具的语法示例：</span><span class="sxs-lookup"><span data-stu-id="6e505-232">Here's an example of the syntax for the AzCopy.exe tool using actual values for each parameter:</span></span>
    
```powershell
  AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
```

<span data-ttu-id="6e505-p131">运行该命令后，显示的状态消息会显示对 PST 文件进行上载的进度。最终状态消息显示已成功上载的文件总数。</span><span class="sxs-lookup"><span data-stu-id="6e505-p131">After you run the command, status messages are displayed that show the progress of uploading the PST files. A final status message shows the total number of files that were successfully uploaded.</span></span>

> [!TIP]
> <span data-ttu-id="6e505-235">在成功运行 AzCopy.exe 命令并验证所有参数都正确后，将命令行语法副本保存到你复制在步骤 1 中获得的信息的相同（安全）文件中。</span><span class="sxs-lookup"><span data-stu-id="6e505-235">After you successfully run the AzCopy.exe command and verify that all the parameters are correct, save a copy of the command line syntax to the same (secured) file where you copied the information you obtained in Step 1.</span></span> <span data-ttu-id="6e505-236">然后，每次要运行 AzCopy.exe 工具将 PST 文件上载到 Office 365 时，你可以在命令提示符处复制并粘贴此命令。</span><span class="sxs-lookup"><span data-stu-id="6e505-236">Then you can copy and paste this command in a Command Prompt each time that you want to run the AzCopy.exe tool to upload PST files to Office 365.</span></span> <span data-ttu-id="6e505-237">唯一可能需要你更改的值是 `/Source:` 参数的值。</span><span class="sxs-lookup"><span data-stu-id="6e505-237">The only value you might have to change are the ones for the  `/Source:` parameter.</span></span> <span data-ttu-id="6e505-238">这具体取决于 PST 文件所在的源目录。</span><span class="sxs-lookup"><span data-stu-id="6e505-238">This depends on the source directory where the PST files are located.</span></span>

## <a name="optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365"></a><span data-ttu-id="6e505-239">（可选）步骤 3：查看已上传到 Office 365 的 PST 文件的列表</span><span class="sxs-lookup"><span data-stu-id="6e505-239">(Optional) Step 3: View a list of the PST files uploaded to Office 365</span></span>

<span data-ttu-id="6e505-240">在该可选步骤中，可以安装并使用 Microsoft Azure 存储资源管理器（这是一个免费的开源工具）查看已上传到 Azure blob 的 PST 文件的列表。</span><span class="sxs-lookup"><span data-stu-id="6e505-240">As an optional step, you can install and use the Microsoft Azure Storage Explorer (which is a free, open-source tool) to view the list of the PST files that you've uploaded to the Azure blob.</span></span> <span data-ttu-id="6e505-241">有两个很好的理由来执行此操作：</span><span class="sxs-lookup"><span data-stu-id="6e505-241">There are two good reasons to do this:</span></span>
  
- <span data-ttu-id="6e505-242">验证 PST 文件是否已从你所在组织中的共享文件夹或文件服务器成功上载到 Azure blob。</span><span class="sxs-lookup"><span data-stu-id="6e505-242">Verify that PST files from the shared folder or file server in your organization were successfully uploaded to the Azure blob.</span></span>
    
- <span data-ttu-id="6e505-243">验证已上传到 Azure blob 的每个 PST 文件的文件名（和子文件夹路径名，如果包含子文件夹）。</span><span class="sxs-lookup"><span data-stu-id="6e505-243">Verify the filename (and the subfolder pathname if you included one) for each PST file uploaded to the Azure blob.</span></span> <span data-ttu-id="6e505-244">当你在下一步中创建 PST 映射文件时，这非常有用，因为必须为每个 PST 文件指定文件夹路径名和文件名。</span><span class="sxs-lookup"><span data-stu-id="6e505-244">This is helpful when you're creating the PST mapping file in the next step because you have to specify both the folder pathname and filename for each PST file.</span></span> <span data-ttu-id="6e505-245">验证这些名称可以帮助减少 PST 映射文件中的潜在错误。</span><span class="sxs-lookup"><span data-stu-id="6e505-245">Verifying these names can help reduce potential errors in your PST mapping file.</span></span>
    
<span data-ttu-id="6e505-246">Microsoft Azure 存储资源管理器处于预览阶段。</span><span class="sxs-lookup"><span data-stu-id="6e505-246">The Microsoft Azure Storage Explorer is in Preview.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="6e505-247">无法使用 Azure 存储资源管理器上载或修改 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-247">You can't use the Azure Storage Explorer to upload or modify PST files.</span></span> <span data-ttu-id="6e505-248">导入 PST 文件的唯一支持方法是使用 AzCopy。</span><span class="sxs-lookup"><span data-stu-id="6e505-248">The only supported method for importing PST files is to use AzCopy.</span></span> <span data-ttu-id="6e505-249">此外，无法删除已上载到 Azure blob 的 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-249">Also, you can't delete PST files that you've uploaded to the Azure blob.</span></span> <span data-ttu-id="6e505-250">如果尝试删除 PST 文件，将看到提示没有所需权限的错误消息。</span><span class="sxs-lookup"><span data-stu-id="6e505-250">If you try to delete a PST file, you'll receive an error about not having the required permissions.</span></span> <span data-ttu-id="6e505-251">请注意，所有 PST 文件都会自动从 Azure 存储区域删除。</span><span class="sxs-lookup"><span data-stu-id="6e505-251">Note that all PST files are automatically deleted from your Azure storage area.</span></span> <span data-ttu-id="6e505-252">如果没有正在进行的导入作业，则 **ingestiondata** 容器中的所有 PST 文件都会在创建最新导入作业 30 天后被删除。</span><span class="sxs-lookup"><span data-stu-id="6e505-252">If there are no import jobs in progress, then all PST files in the **ingestiondata** container are deleted 30 days after the most recent import job was created.</span></span>
  
<span data-ttu-id="6e505-253">若要安装 Azure 存储资源管理器并连接到 Azure 存储区域，请执行以下操作：</span><span class="sxs-lookup"><span data-stu-id="6e505-253">To install the Azure Storage Explorer and connect to your Azure Storage area:</span></span>
  
1. <span data-ttu-id="6e505-254">下载并安装 [Microsoft Azure 存储资源管理器工具](https://go.microsoft.com/fwlink/p/?LinkId=544842)。</span><span class="sxs-lookup"><span data-stu-id="6e505-254">Download and install the [Microsoft Azure Storage Explorer tool](https://go.microsoft.com/fwlink/p/?LinkId=544842).</span></span>
    
2. <span data-ttu-id="6e505-255">启动 Microsoft Azure 存储资源管理器，右键单击左窗格中的“存储帐户”\*\*\*\*，然后单击“连接到 Azure 存储”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="6e505-255">Start the Microsoft Azure Storage Explorer, right-click **Storage Accounts** in the left pane, and then click **Connect to Azure Storage**.</span></span>
    
    ![右键单击“存储帐户”，然后单击“连接到 Azure 存储”](../media/75b80cc3-c336-4f96-ad32-54ac9b96a7af.png)
  
3. <span data-ttu-id="6e505-257">单击“使用共享访问签名 (SAS) URI 或连接字符串”\*\*\*\*，然后单击“下一步”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="6e505-257">Click **Use a shared access signature (SAS) URI or connection string** and click **Next**.</span></span>
    
4. <span data-ttu-id="6e505-258">单击“**使用 SAS URI**”，将在步骤 1 中获得的 SAS URL 粘贴到 “**URI**”下的框中，然后单击“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-258">Click **Use a SAS URI**, paste the SAS URL that you obtained in Step 1 into the box under **URI**, and then click **Next**.</span></span>
    
5. <span data-ttu-id="6e505-259">在“连接摘要”\*\*\*\* 页面上，可以查看连接信息，然后单击“连接”\*\*\*\*。</span><span class="sxs-lookup"><span data-stu-id="6e505-259">On the **Connection summary** page, you can review the connection information, and then click **Connect**.</span></span>
    
    <span data-ttu-id="6e505-260">此时，会打开 **ingestiondata** 容器。</span><span class="sxs-lookup"><span data-stu-id="6e505-260">The **ingestiondata** container is opened.</span></span> <span data-ttu-id="6e505-261">它包含你在步骤 2 中上传的 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-261">It contains the PST files that you uploaded in Step 2.</span></span> <span data-ttu-id="6e505-262">**ingestiondata** 容器位于“存储帐户”\*\*\*\*\>“(SAS 附加服务)”\*\*\*\*\>“Blob 容器”\*\*\*\* 下。</span><span class="sxs-lookup"><span data-stu-id="6e505-262">The **ingestiondata** container is located under **Storage Accounts** \> **(SAS-Attached Services)** \> **Blob Containers**.</span></span> 
    
    ![Azure 存储资源管理器显示你上传的 PST 文件的列表](../media/12376fed-13a5-4a09-8fe6-e819e011b334.png)
  
6. <span data-ttu-id="6e505-264">使用完 Microsoft Azure 存储资源管理器后，右键单击“ingestiondata”\*\*\*\*，然后单击“分离”\*\*\*\* 断开与 Azure 存储区域的连接。</span><span class="sxs-lookup"><span data-stu-id="6e505-264">When you're finished using the Microsoft Azure Storage Explorer, right-click **ingestiondata**, and then click **Detach** to disconnect from your Azure Storage area.</span></span> <span data-ttu-id="6e505-265">否则，下次尝试附加时会收到错误消息。</span><span class="sxs-lookup"><span data-stu-id="6e505-265">Otherwise, you'll receive an error the next time you try to attach.</span></span> 
    
    ![右键单击“ingestion”，然后单击“分离”以断开与 Azure 存储区域的连接](../media/1e8e5e95-4215-4ce4-a13d-ab5f826a0510.png)
  
## <a name="step-4-create-the-pst-import-mapping-file"></a><span data-ttu-id="6e505-267">步骤 4：创建 PST 导入映射文件</span><span class="sxs-lookup"><span data-stu-id="6e505-267">Step 4: Create the PST Import mapping file</span></span>

<span data-ttu-id="6e505-268">将 PST 文件上传到你组织的 Azure 存储位置后，下一步是创建一个逗号分隔值 (CSV) 文件，用于指定要将 PST 文件导入到哪些用户邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-268">After the PST files have been uploaded to the Azure Storage location for your organization, the next step is to create a comma-separated value (CSV) file that specifies which user mailboxes the PST files will be imported to.</span></span> <span data-ttu-id="6e505-269">在下一步中，创建 PST 导入作业时，将提交此 CSV 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-269">You'll submit this CSV file in the next step when you create a PST Import job.</span></span>
  
1. <span data-ttu-id="6e505-270">[下载 PST 导入映射文件的副本](https://go.microsoft.com/fwlink/p/?LinkId=544717)。</span><span class="sxs-lookup"><span data-stu-id="6e505-270">[Download a copy of the PST Import mapping file](https://go.microsoft.com/fwlink/p/?LinkId=544717).</span></span>

2. <span data-ttu-id="6e505-p139">打开或将 CSV 文件保存到您的本地计算机。下面的示例显示已完成的 PST 导入映射文件（在记事本中打开）。使用 Microsoft Excel 编辑 CSV 文件变得容易得多。</span><span class="sxs-lookup"><span data-stu-id="6e505-p139">Open or save the CSV file to your local computer. The following example shows a completed PST Import mapping file (opened in NotePad). It's much easier to use Microsoft Excel to edit the CSV file.</span></span>

    ```console
    Workload,FilePath,Name,Mailbox,IsArchive,TargetRootFolder,ContentCodePage,SPFileContainer,SPManifestContainer,SPSiteUrl
    Exchange,,annb.pst,annb@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,annb_archive.pst,annb@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,,donh.pst,donh@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,donh_archive.pst,donh@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,PSTFiles,pilarp.pst,pilarp@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,PSTFiles,pilarp_archive.pst,pilarp@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,tonyk.pst,tonyk@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,tonyk_archive.pst,tonyk@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,zrinkam.pst,zrinkam@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,zrinkam_archive.pst,zrinkam@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    ```

    <span data-ttu-id="6e505-274">该 CSV 文件的第一行（或者说标题行）列出了 PST 导入服务将用于将 PST 文件导入到用户邮箱中的参数。</span><span class="sxs-lookup"><span data-stu-id="6e505-274">The first row, or header row, of the CSV file lists the parameters that will be used by the PST Import service to import the PST files to user mailboxes.</span></span> <span data-ttu-id="6e505-275">每个参数名称都用逗号分隔开。</span><span class="sxs-lookup"><span data-stu-id="6e505-275">Each parameter name is separated by a comma.</span></span> <span data-ttu-id="6e505-276">标题行下的每一行代表将 PST 文件导入到特定邮箱所对应的参数值。</span><span class="sxs-lookup"><span data-stu-id="6e505-276">Each row under the header row represents the parameter values for importing a PST file to a specific mailbox.</span></span> <span data-ttu-id="6e505-277">需要用一行来对应每个要导入到用户邮箱中的 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-277">You need a row for each PST file that you want to import to a user mailbox.</span></span> <span data-ttu-id="6e505-278">CSV 映射文件最多可包含 500 行。</span><span class="sxs-lookup"><span data-stu-id="6e505-278">You can have a maximum of 500 rows in the CSV mapping file.</span></span> <span data-ttu-id="6e505-279">若要导入超过 500 行的 PST 文件，必须在步骤 5 中创建多个映射文件并创建多个导入作业。</span><span class="sxs-lookup"><span data-stu-id="6e505-279">To import more than 500 PST files, you'll have to create multiple mapping files and create multiple import jobs in Step 5.</span></span>

    > [!NOTE]
    > <span data-ttu-id="6e505-280">不要更改标题行中的任何内容，包括 SharePoint 参数；这些内容会在 PST 导入过程中被忽略。</span><span class="sxs-lookup"><span data-stu-id="6e505-280">Don't change anything in the header row, including the SharePoint parameters; they will be ignored during the PST Import process.</span></span> <span data-ttu-id="6e505-281">此外，一定要用实际数据替换映射文件中的占位符数据。</span><span class="sxs-lookup"><span data-stu-id="6e505-281">Also, be sure to replace the placeholder data in the mapping file with your actual data.</span></span>

 3. <span data-ttu-id="6e505-282">使用下表中的信息为 CSV 文件填充所需的信息。</span><span class="sxs-lookup"><span data-stu-id="6e505-282">Use the information in the following table to populate the CSV file with the required information.</span></span>

    | <span data-ttu-id="6e505-283">参数</span><span class="sxs-lookup"><span data-stu-id="6e505-283">Parameter</span></span> | <span data-ttu-id="6e505-284">说明</span><span class="sxs-lookup"><span data-stu-id="6e505-284">Description</span></span> | <span data-ttu-id="6e505-285">示例</span><span class="sxs-lookup"><span data-stu-id="6e505-285">Example</span></span> |
    |:-----|:-----|:-----|
    | `Workload` <br/> |<span data-ttu-id="6e505-286">指定将数据导入到的服务。</span><span class="sxs-lookup"><span data-stu-id="6e505-286">Specifies the service that data will be imported to.</span></span> <span data-ttu-id="6e505-287">若要将 PST 文件导入到用户邮箱，请使用 `Exchange`。</span><span class="sxs-lookup"><span data-stu-id="6e505-287">To import PST files to user mailboxes, use  `Exchange`.</span></span>  <br/> | `Exchange` <br/> |
    | `FilePath` <br/> |<span data-ttu-id="6e505-288">指定在步骤 2 中将 PST 文件上传到的 Azure 存储位置中的文件夹位置。</span><span class="sxs-lookup"><span data-stu-id="6e505-288">Specifies the folder location in the Azure Storage location that you uploaded the PST files to in Step 2.</span></span>  <br/> <span data-ttu-id="6e505-289">如果在步骤 2 中你未在 SAS URL 中的 `/Dest:` 参数中包含可选子文件夹名称，请在 CSV 文件中将此参数留空。</span><span class="sxs-lookup"><span data-stu-id="6e505-289">If you didn't include an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2, leave this parameter blank in the CSV file.</span></span> <span data-ttu-id="6e505-290">如果包含了子文件夹名称，请在此参数中指定该名称（请参阅第二个示例）。</span><span class="sxs-lookup"><span data-stu-id="6e505-290">If you included a subfolder name, specify it in this parameter (see the second example).</span></span> <span data-ttu-id="6e505-291">此参数的值区分大小写。</span><span class="sxs-lookup"><span data-stu-id="6e505-291">The value for this parameter is case-sensitive.</span></span>  <br/> <span data-ttu-id="6e505-292">无论采用哪种方法，均*不要*在 `FilePath` 参数的值中包含“ingestiondata”。</span><span class="sxs-lookup"><span data-stu-id="6e505-292">Either way,  *don't*  include "ingestiondata" in the value for the  `FilePath` parameter.</span></span>  <br/><br/> <span data-ttu-id="6e505-293">**重要提示**：如果在步骤 2 中你在 SAS URL 中的 `/Dest:` 参数中包含了可选子文件夹名称，则文件路径名称的大小写必须与你使用的大小写相同。</span><span class="sxs-lookup"><span data-stu-id="6e505-293">**Important:** The case for the file path name must be the same as the case you used if you included an optional subfolder name in the SAS URL in the  `/Dest:` parameter in Step 2.</span></span> <span data-ttu-id="6e505-294">例如，如果你在步骤 2 中将 `PSTFiles` 用作子文件夹名称，然后在 CSV 文件中的 `FilePath` 参数中使用 `pstfiles`，则导入 PST 文件将会失败。</span><span class="sxs-lookup"><span data-stu-id="6e505-294">For example, if you used  `PSTFiles` for the subfolder name in Step 2 and then use  `pstfiles` in the  `FilePath` parameter in CSV file, the import for the PST file will fail.</span></span> <span data-ttu-id="6e505-295">请务必在两种情况下都使用相同的大小写。</span><span class="sxs-lookup"><span data-stu-id="6e505-295">Be sure to use the same case in both instances.</span></span>  <br/> |<span data-ttu-id="6e505-296">（保留为空白）</span><span class="sxs-lookup"><span data-stu-id="6e505-296">(leave blank)</span></span>  <br/> <span data-ttu-id="6e505-297">或</span><span class="sxs-lookup"><span data-stu-id="6e505-297">Or</span></span>  <br/>  `PSTFiles` <br/> |
    | `Name` <br/> |<span data-ttu-id="6e505-298">指定要导入到用户邮箱的 PST 文件的名称。</span><span class="sxs-lookup"><span data-stu-id="6e505-298">Specifies the name of the PST file that will be imported to the user mailbox.</span></span> <span data-ttu-id="6e505-299">此参数的值区分大小写。</span><span class="sxs-lookup"><span data-stu-id="6e505-299">The value for this parameter is case-sensitive.</span></span>  <br/> <br/><span data-ttu-id="6e505-300">**重要说明：** CSV 文件中的 PST 文件名的大小写必须与在步骤 2 中上传到 Azure 存储位置的 PST 文件相同。</span><span class="sxs-lookup"><span data-stu-id="6e505-300">**Important:** The case for the PST file name in the CSV file must be the same as the PST file that was uploaded to the Azure Storage location in Step 2.</span></span> <span data-ttu-id="6e505-301">例如，如果在 CSV 文件中的 `Name` 参数中使用 `annb.pst`，但实际 PST 文件的名称为 `AnnB.pst`，则导入该 PST 文件将会失败。</span><span class="sxs-lookup"><span data-stu-id="6e505-301">For example, if you use  `annb.pst` in the  `Name` parameter in the CSV file, but the name of the actual PST file is  `AnnB.pst`, the import for that PST file will fail.</span></span> <span data-ttu-id="6e505-302">请确保 CSV 文件中的 PST 名称使用与实际 PST 文件相同的大小写。</span><span class="sxs-lookup"><span data-stu-id="6e505-302">Be sure that the name of the PST in the CSV file uses the same case as the actual PST file.</span></span>  <br/> | `annb.pst` <br/> |
    | `Mailbox` <br/> |<span data-ttu-id="6e505-303">指定要将 PST 文件导入到的邮箱的电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="6e505-303">Specifies the email address of the mailbox that the PST file will be imported to.</span></span> <span data-ttu-id="6e505-304">不能指定公用文件夹，因为 PST 导入服务不支持将 PST 文件导入公用文件夹。</span><span class="sxs-lookup"><span data-stu-id="6e505-304">You can't specify a public folder because the PST Import Service doesn't support importing PST files to public folders.</span></span>  <br/> <span data-ttu-id="6e505-305">若要将 PST 文件导入到非活动邮箱，必须为此参数指定邮箱 GUID。</span><span class="sxs-lookup"><span data-stu-id="6e505-305">To import a PST file to an inactive mailbox, you have to specify the mailbox GUID for this parameter.</span></span> <span data-ttu-id="6e505-306">若要获取此 GUID，请在 Exchange Online 中运行以下 PowerShell 命令：`Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid`</span><span class="sxs-lookup"><span data-stu-id="6e505-306">To obtain this GUID, run the following PowerShell command in Exchange Online:  `Get-Mailbox <identity of inactive mailbox> -InactiveMailboxOnly | FL Guid`</span></span> <br/> <br/><span data-ttu-id="6e505-307">**注意：** 有时，你可能有多个邮箱具有相同的电子邮件地址，其中一个邮箱是活动邮箱，另一个邮箱处于软删除（或非活动）状态。</span><span class="sxs-lookup"><span data-stu-id="6e505-307">**Note:** Sometimes you might have multiple mailboxes with the same email address, where one mailbox is an active mailbox and the other mailbox is in a soft-deleted (or inactive) state.</span></span> <span data-ttu-id="6e505-308">在这种情况下，必须指定邮箱 GUID 来唯一标识要将 PST 文件导入到的邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-308">In these situations, you have to specify the mailbox GUID to uniquely identify the mailbox to import the PST file to.</span></span> <span data-ttu-id="6e505-309">若要获取活动邮箱的此 GUID，请运行以下 PowerShell 命令：`Get-Mailbox <identity of active mailbox> | FL Guid`。</span><span class="sxs-lookup"><span data-stu-id="6e505-309">To obtain this GUID for active mailboxes, run the following PowerShell command:  `Get-Mailbox <identity of active mailbox> | FL Guid`.</span></span> <span data-ttu-id="6e505-310">若要获取软删除（或非活动）邮箱的 GUID，请运行此命令：`Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`。</span><span class="sxs-lookup"><span data-stu-id="6e505-310">To obtain the GUID for soft-deleted (or inactive) mailboxes, run this command  `Get-Mailbox <identity of soft-deleted or inactive mailbox> -SoftDeletedMailbox | FL Guid`.</span></span>  <br/> | `annb@contoso.onmicrosoft.com` <br/> <span data-ttu-id="6e505-311">或</span><span class="sxs-lookup"><span data-stu-id="6e505-311">Or</span></span>  <br/>  `2d7a87fe-d6a2-40cc-8aff-1ebea80d4ae7` <br/> |
    | `IsArchive` <br/> | <span data-ttu-id="6e505-312">指定是否要将 PST 文件导入到用户的存档邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-312">Specifies whether to import the PST file to the user's archive mailbox.</span></span> <span data-ttu-id="6e505-313">有两个选项：</span><span class="sxs-lookup"><span data-stu-id="6e505-313">There are two options:</span></span>  <br/><br/><span data-ttu-id="6e505-314">**FALSE：** 将 PST 文件导入到用户的主邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-314">**FALSE:** Imports the PST file to the user's primary mailbox.</span></span>  <br/> <span data-ttu-id="6e505-315">**TRUE：** 将 PST 文件导入到用户的存档邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-315">**TRUE:** Imports the PST file to the user's archive mailbox.</span></span> <span data-ttu-id="6e505-316">这是假设[用户的存档邮箱已启用](enable-archive-mailboxes.md)的情况。</span><span class="sxs-lookup"><span data-stu-id="6e505-316">This assumes that the [user's archive mailbox is enabled](enable-archive-mailboxes.md).</span></span> <br/><br/><span data-ttu-id="6e505-317">如果将此参数设置为 `TRUE`，但用户的存档邮箱未启用，则针对此用户进行的导入将失败。</span><span class="sxs-lookup"><span data-stu-id="6e505-317">If you set this parameter to  `TRUE` and the user's archive mailbox isn't enabled, the import for that user will fail.</span></span> <span data-ttu-id="6e505-318">如果针对某个用户的导入失败（因为他们的存档邮箱未启用，并且此属性设置为 `TRUE`），导入作业中的其他用户将不会受到影响。</span><span class="sxs-lookup"><span data-stu-id="6e505-318">If an import fails for one user (because their archive isn't enabled and this property is set to  `TRUE`), the other users in the import job won't be affected.</span></span>  <br/>  <span data-ttu-id="6e505-319">如果将此参数留空，PST 文件会导入到用户的主邮箱中。</span><span class="sxs-lookup"><span data-stu-id="6e505-319">If you leave this parameter blank, the PST file is imported to the user's primary mailbox.</span></span>  <br/> <br/><span data-ttu-id="6e505-320">**注意：** 若要针对主邮箱位于本地的某个用户将 PST 文件导入到基于云的存档邮箱，只需将此参数指定为 `TRUE`，并将 `Mailbox` 参数指定为该用户本地邮箱的电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="6e505-320">**Note:** To import a PST file to a cloud-based archive mailbox for a user whose primary mailbox is on-premises, just specify  `TRUE` for this parameter and specify the email address for the user's on-premises mailbox for the  `Mailbox` parameter.</span></span>  <br/> | `FALSE` <br/> <span data-ttu-id="6e505-321">或</span><span class="sxs-lookup"><span data-stu-id="6e505-321">Or</span></span>  <br/>  `TRUE` <br/> |
    | `TargetRootFolder` <br/> | <span data-ttu-id="6e505-322">指定要将 PST 文件导入到的邮箱文件夹。</span><span class="sxs-lookup"><span data-stu-id="6e505-322">Specifies the mailbox folder that the PST file is imported to.</span></span>  <br/> <br/> <span data-ttu-id="6e505-323">如果将此参数留空，则 PST 文件将被导入到位于邮箱根级别的名为“**导入**”的新文件夹中（与“收件箱”文件夹和其他默认邮箱文件夹属于同一级别）。</span><span class="sxs-lookup"><span data-stu-id="6e505-323">If you leave this parameter blank, the PST file will be imported to a new folder named **Imported** at the root level of the mailbox (the same level as the Inbox folder and the other default mailbox folders).</span></span>  <br/> <br/> <span data-ttu-id="6e505-324">如果指定 `/`，会将 PST 文件中的文件夹和邮件导入到目标邮箱或存档中的文件夹结构的顶部。</span><span class="sxs-lookup"><span data-stu-id="6e505-324">If you specify  `/`, the folders and items in the PST file are imported to the top of the folder structure in the target mailbox or archive.</span></span> <span data-ttu-id="6e505-325">如果目标邮箱中存在一个文件夹（例如，默认文件夹“收件箱”、“已发送邮件”和“已删除邮件”），则 PST 中该文件夹中的邮件将合并到目标邮箱中的现有文件夹中。</span><span class="sxs-lookup"><span data-stu-id="6e505-325">If a folder exists in the target mailbox (for example, default folders such as Inbox, Sent Items, and Deleted Items), the items in that folder in the PST are merged into the existing folder in the target mailbox.</span></span> <span data-ttu-id="6e505-326">例如，如果 PST 文件包含一个“收件箱”文件夹，则该文件夹中的邮件将导入到目标邮箱中的“收件箱”文件夹中。</span><span class="sxs-lookup"><span data-stu-id="6e505-326">For example, if the PST file contains an Inbox folder, items in that folder are imported to the Inbox folder in the target mailbox.</span></span> <span data-ttu-id="6e505-327">如果目标邮箱的文件夹结构中不存在新文件夹，则会创建新文件夹。</span><span class="sxs-lookup"><span data-stu-id="6e505-327">New folders are created if they don't exist in the folder structure for the target mailbox.</span></span>  <br/><br/>  <span data-ttu-id="6e505-328">如果指定 `/<foldername>`，PST 文件中的邮件和文件夹将被导入到名为 *\<foldername\>* 的文件夹中。</span><span class="sxs-lookup"><span data-stu-id="6e505-328">If you specify  `/<foldername>`, items and folders in the PST file are imported to a folder named  *\<foldername\>*  .</span></span> <span data-ttu-id="6e505-329">例如，如果使用 `/ImportedPst`，项目将被导入到名为 **ImportedPst** 的文件夹中。</span><span class="sxs-lookup"><span data-stu-id="6e505-329">For example, if you use  `/ImportedPst`, items would be imported to a folder named **ImportedPst**.</span></span> <span data-ttu-id="6e505-330">此文件夹将位于用户邮箱内，与“收件箱”文件夹属于同一级别。</span><span class="sxs-lookup"><span data-stu-id="6e505-330">This folder will be located in the user's mailbox at the same level as the Inbox folder.</span></span>  <br/><br/> <span data-ttu-id="6e505-331">**提示：** 请考虑运行几个测试批次来试验此参数，以便确定要将 PST 文件导入到的最佳文件夹位置。</span><span class="sxs-lookup"><span data-stu-id="6e505-331">**Tip:** Consider running a few test batches to experiment with this parameter so you can determine the best folder location to import PSTs files to.</span></span>  <br/> |<span data-ttu-id="6e505-332">（保留为空白）</span><span class="sxs-lookup"><span data-stu-id="6e505-332">(leave blank)</span></span>  <br/> <span data-ttu-id="6e505-333">或</span><span class="sxs-lookup"><span data-stu-id="6e505-333">Or</span></span>  <br/>  `/` <br/> <span data-ttu-id="6e505-334">或</span><span class="sxs-lookup"><span data-stu-id="6e505-334">Or</span></span>  <br/>  `/ImportedPst` <br/> |
    | `ContentCodePage` <br/> |<span data-ttu-id="6e505-335">此可选参数指定用于导入 ANSI 文件格式的 PST 文件的代码页的数值。</span><span class="sxs-lookup"><span data-stu-id="6e505-335">This optional parameter specifies a numeric value for the code page to use for importing PST files in the ANSI file format.</span></span> <span data-ttu-id="6e505-336">此参数用于从中国、日本和韩国 (CJK) 组织导入 PST 文件，因为这些语言通常使用双字节字符集 (DBCS) 进行字符编码。</span><span class="sxs-lookup"><span data-stu-id="6e505-336">This parameter is used for importing PST files from Chinese, Japanese, and Korean (CJK) organizations because these languages typically use a double byte character set (DBCS) for character encoding.</span></span> <span data-ttu-id="6e505-337">对于为邮箱文件夹名使用 DBCS 的语言，如果此参数未用于导入 PST 文件，则在导入文件后，这些文件夹名通常会混淆。</span><span class="sxs-lookup"><span data-stu-id="6e505-337">If this parameter isn't used to import PST files for languages that use DBCS for mailbox folder names, the folder names are often garbled after they're imported.</span></span>  <br/><br/> <span data-ttu-id="6e505-338">有关要用于此参数的受支持值的列表，请参阅[代码页标识符](https://go.microsoft.com/fwlink/p/?LinkId=328514)。</span><span class="sxs-lookup"><span data-stu-id="6e505-338">For a list of supported values to use for this parameter, see [Code Page Identifiers](https://go.microsoft.com/fwlink/p/?LinkId=328514).</span></span>  <br/> <br/><span data-ttu-id="6e505-339">**注意：** 如前所述，这是一个可选参数，不一定非要在 CSV 文件中包含该参数。</span><span class="sxs-lookup"><span data-stu-id="6e505-339">**Note:** As previously stated, this is an optional parameter and you don't have to include it in the CSV file.</span></span> <span data-ttu-id="6e505-340">或者，你可以包含该参数，并在一行或多行中将其值留空。</span><span class="sxs-lookup"><span data-stu-id="6e505-340">Or you can include it and leave the value blank for one or more rows.</span></span>  <br/> |<span data-ttu-id="6e505-341">（保留为空白）</span><span class="sxs-lookup"><span data-stu-id="6e505-341">(leave blank)</span></span>  <br/> <span data-ttu-id="6e505-342">或</span><span class="sxs-lookup"><span data-stu-id="6e505-342">Or</span></span>  <br/>  <span data-ttu-id="6e505-343">`932`（这是 ANSI/OEM 日语的代码页标识符）</span><span class="sxs-lookup"><span data-stu-id="6e505-343">`932` (which is the code page identifier for ANSI/OEM Japanese)</span></span>  <br/> |
    | `SPFileContainer` <br/> |<span data-ttu-id="6e505-344">对于 PST 导入，将该参数留空。</span><span class="sxs-lookup"><span data-stu-id="6e505-344">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="6e505-345">不适用</span><span class="sxs-lookup"><span data-stu-id="6e505-345">Not applicable</span></span>  <br/> |
    | `SPManifestContainer` <br/> |<span data-ttu-id="6e505-346">对于 PST 导入，将该参数留空。</span><span class="sxs-lookup"><span data-stu-id="6e505-346">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="6e505-347">不适用</span><span class="sxs-lookup"><span data-stu-id="6e505-347">Not applicable</span></span>  <br/> |
    | `SPSiteUrl` <br/> |<span data-ttu-id="6e505-348">对于 PST 导入，将该参数留空。</span><span class="sxs-lookup"><span data-stu-id="6e505-348">For PST Import, leave this parameter blank.</span></span>  <br/> |<span data-ttu-id="6e505-349">不适用</span><span class="sxs-lookup"><span data-stu-id="6e505-349">Not applicable</span></span>  <br/> |

## <a name="step-5-create-a-pst-import-job"></a><span data-ttu-id="6e505-350">步骤 5：创建 PST 导入作业</span><span class="sxs-lookup"><span data-stu-id="6e505-350">Step 5: Create a PST Import job</span></span>

<span data-ttu-id="6e505-351">下一步是在 Microsoft 365 的导入服务中创建 PST 导入作业。</span><span class="sxs-lookup"><span data-stu-id="6e505-351">The next step is to create the PST Import job in the Import service in Microsoft 365.</span></span> <span data-ttu-id="6e505-352">如前所述，你将提交在步骤 4 中创建的 PST 导入映射文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-352">As previously explained, you submit the PST Import mapping file that you created in Step 4.</span></span> <span data-ttu-id="6e505-353">在你创建作业后，Microsoft 365 将分析 PST 文件中的数据，然后为你提供一个筛选数据的机会，以确定哪些数据可以实际导入到 PST 导入映射文件中指定的邮箱（请参阅[步骤 6](#step-6-filter-data-and-start-the-pst-import-job)）。</span><span class="sxs-lookup"><span data-stu-id="6e505-353">After you create the job, Microsoft 365 analyzes the data in the PST files and then gives you an opportunity to filter the data that actually gets imported to the mailboxes specified in the PST import mapping file (see [Step 6](#step-6-filter-data-and-start-the-pst-import-job)).</span></span>
  
1. <span data-ttu-id="6e505-354">转到 [https://protection.office.com](https://protection.office.com)，然后使用你组织中的管理员帐户的凭据进行登录。</span><span class="sxs-lookup"><span data-stu-id="6e505-354">Go to [https://protection.office.com](https://protection.office.com) and sign in using the credentials for an administrator account in your organization.</span></span> 

2. <span data-ttu-id="6e505-355">在安全性与合规中心的左窗格中，单击 **“信息管理”>“导入”>“导入 PST 文件”**。</span><span class="sxs-lookup"><span data-stu-id="6e505-355">In the left pane of the Security & Compliance Center, click **Information governance > Import > Import PST files**.</span></span>

3. <span data-ttu-id="6e505-356">在“**导入 PST 文件**”页面上，单击 ![添加图标](../media/ITPro-EAC-AddIcon.gif)“**新建导入作业**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-356">On the **Import PST files** page, click ![Add Icon](../media/ITPro-EAC-AddIcon.gif) **New import job**.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6e505-357">必须分配有相应的权限，才能访问安全与合规中心中的“**导入**”页来创建导入作业。</span><span class="sxs-lookup"><span data-stu-id="6e505-357">You have to be assigned the appropriate permissions to access the **Import** page in the Security & Compliance Center to create an import job.</span></span> <span data-ttu-id="6e505-358">有关更多详细信息，请参阅“**准备工作**”部分。</span><span class="sxs-lookup"><span data-stu-id="6e505-358">See the **Before you begin** section for more information.</span></span> 

4. <span data-ttu-id="6e505-359">为 PST 导入作业键入一个名称，然后单击“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-359">Type a name for the PST import job, and then click **Next**.</span></span> <span data-ttu-id="6e505-360">请使用小写字母、数字、连字符和下划线。</span><span class="sxs-lookup"><span data-stu-id="6e505-360">Use lowercase letters, numbers, hyphens, and underscores.</span></span> <span data-ttu-id="6e505-361">无法在名称中使用大写字母或包含空格。</span><span class="sxs-lookup"><span data-stu-id="6e505-361">You can't use uppercase letters or include spaces in the name.</span></span>

5. <span data-ttu-id="6e505-362">在“**你想要上载或发送数据?**”页面上，单击“**上传你的数据**”，然后单击“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-362">On the **Do you want to upload or ship data?** page, click **Upload your data** and then click **Next**.</span></span>

    ![单击“上传你的数据”以创建网络上载导入作业](../media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. <span data-ttu-id="6e505-364">在步骤 4 的“**导入数据**”页面上，单击“**我已完成上载我的文件**”和“**我有权访问该映射文件**”复选框，然后单击“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-364">In step 4 on the **Import data** page, click the **I'm done uploading my files** and **I have access to the mapping file** check boxes, and then click **Next**.</span></span>

    ![单击步骤 4 中的两个复选框](../media/9f2427e8-3af2-4e27-95e6-a9f08430d3d8.png)
  
7. <span data-ttu-id="6e505-366">在“**选择映射文件**”页面上，单击“**选择映射文件**”以提交在步骤 4 中创建的 CSV 映射文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-366">On the **Select the mapping file** page, click **Select mapping file** to submit the CSV mapping file that you created in Step 4.</span></span> 

    ![单击“选择映射文件”以提交为导入作业创建的 CSV 文件](../media/d30b1d73-80bb-491e-a642-a21673d06889.png)
  
8. <span data-ttu-id="6e505-368">CSV 文件的名称出现在“**映射文件名**”之下后，单击“**验证**”来检查 CSV 文件是否有错误。</span><span class="sxs-lookup"><span data-stu-id="6e505-368">After the name of the CSV file appears under **Mapping file name**, click **Validate** to check your CSV file for errors.</span></span> 

    ![单击“验证”来检查 CSV 文件是否有错误](../media/4680999d-5538-4059-b878-2736a5445037.png)
  
    <span data-ttu-id="6e505-370">CSV 文件必须经过成功验证才能创建 PST 导入作业。</span><span class="sxs-lookup"><span data-stu-id="6e505-370">The CSV file has to be successfully validated to create a PST Import job.</span></span> <span data-ttu-id="6e505-371">文件名在成功验证后会更改为绿色。</span><span class="sxs-lookup"><span data-stu-id="6e505-371">The file name is changed to green after it's successfully validated.</span></span> <span data-ttu-id="6e505-372">如果验证失败，请单击“查看日志”\*\*\*\* 链接。</span><span class="sxs-lookup"><span data-stu-id="6e505-372">If the validation fails, click the **View log** link.</span></span> <span data-ttu-id="6e505-373">系统将打开一个验证错误报告，显示文件中失败的每一行所对应的错误消息。</span><span class="sxs-lookup"><span data-stu-id="6e505-373">A validation error report is opened, with an error message for each row in the file that failed.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6e505-374">如前所述，映射文件最多可包含 500 行。</span><span class="sxs-lookup"><span data-stu-id="6e505-374">As previously explained, a mapping file can have a maximum of 500 rows.</span></span> <span data-ttu-id="6e505-375">如果映射文件包含的行数超过 500，验证将失败。</span><span class="sxs-lookup"><span data-stu-id="6e505-375">Validation will fail if the mapping file contains more than 500 rows.</span></span> <span data-ttu-id="6e505-376">若要导入超过 500 行的 PST 文件，必须创建多个映射文件和多个导入作业。</span><span class="sxs-lookup"><span data-stu-id="6e505-376">To import more than 500 PST files, you'll have to create multiple mapping files and multiple import jobs.</span></span>

9. <span data-ttu-id="6e505-377">成功验证 PST 映射文件后，请阅读条款和条件文档，然后单击相应的复选框。</span><span class="sxs-lookup"><span data-stu-id="6e505-377">After the mapping file is successfully validated, read the terms and conditions document, and then click the checkbox.</span></span>

10. <span data-ttu-id="6e505-378">单击“**保存**”来提交作业，然后在成功创建作业后单击“**关闭**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-378">Click **Save** to submit the job, and then click **Close** after the job is successfully created.</span></span> 

    <span data-ttu-id="6e505-379">系统将显示一个状态浮出页面，其中状态为“**正在分析**”，新导入作业将显示在“**导入 PST 文件**”页面上的列表中。</span><span class="sxs-lookup"><span data-stu-id="6e505-379">A status flyout page is displayed, with a status of **Analysis in progress** and the new import job is displayed in the list on the **Import PST files** page.</span></span> 

11. <span data-ttu-id="6e505-380">单击“**刷新**”![刷新图标](../media/O365-MDM-Policy-RefreshIcon.gif) 以更新“**状态**”列中显示的状态信息。</span><span class="sxs-lookup"><span data-stu-id="6e505-380">Click **Refresh** ![Refresh icon](../media/O365-MDM-Policy-RefreshIcon.gif) to update the status information that's displayed in the **Status** column.</span></span> <span data-ttu-id="6e505-381">当分析完成且数据准备就绪可供导入时，状态将更改为“**分析已完成**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-381">When the analysis is complete and the data is ready to be imported, the status is changed to **Analysis completed**.</span></span>

    <span data-ttu-id="6e505-382">可以单击导入作业以显示状态浮出页面，其中包含有关导入作业的更多详细信息，例如映射文件中列出的每个 PST 文件的状态。</span><span class="sxs-lookup"><span data-stu-id="6e505-382">You can click the import job to display the status flyout page, which contains more detailed information about the import job such as the status of each PST file listed in the mapping file.</span></span>
 
## <a name="step-6-filter-data-and-start-the-pst-import-job"></a><span data-ttu-id="6e505-383">步骤 6：筛选数据并启动 PST 导入作业</span><span class="sxs-lookup"><span data-stu-id="6e505-383">Step 6: Filter data and start the PST Import job</span></span>

<span data-ttu-id="6e505-384">当你在步骤 5 中创建导入作业后，Microsoft 365 将通过确定项目的存在时长以及 PST 文件中所含的不同邮件类型来分析 PST 文件中的数据（以安全的方式）。</span><span class="sxs-lookup"><span data-stu-id="6e505-384">After you create the import job in Step 5, Microsoft 365 analyzes the data in the PST files (in a safe and secure manner) by identifying the age of the items and the different message types included in the PST files.</span></span> <span data-ttu-id="6e505-385">分析完成且数据准备就绪可供导入后，你可以选择导入 PST 文件中包含的所有数据，或者通过设置用于控制可导入哪些数据的筛选器来减少导入的数据。</span><span class="sxs-lookup"><span data-stu-id="6e505-385">When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>
  
1. <span data-ttu-id="6e505-386">在安全与合规中心的“**导入 PST 文件**”页面上，单击在步骤 5 中创建的导入作业所对应的“**已准备好导入到 Office 365**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-386">On the **Import PST files** page in the Security & Compliance Center, click **Ready to import to Office 365** for the import job that you created in Step 5.</span></span> 
    
    ![单击你创建的导入作业旁边的“已准备好导入到 Microsoft 365”](../media/5760aac3-300b-4e31-b894-253c42a4b82b.png)
  
    <span data-ttu-id="6e505-388">系统将显示一个浮出页面，其中包含有关 PST 文件的信息和有关导入作业的其他信息。</span><span class="sxs-lookup"><span data-stu-id="6e505-388">A fly out page is displayed with information about the PST files and other information about the import job.</span></span>
    
2. <span data-ttu-id="6e505-389">在浮出页面上，单击“**导入到 Office 365**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-389">On the flyout page, click **Import to Office 365**.</span></span>
    
    <span data-ttu-id="6e505-390">系统将显示“**筛选数据**”页面。</span><span class="sxs-lookup"><span data-stu-id="6e505-390">The **Filter your data** page is displayed.</span></span> <span data-ttu-id="6e505-391">该页面包含通过 Office 365 对 PST 文件进行的分析得出的数据洞察，其中包括有关数据存在时长的信息。</span><span class="sxs-lookup"><span data-stu-id="6e505-391">It contains the data insights resulting from the analysis performed on the PST files by Office 365, including information about the age of the data.</span></span> <span data-ttu-id="6e505-392">此时，你可以选择筛选将要导入的数据或按原样导入所有数据。</span><span class="sxs-lookup"><span data-stu-id="6e505-392">At this point, you have the option to filter the data that will be imported or import all the data as is.</span></span> 
    
    ![你可以对 PST 文件中的数据进行缩减或导入所有数据](../media/287fc030-99e9-417b-ace7-f64617ea5d4e.png)
  
3. <span data-ttu-id="6e505-394">执行下列操作之一：</span><span class="sxs-lookup"><span data-stu-id="6e505-394">Do one of the following:</span></span>
    
   1. <span data-ttu-id="6e505-395">若要缩减导入的数据，请单击“**是，我想在导入前将其筛选**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-395">To trim the data that you import, click **Yes, I want to filter it before importing**.</span></span>
    
      <span data-ttu-id="6e505-396">有关筛选 PST 文件中的数据然后启动导入作业的详细分步说明，请参阅[在将 PST 文件导入到 Office 365 时筛选数据](filter-data-when-importing-pst-files.md)。</span><span class="sxs-lookup"><span data-stu-id="6e505-396">For detailed step-by-step instructions about filtering the data in the PST files and then starting the import job, see [Filter data when importing PST files to Office 365](filter-data-when-importing-pst-files.md).</span></span>
    
      <span data-ttu-id="6e505-397">或</span><span class="sxs-lookup"><span data-stu-id="6e505-397">Or</span></span>
    
   1. <span data-ttu-id="6e505-398">若要导入 PST 文件中的所有数据，请单击“**不，我想要导入所有内容**”，然后单击“**下一步**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-398">To import all data in the PST files, click **No, I want to import everything,** and click **Next**.</span></span>
    
4. <span data-ttu-id="6e505-399">如果你选择导入所有数据，请单击“**导入数据**”来启动导入作业。</span><span class="sxs-lookup"><span data-stu-id="6e505-399">If you chose to import all the data, click **Import data** to start the import job.</span></span> 
    
   <span data-ttu-id="6e505-400">导入作业的状态将显示在“**导入 PST 文件**”页面上。</span><span class="sxs-lookup"><span data-stu-id="6e505-400">The status of the import job is display on the **Import PST files** page.</span></span> <span data-ttu-id="6e505-401">单击 ![刷新图标](../media/O365-MDM-Policy-RefreshIcon.gif)“**刷新**”以更新“**状态**”列中显示的状态信息。</span><span class="sxs-lookup"><span data-stu-id="6e505-401">Click ![Refresh icon](../media/O365-MDM-Policy-RefreshIcon.gif) **Refresh** to update the status information that's displayed in the **Status** column.</span></span> <span data-ttu-id="6e505-402">单击导入作业以显示状态浮出页面，该页面将显示正在导入的每个 PST 文件的状态信息。</span><span class="sxs-lookup"><span data-stu-id="6e505-402">Click the import job to display the status flyout page, which displays status information about each PST file being imported.</span></span> 


  
## <a name="more-information"></a><span data-ttu-id="6e505-403">更多信息</span><span class="sxs-lookup"><span data-stu-id="6e505-403">More information</span></span>

- <span data-ttu-id="6e505-404">为什么要将 PST 文件导入到 Microsoft 365？</span><span class="sxs-lookup"><span data-stu-id="6e505-404">Why import PST files to Microsoft 365?</span></span>
    
  - <span data-ttu-id="6e505-405">这是将组织的存档邮件数据导入到 Microsoft 365 的好方法。</span><span class="sxs-lookup"><span data-stu-id="6e505-405">It's a good way to import your organization's archival messaging data to Microsoft 365.</span></span>
    
  - <span data-ttu-id="6e505-406">用户在任意设备上都可以使用数据，因为数据存储在云中。</span><span class="sxs-lookup"><span data-stu-id="6e505-406">The data is available to the user from all devices because it's stored in the cloud.</span></span>
    
  - <span data-ttu-id="6e505-407">它允许你将 Microsoft 365 合规性功能应用于你导入的 PST 文件中的数据，从而帮助满足你组织的合规性需求。</span><span class="sxs-lookup"><span data-stu-id="6e505-407">It helps address compliance needs of your organization by letting you apply Microsoft 365 compliance features to the data from the PST files that you imported.</span></span> <span data-ttu-id="6e505-408">这包括：</span><span class="sxs-lookup"><span data-stu-id="6e505-408">This includes:</span></span>
    
  - <span data-ttu-id="6e505-409">启用[存档邮箱](enable-archive-mailboxes.md)和[自动展开存档](enable-unlimited-archiving.md)，从而向用户提供额外的邮箱存储空间来存储你导入的数据。</span><span class="sxs-lookup"><span data-stu-id="6e505-409">Enabling [archive mailboxes](enable-archive-mailboxes.md) and [auto-expanding archiving](enable-unlimited-archiving.md) to give users additional mailbox storage space to store the data that you imported.</span></span> 
    
  - <span data-ttu-id="6e505-410">使邮箱处于“[诉讼保留](https://go.microsoft.com/fwlink/?linkid=856286)”状态以保留导入的数据。</span><span class="sxs-lookup"><span data-stu-id="6e505-410">Placing mailboxes on [Litigation Hold](https://go.microsoft.com/fwlink/?linkid=856286) to retain the data that you imported.</span></span> 
    
  - <span data-ttu-id="6e505-411">使用 Microsoft [电子数据展示工具](search-for-content.md)搜索你导入的数据。</span><span class="sxs-lookup"><span data-stu-id="6e505-411">Using Microsoft [eDiscovery tools](search-for-content.md) to search the data that you imported.</span></span> 
    
  - <span data-ttu-id="6e505-412">使用 [Microsoft 365 保留策略](retention.md)来控制导入数据的保留时间，以及在保留期到期后要执行的操作。</span><span class="sxs-lookup"><span data-stu-id="6e505-412">Using [Microsoft 365 retention policies](retention.md) to control how long the data that you imported will be retained, and what action to take after the retention period expires.</span></span> 
    
  - <span data-ttu-id="6e505-413">在[审核日志](search-the-audit-log-in-security-and-compliance.md)中搜索影响你导入的数据的邮箱相关事件。</span><span class="sxs-lookup"><span data-stu-id="6e505-413">Searching the [audit log](search-the-audit-log-in-security-and-compliance.md) for mailbox-related events that affect the data that you imported.</span></span> 
    
  - <span data-ttu-id="6e505-414">将数据导入到[非活动邮箱](create-and-manage-inactive-mailboxes.md)，以出于合规目的对数据进行存档。</span><span class="sxs-lookup"><span data-stu-id="6e505-414">Importing data to [inactive mailboxes](create-and-manage-inactive-mailboxes.md) to archive data for compliance purposes.</span></span> 
    
  - <span data-ttu-id="6e505-415">使用[数据丢失防护策略](data-loss-prevention-policies.md)来防止敏感数据被泄露到组织外部。</span><span class="sxs-lookup"><span data-stu-id="6e505-415">Using [data loss prevention policies](data-loss-prevention-policies.md) to prevent sensitive data from leaking outside your organization.</span></span> 
  
- <span data-ttu-id="6e505-416">下面是在步骤 1 中获得的共享访问签名 (SAS) URL 示例。</span><span class="sxs-lookup"><span data-stu-id="6e505-416">Here's an example of the Shared Access Signature (SAS) URL that's obtained in Step 1.</span></span> <span data-ttu-id="6e505-417">此示例还包含你在 AzCopy.exe 工具中运行的命令语法 - 用于上传 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-417">This example also contains the syntax for the command that you run in the AzCopy.exe tool to upload PST files.</span></span> <span data-ttu-id="6e505-418">请务必采取预防措施来保护 SAS URL，就像保护密码或其他与安全相关的信息一样。</span><span class="sxs-lookup"><span data-stu-id="6e505-418">Be sure to take precautions to protect the SAS URL just like you would protect passwords or other security-related information.</span></span>

    ```console
    SAS URL: https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D

    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y

    EXAMPLES

    This example uploads PST files to the root of the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    
    This example uploads PST files to a subfolder named PSTFiles  in the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    ```

- <span data-ttu-id="6e505-419">如前所述，在 PST 文件导入到邮箱之后，Office 365 导入服务将启用保留挂起设置（对于无限期）。</span><span class="sxs-lookup"><span data-stu-id="6e505-419">As previously explained, the Office 365 Import service turns on the retention hold setting (for an indefinite duration) after PST files are imported to a mailbox.</span></span> <span data-ttu-id="6e505-420">这意味着 *RetentionHoldEnabled* 属性设置为 **True**，因此不会处理分配给该邮箱的保留策略。</span><span class="sxs-lookup"><span data-stu-id="6e505-420">This means the  *RetentionHoldEnabled*  property is set to  **True** so that the retention policy assigned to the mailbox won't be processed.</span></span> <span data-ttu-id="6e505-421">这样可以防止某条删除或存档策略将旧邮件删除或存档，让邮箱所有者有时间管理新导入的邮件。</span><span class="sxs-lookup"><span data-stu-id="6e505-421">This gives the mailbox owner time to manage the newly imported messages by preventing a deletion or archive policy from deleting or archiving older messages.</span></span> <span data-ttu-id="6e505-422">可采用以下步骤来管理此保留挂起：</span><span class="sxs-lookup"><span data-stu-id="6e505-422">Here are some steps you can take to manage this retention hold:</span></span> 
    
    - <span data-ttu-id="6e505-423">一段时间后，可通过运行 **Set-Mailbox -RetentionHoldEnabled $false** 命令来关闭保留挂起。</span><span class="sxs-lookup"><span data-stu-id="6e505-423">After a certain time, you can turn off the retention hold by running the **Set-Mailbox -RetentionHoldEnabled $false** command.</span></span> <span data-ttu-id="6e505-424">有关说明，请参阅[将邮箱置于保留挂起](https://go.microsoft.com/fwlink/p/?LinkId=544749)。</span><span class="sxs-lookup"><span data-stu-id="6e505-424">For instructions, see [Place a mailbox on retention hold](https://go.microsoft.com/fwlink/p/?LinkId=544749).</span></span>
    
   - <span data-ttu-id="6e505-425">可配置保留挂起，使其在将来某一天关闭。</span><span class="sxs-lookup"><span data-stu-id="6e505-425">You can configure the retention hold so that it's turned off on some date in the future.</span></span> <span data-ttu-id="6e505-426">运行 **Set-Mailbox -EndDateForRetentionHold *date*** 命令即可实现此目的。</span><span class="sxs-lookup"><span data-stu-id="6e505-426">You do this by running the **Set-Mailbox -EndDateForRetentionHold *date*** command.</span></span> <span data-ttu-id="6e505-427">例如，假设当前日期为 2016 年 6 月 1 日，并希望在 30 天后关闭保留挂起，则可运行以下命令：**Set-Mailbox -EndDateForRetentionHold 7/1/2016**。</span><span class="sxs-lookup"><span data-stu-id="6e505-427">For example, assuming that today's date is June 1, 2016 and you want the retention hold turned off in 30 days, you would run the following command:  **Set-Mailbox -EndDateForRetentionHold 7/1/2016**.</span></span> <span data-ttu-id="6e505-428">在这种情况下，需要将 **RetentionHoldEnabled** 属性设置为 *True*。</span><span class="sxs-lookup"><span data-stu-id="6e505-428">In this scenario, you would leave the  **RetentionHoldEnabled**  property set to  *True*.</span></span> <span data-ttu-id="6e505-429">有关详细信息，请参阅 [Set-Mailbox](https://go.microsoft.com/fwlink/p/?LinkId=150317)。</span><span class="sxs-lookup"><span data-stu-id="6e505-429">For more information, see [Set-Mailbox](https://go.microsoft.com/fwlink/p/?LinkId=150317).</span></span>
    
   - <span data-ttu-id="6e505-430">可更改分配给邮箱的保留策略的设置，使导入的旧项目不会立即被删除或移到用户的存档邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-430">You can change the settings for the retention policy that's assigned to the mailbox so that older items that were imported won't be immediately deleted or moved to the user's archive mailbox.</span></span> <span data-ttu-id="6e505-431">例如，可以延长分配给邮箱的删除或存档策略的保留期。</span><span class="sxs-lookup"><span data-stu-id="6e505-431">For example, you could lengthen the retention age for a deletion or archive policy that's assigned to the mailbox.</span></span> <span data-ttu-id="6e505-432">在这种情况下，需要在更改保留策略的设置后关闭邮箱的保留挂起。</span><span class="sxs-lookup"><span data-stu-id="6e505-432">In this scenario, you would turn off the retention hold on the mailbox after you changed the settings of the retention policy.</span></span> <span data-ttu-id="6e505-433">有关详细信息，请参阅[为组织中的邮箱设置存档和删除策略](set-up-an-archive-and-deletion-policy-for-mailboxes.md)。</span><span class="sxs-lookup"><span data-stu-id="6e505-433">For more information, see [Set up an archive and deletion policy for mailboxes in your organization](set-up-an-archive-and-deletion-policy-for-mailboxes.md).</span></span>

### <a name="how-the-import-process-works"></a><span data-ttu-id="6e505-434">导入过程的工作原理</span><span class="sxs-lookup"><span data-stu-id="6e505-434">How the import process works</span></span>
  
<span data-ttu-id="6e505-435">你可以使用网络上载选项和 Office 365 导入服务将 PST 文件批量导入到用户邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-435">You can use the network upload option and the Office 365 Import service to bulk-import PST files to user mailboxes.</span></span> <span data-ttu-id="6e505-436">网络上载意味着你在 Microsoft 云中的临时存储区域上载 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-436">Network upload means that you upload the PST files a temporary storage area in the Microsoft cloud.</span></span> <span data-ttu-id="6e505-437">然后，Office 365 导入服务将 PST 文件从存储区域复制到目标用户邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-437">Then the Office 365 Import service copies the PST files from the storage area to the target user mailboxes.</span></span>
  
<span data-ttu-id="6e505-438">下面是向 Office 365 中的邮箱导入 PST 文件的网络上载过程的图示和说明。</span><span class="sxs-lookup"><span data-stu-id="6e505-438">Here's an illustration and description of the network upload process to import PST files to mailboxes in Office 365.</span></span>
  
![将 PST 文件导入到 Office 365 的网络上传过程的工作流](../media/9e05a19e-1e7a-4f1f-82df-9118f51588c4.png)
  
1. <span data-ttu-id="6e505-440">**将 PST 导入工具和密钥下载到专用 Azure 存储位置：** 第一步是下载用于将 PST 文件上传到 Microsoft 云中的 Azure 存储位置的 AzCopy 命令行工具和访问密钥。</span><span class="sxs-lookup"><span data-stu-id="6e505-440">**Download the PST import tool and key to private Azure Storage location:** The first step is to download the AzCopy command-line tool and an access key used to upload the PST files to an Azure Storage location in the Microsoft cloud.</span></span> <span data-ttu-id="6e505-441">需要从安全与合规中心的“导入”\*\*\*\* 页获取工具和密钥。</span><span class="sxs-lookup"><span data-stu-id="6e505-441">You obtain these from the **Import** page in the Security & Compliance Center.</span></span> <span data-ttu-id="6e505-442">密钥（称为安全访问签名 (SAS) 密钥）为你提供将 PST 文件上传到专用的安全 Azure 存储位置所需的权限。</span><span class="sxs-lookup"><span data-stu-id="6e505-442">The key (called a secure access signature (SAS) key, provides you with the necessary permissions to upload PST files to a private and secure Azure Storage location.</span></span> <span data-ttu-id="6e505-443">此访问密钥对组织是唯一的，有助于防止在 PST 文件上传至 Microsoft 云之后对其进行未经授权的访问。</span><span class="sxs-lookup"><span data-stu-id="6e505-443">This access key is unique to your organization and helps prevent unauthorized access to your PST files after they're uploaded to the Microsoft cloud.</span></span> <span data-ttu-id="6e505-444">导入 PST 文件不需要你的组织拥有单独的 Azure 订阅。</span><span class="sxs-lookup"><span data-stu-id="6e505-444">Importing PST files doesn't require your organization to have a separate Azure subscription.</span></span> 
    
2. <span data-ttu-id="6e505-445">**将 PST 文件上传到 Azure 存储位置：** 下一步是使用 AzCopy.exe 工具（已在步骤 1 中下载）将 PST 文件上传并存储到 Azure 存储位置，该存储位置位于你组织所在的区域 Microsoft 数据中心。</span><span class="sxs-lookup"><span data-stu-id="6e505-445">**Upload the PST files to the Azure Storage location:** The next step is to use the AzCopy.exe tool (downloaded in step 1) to upload and store your PST files in an Azure Storage location that resides in the same regional Microsoft datacenter where your organization is located.</span></span> <span data-ttu-id="6e505-446">若要上传，要导入的 PST 文件必须位于组织的文件共享或文件服务器上。</span><span class="sxs-lookup"><span data-stu-id="6e505-446">To upload them, the PST files that you want to import have to be located in a file share or file server in your organization.</span></span>
    
    <span data-ttu-id="6e505-447">在将 PST 文件上传到 Azure 存储位置之后，可以执行一个可选步骤来查看这些文件的列表。</span><span class="sxs-lookup"><span data-stu-id="6e505-447">There's an optional step that you can perform to view the list of PST files after they're uploaded to the Azure Storage location.</span></span>
    
3. <span data-ttu-id="6e505-448">**创建 PST 导入映射文件：** 将 PST 文件上传到 Azure 存储位置后，下一步是创建逗号分隔值 (CSV) 文件，用于指定要将 PST 文件导入到哪些用户邮箱，请注意，PST 文件可导入到用户的主邮箱或其存档邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-448">**Create a PST import mapping file:** After the PST files have been uploaded to the Azure Storage location, the next step is to create a comma-separated value (CSV) file that specifies which user mailboxes the PST files will be imported to, note that a PST file can be imported to a user's primary mailbox or their archive mailbox.</span></span> <span data-ttu-id="6e505-449">Office 365 导入服务将使用 CSV 文件中的信息来导入 PST 文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-449">The Office 365 Import service uses the information in the CSV file to import the PST files.</span></span>
    
4. <span data-ttu-id="6e505-450">**创建 PST 导入作业：** 下一步是在安全与合规中心的“**导入 PST 文件**”页上创建 PST 导入作业并提交在上一步骤创建的 PST 导入映射文件。</span><span class="sxs-lookup"><span data-stu-id="6e505-450">**Create a PST import job:** The next step is to create a PST import job on the **Import PST files** page in the Security & Compliance Center and submit the PST import mapping file created in the previous step.</span></span> <span data-ttu-id="6e505-451">在你创建导入作业后，Microsoft 365 将分析 PST 文件中的数据，然后为你提供设置筛选器的机会，以便控制哪些数据可以实际导入到 PST 导入映射文件中指定的邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-451">After you create the import job, Microsoft 365 analyzes the data in the PST files and then gives you an opportunity to set filters that control what data actually gets imported to the mailboxes specified in the PST import mapping file.</span></span> 
    
5. <span data-ttu-id="6e505-452">**筛选将要导入到邮箱的 PST 数据：** 创建并启动导入作业之后，Microsoft 365 将通过确定项目的存在时长以及 PST 文件中所含的不同邮件类型来分析 PST 文件中的数据（以安全的方式）。</span><span class="sxs-lookup"><span data-stu-id="6e505-452">**Filter the PST data that will be imported to mailboxes:** After the import job is created and started, Microsoft 365 analyzes the data in the PST files (safely and securely) by identifying the age of the items and the different message types included in the PST files.</span></span> <span data-ttu-id="6e505-453">分析完成且数据准备就绪可供导入后，你可以选择导入 PST 文件中包含的所有数据，或者通过设置用于控制可导入哪些数据的筛选器来减少导入的数据。</span><span class="sxs-lookup"><span data-stu-id="6e505-453">When the analysis is completed and the data is ready to import, you have the option to import all the data contained in the PST files or you can trim the data that's imported by setting filters that control what data gets imported.</span></span>
    
6. <span data-ttu-id="6e505-454">**启动 PST 导入作业** - 启动导入作业后，Microsoft 365 使用 PST 导入映射文件中的信息将 PST 文件从 Azure 存储位置导入到用户邮箱。</span><span class="sxs-lookup"><span data-stu-id="6e505-454">**Start the PST import job:** After the import job is started, Microsoft 365 uses the information in the PST import mapping file to import the PSTs files from the Azure Storage location to user mailboxes.</span></span> <span data-ttu-id="6e505-455">与导入作业相关的状态信息（包括与每个导入的 PST 文件相关的信息）将显示在安全与合规中心的“**导入 PST 文件**”页。</span><span class="sxs-lookup"><span data-stu-id="6e505-455">Status information about the import job (including information about each PST file being imported) is displayed on the **Import PST files** page in the Security & Compliance Center.</span></span> <span data-ttu-id="6e505-456">导入作业完成后，作业的状态将设置为“**完成**”。</span><span class="sxs-lookup"><span data-stu-id="6e505-456">When the import job is finished, the status for the job is set to **Complete**.</span></span>
