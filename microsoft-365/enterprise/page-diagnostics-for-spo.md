---
title: 使用 SharePoint Online 的页面诊断工具
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 06/03/2020
audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.collection:
- Ent_O365
- SPO_Content
search.appverid:
- MET150
- SPO160
- MOE150
- BSA160
f1.keywords:
- NOCSH
description: 使用 SharePoint 工具的页面诊断工具，针对预定义的一组性能条件对 SharePoint Online 新式门户和经典发布页面进行分析。
ms.openlocfilehash: 2598f2a8c7801a762133c93761d2910a220dc194
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/14/2020
ms.locfileid: "46695491"
---
# <a name="use-the-page-diagnostics-for-sharepoint-tool"></a><span data-ttu-id="7f887-103">使用 "网页诊断程序" SharePoint 工具</span><span class="sxs-lookup"><span data-stu-id="7f887-103">Use the Page Diagnostics for SharePoint tool</span></span>

<span data-ttu-id="7f887-104">本文介绍如何使用 **sharepoint 工具的页面诊断工具** 根据预定义的一组性能条件分析 sharepoint Online 新式和经典网站页面。</span><span class="sxs-lookup"><span data-stu-id="7f887-104">This article describes how to use the **Page Diagnostics for SharePoint tool** to analyze SharePoint Online modern and classic site pages against a pre-defined set of performance criteria.</span></span>

<span data-ttu-id="7f887-105">可以为安装 SharePoint 工具的页面诊断工具：</span><span class="sxs-lookup"><span data-stu-id="7f887-105">The Page Diagnostics for SharePoint tool can be installed for:</span></span>

- <span data-ttu-id="7f887-106">**Microsoft edge** [ (边缘扩展) ](https://microsoftedge.microsoft.com/addons/detail/ocemkolpnamjcacndljdfmhlpcaoipji)</span><span class="sxs-lookup"><span data-stu-id="7f887-106">**Microsoft Edge** [(Edge extension)](https://microsoftedge.microsoft.com/addons/detail/ocemkolpnamjcacndljdfmhlpcaoipji)</span></span>
- <span data-ttu-id="7f887-107">**Chrome** [ (chrome extension) ](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi)</span><span class="sxs-lookup"><span data-stu-id="7f887-107">**Chrome** [(Chrome extension)](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi)</span></span>

>[!TIP]
><span data-ttu-id="7f887-108">版本 **2.0.0** 和更高版本包括对新式页面以及经典网站页面的支持。</span><span class="sxs-lookup"><span data-stu-id="7f887-108">Version **2.0.0** and later includes support for modern pages in addition to classic site pages.</span></span> <span data-ttu-id="7f887-109">如果您不确定使用的是哪个版本的工具，则可以选择 " **关于** " 链接或 "省略号 ( ..." ) 验证您的版本。</span><span class="sxs-lookup"><span data-stu-id="7f887-109">If you are unsure which version of the tool you are using, you can select the **About** link or the ellipses (...) to verify your version.</span></span> <span data-ttu-id="7f887-110">使用工具时 **，请始终更新到最新版本**。</span><span class="sxs-lookup"><span data-stu-id="7f887-110">**Always update to the latest version** when using the tool.</span></span>

<span data-ttu-id="7f887-111">适用于 SharePoint 的页面诊断工具是一款面向新 Microsoft Edge（https://www.microsoft.com/edge) 和 Chrome 浏览器）的浏览器扩展，可用于分析 SharePoint Online 新式门户和经典发布网站页面。</span><span class="sxs-lookup"><span data-stu-id="7f887-111">The Page Diagnostics for SharePoint tool is a browser extension for the new Microsoft Edge (https://www.microsoft.com/edge) and Chrome browsers that analyzes both SharePoint Online modern portal and classic publishing site pages.</span></span> <span data-ttu-id="7f887-112">此工具仅适用于 SharePoint Online，不能用于 SharePoint 系统页面。</span><span class="sxs-lookup"><span data-stu-id="7f887-112">This tool only works for SharePoint Online, and cannot be used on a SharePoint system page.</span></span>

<span data-ttu-id="7f887-113">该工具为每个分析页面生成一个报告，该页面显示页面如何针对预定义的规则集执行，并在测试的结果超出比较基准值时显示详细信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-113">The tool generates a report for each analyzed page showing how the page performs against a pre-defined set of rules and displays detailed information when results for a test fall outside the baseline value.</span></span> <span data-ttu-id="7f887-114">SharePoint Online 管理员和设计人员可以使用该工具解决性能问题，并确保新页面在发布之前进行了优化。</span><span class="sxs-lookup"><span data-stu-id="7f887-114">SharePoint Online administrators and designers can use the tool to troubleshoot performance issues and to ensure that new pages are optimized prior to publishing.</span></span>

<span data-ttu-id="7f887-115">页面诊断工具专门用于分析 SharePoint 网站页面，而不是系统页面，如 *allitems.aspx* 或 *default.aspx*。</span><span class="sxs-lookup"><span data-stu-id="7f887-115">The Page Diagnostics tool is designed to analyze SharePoint site pages only, not system pages such as *allitems.aspx* or *sharepoint.aspx*.</span></span> <span data-ttu-id="7f887-116">如果尝试在系统页面或任何其他非网站页面上运行该工具，则会收到一条错误消息，提示该工具不能针对该类型的页面运行。</span><span class="sxs-lookup"><span data-stu-id="7f887-116">If you attempt to run the tool on a system page or any other non-site page, you will receive an error message advising that the tool cannot be run for that type of page.</span></span>

![必须在 SharePoint 页面上运行](../media/page-diagnostics-for-spo/pagediag-Error-StartPage.png)

<span data-ttu-id="7f887-118">这不是工具中的错误，因为评估库或系统页面时没有任何价值。</span><span class="sxs-lookup"><span data-stu-id="7f887-118">This is not an error in the tool as there is no value in assessing libraries or system pages.</span></span> <span data-ttu-id="7f887-119">请导航到 SharePoint 网站页面以使用该工具。</span><span class="sxs-lookup"><span data-stu-id="7f887-119">Please navigate to a SharePoint site page to use the tool.</span></span> <span data-ttu-id="7f887-120">如果此错误发生在 SharePoint 页面上，请检查母版页以确保尚未删除 SharePoint metatags。</span><span class="sxs-lookup"><span data-stu-id="7f887-120">If this error occurs on a SharePoint page, please check the master page to ensure that the SharePoint metatags have not been removed.</span></span>

<span data-ttu-id="7f887-121">若要提供有关该工具的反馈，请选择该工具右上角的省略号，然后选择 " [提供反馈](https://go.microsoft.com/fwlink/?linkid=874109)"。</span><span class="sxs-lookup"><span data-stu-id="7f887-121">To provide feedback about the tool, select the ellipsis at the top right corner of the tool and then select [Give feedback](https://go.microsoft.com/fwlink/?linkid=874109).</span></span>

![提供反馈](../media/page-diagnostics-for-spo/pagediag-feedback.png)
  
## <a name="install-the-page-diagnostics-for-sharepoint-tool"></a><span data-ttu-id="7f887-123">安装用于 SharePoint 工具的页面诊断程序</span><span class="sxs-lookup"><span data-stu-id="7f887-123">Install the Page Diagnostics for SharePoint tool</span></span>

<span data-ttu-id="7f887-124">本节中的安装过程将适用于 Chrome 和 Microsoft Edge 浏览器。</span><span class="sxs-lookup"><span data-stu-id="7f887-124">The installation procedure in this section will work for both the Chrome and Microsoft Edge browsers.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7f887-125">Microsoft 不会读取由 SharePoint 工具的页面诊断功能分析的数据或页面内容，我们不会捕获任何个人信息、网站或下载信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-125">Microsoft does not read data or page content that is analyzed by the Page Diagnostics for SharePoint tool, and we do not capture any personal information, website or download information.</span></span> <span data-ttu-id="7f887-126">该工具仅记录到 Microsoft 的可识别信息是租户名称、失败的规则数以及运行该工具的日期和时间。</span><span class="sxs-lookup"><span data-stu-id="7f887-126">The only identifiable information logged to Microsoft by the tool is the tenant name, counts of rules that have failed and the date and time the tool was run.</span></span> <span data-ttu-id="7f887-127">Microsoft 使用此信息来更好地了解新式门户和发布网站使用率趋势和常见性能问题。</span><span class="sxs-lookup"><span data-stu-id="7f887-127">This information is used by Microsoft to better understand modern portal and publishing site usage trends and common performance issues.</span></span>

1. <span data-ttu-id="7f887-128">安装适用于 **Microsoft edge** [ (edge 扩展) ](https://microsoftedge.microsoft.com/addons/detail/ocemkolpnamjcacndljdfmhlpcaoipji) 或 **chrome** [ (部件扩展) ](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi)的 SharePoint 工具的页面诊断工具。</span><span class="sxs-lookup"><span data-stu-id="7f887-128">Install the Page Diagnostics for SharePoint tool for **Microsoft Edge** [(Edge extension)](https://microsoftedge.microsoft.com/addons/detail/ocemkolpnamjcacndljdfmhlpcaoipji) or **Chrome** [(Chrome extension)](https://chrome.google.com/webstore/detail/inahogkhlkbkjkkaleonemeijihmfagi).</span></span> <span data-ttu-id="7f887-129">请查看 store 中的 "说明" 页上提供的用户隐私策略。</span><span class="sxs-lookup"><span data-stu-id="7f887-129">Please review the User Privacy Policy provided on the description page in the store.</span></span> <span data-ttu-id="7f887-130">向浏览器添加工具时，您将看到以下权限通知。</span><span class="sxs-lookup"><span data-stu-id="7f887-130">When adding the tool to your browser, you will see the following permissions notice.</span></span>

    ![扩展权限](../media/page-diagnostics-for-spo/pagediag-add-to-edge.png)

    <span data-ttu-id="7f887-132">由于页面上的 web 部件和自定义项可能包含来自 SharePoint 之外的位置的内容，因此此通知已生效。</span><span class="sxs-lookup"><span data-stu-id="7f887-132">This notice is in place because a page may contain content from locations outside of SharePoint depending on the web parts and customizations on the page.</span></span> <span data-ttu-id="7f887-133">这意味着，在单击 "开始" 按钮时，该工具将读取请求和响应，并且仅针对运行该工具的活动 SharePoint 选项卡。</span><span class="sxs-lookup"><span data-stu-id="7f887-133">This means that the tool will read the requests and responses when the start button is clicked and only for the active SharePoint tab where the tool is running.</span></span> <span data-ttu-id="7f887-134">此信息由 web 浏览器在本地捕获，可通过工具的 "_网络跟踪_" 选项卡中的 "**导出到 JSON** " 或 "**导出到 HAR** " 按钮供您使用。**这些信息不会发送给 Microsoft 或由 Microsoft 捕获**。</span><span class="sxs-lookup"><span data-stu-id="7f887-134">This information is captured locally by the web browser and is available to you via the **Export to JSON** or **Export to HAR** button in the tool's _Network trace_ tab. **The information is not sent to or captured by Microsoft.**</span></span> <span data-ttu-id="7f887-135"> (此工具会考虑 [此处](https://go.microsoft.com/fwlink/p/?linkid=857875)可访问的 Microsoft 隐私策略。 ) </span><span class="sxs-lookup"><span data-stu-id="7f887-135">(The tool respects the Microsoft privacy policy accessible [here](https://go.microsoft.com/fwlink/p/?linkid=857875).)</span></span>

    <span data-ttu-id="7f887-136">" _管理您的下载_ " 权限涵盖了该工具的 **导出到 JSON** 功能的使用。</span><span class="sxs-lookup"><span data-stu-id="7f887-136">The _Manage your downloads_ permission covers use of the tool's **Export to JSON** functionality.</span></span> <span data-ttu-id="7f887-137">在您的组织外部共享 JSON 文件之前，请按照贵公司自己的隐私准则进行操作，因为结果中包含 Url，并且可以归类为 PII (个人身份信息) 。</span><span class="sxs-lookup"><span data-stu-id="7f887-137">Please follow your company's own privacy guidelines before sharing the JSON file outside of your organization, as the results contain URLs and that can be classified as PII (Personally Identifiable Information).</span></span>
1. <span data-ttu-id="7f887-138">如果要在 Incognito 或 InPrivate 模式中使用该工具，请按照浏览器的过程操作：</span><span class="sxs-lookup"><span data-stu-id="7f887-138">If you want to use the tool in Incognito or InPrivate mode, follow the procedure for your browser:</span></span>
    1. <span data-ttu-id="7f887-139">在 Microsoft Edge 中，导航到 " **扩展** " 或在 URL 栏中键入 " _edge://extensions_ "，然后选择扩展的 " **详细信息** "。</span><span class="sxs-lookup"><span data-stu-id="7f887-139">In Microsoft Edge, navigate to **Extensions** or type _edge://extensions_ in the URL bar and select **Details** for the extension.</span></span> <span data-ttu-id="7f887-140">在扩展设置中，选中 " **允许在 InPrivate 中**" 复选框。</span><span class="sxs-lookup"><span data-stu-id="7f887-140">In the extension settings, select the checkbox for **allow in InPrivate**.</span></span>
    1. <span data-ttu-id="7f887-141">在 Chrome 中，导航到 " **扩展** " 或在 URL 栏中键入 " _chrome://extensions_ "，然后选择扩展的 **详细信息** 。</span><span class="sxs-lookup"><span data-stu-id="7f887-141">In Chrome, navigate to **Extensions** or type _chrome://extensions_ in the URL bar and select **Details** for the extension.</span></span> <span data-ttu-id="7f887-142">在 "扩展设置" 中，选择 " **允许在 Incognito 中**" 滑块。</span><span class="sxs-lookup"><span data-stu-id="7f887-142">In the extension settings, select the slider for **allow in Incognito**.</span></span>
1. <span data-ttu-id="7f887-143">导航到 SharePoint Online 上您要查看的 SharePoint 网站页面。</span><span class="sxs-lookup"><span data-stu-id="7f887-143">Navigate to the SharePoint site page on SharePoint Online that you would like to review.</span></span> <span data-ttu-id="7f887-144">我们允许对页面上的项目进行 "延迟加载";因此，该工具不会自动停止 (这是为了适应) 的所有页面加载方案而设计的。</span><span class="sxs-lookup"><span data-stu-id="7f887-144">We have allowed for "delay loading" of items on pages; therefore, the tool will not stop automatically (this is by design to accommodate all page load scenarios).</span></span> <span data-ttu-id="7f887-145">若要停止收集，请选择 " **停止**"。</span><span class="sxs-lookup"><span data-stu-id="7f887-145">To stop collection, select **Stop**.</span></span> <span data-ttu-id="7f887-146">在停止数据收集之前，请确保页面加载已完成，否则将只捕获部分跟踪。</span><span class="sxs-lookup"><span data-stu-id="7f887-146">Make sure that the page load has completed before you stop data collection or you will only capture a partial trace.</span></span>
1. <span data-ttu-id="7f887-147">单击扩展的工具栏按钮</span><span class="sxs-lookup"><span data-stu-id="7f887-147">Click on the extension's toolbar button</span></span> ![SharePoint 徽标的页面诊断](../media/page-diagnostics-for-spo/pagediag-icon32.png) <span data-ttu-id="7f887-149">加载工具时，将显示以下扩展名弹出窗口：</span><span class="sxs-lookup"><span data-stu-id="7f887-149">to load the tool and you will be presented with the following extension popup window:</span></span>

    ![页面诊断工具弹出菜单](../media/page-diagnostics-for-spo/pagediag-Landing.png)

<span data-ttu-id="7f887-151">选择 " **开始** " 以开始收集数据以供分析。</span><span class="sxs-lookup"><span data-stu-id="7f887-151">Select **Start** to begin collecting data for analysis.</span></span>

## <a name="what-youll-see-in-the-page-diagnostics-for-sharepoint-tool"></a><span data-ttu-id="7f887-152">您将在 SharePoint 的页面诊断工具中看到的内容</span><span class="sxs-lookup"><span data-stu-id="7f887-152">What you'll see in the Page Diagnostics for SharePoint tool</span></span>

1. <span data-ttu-id="7f887-153">单击工具右上角的 "省略号 ( ..." ) ，查找以下链接：</span><span class="sxs-lookup"><span data-stu-id="7f887-153">Click the ellipses (...) in the top right corner of the tool to find the following links:</span></span>
   1. <span data-ttu-id="7f887-154">" **其他资源** " 链接提供了有关该工具的一般指导和详细信息，其中包括返回到本文的链接。</span><span class="sxs-lookup"><span data-stu-id="7f887-154">The **Additional resources** link provides general guidance and details regarding the tool including a link back to this article.</span></span>
   1. <span data-ttu-id="7f887-155">" **提供反馈** " 链接提供了指向 _SharePoint 网站和协作用户语音_ 网站的链接。</span><span class="sxs-lookup"><span data-stu-id="7f887-155">The **Give feedback** link provides a link to the _SharePoint Sites and Collaboration User Voice_ site.</span></span>
   1. <span data-ttu-id="7f887-156">" **关于** " 链接包括当前安装的工具版本以及指向该工具的第三方通知的直接链接。</span><span class="sxs-lookup"><span data-stu-id="7f887-156">The **About** link includes the currently installed version of the tool and a direct link to the tool's third party notice.</span></span>  
1. <span data-ttu-id="7f887-157">**相关 ID、SPRequestDuration、SPIISLatency**、**页面加载时间**和**URL**详细信息都是信息，可用于以下几个用途。</span><span class="sxs-lookup"><span data-stu-id="7f887-157">The **Correlation ID, SPRequestDuration, SPIISLatency**, **Page load time**, and **URL** details are informational and can be used for a few purposes.</span></span>

    ![页面诊断详细信息](../media/page-diagnostics-for-spo/pagediag-details.PNG)

   - <span data-ttu-id="7f887-159">**CorrelationID** 是使用 Microsoft 支持时的重要元素，因为它允许他们收集特定页面的其他诊断数据。</span><span class="sxs-lookup"><span data-stu-id="7f887-159">**CorrelationID** is an important element when working with Microsoft Support as it allows them to gather additional diagnostic data for the specific page.</span></span>
   - <span data-ttu-id="7f887-160">**SPRequestDuration** 是 SharePoint 处理页面所用的时间。</span><span class="sxs-lookup"><span data-stu-id="7f887-160">**SPRequestDuration** is the time taken for SharePoint to process the page.</span></span> <span data-ttu-id="7f887-161">结构化导航、大型图像、大量 API 调用都可能会导致更长的持续时间。</span><span class="sxs-lookup"><span data-stu-id="7f887-161">Structural navigation, large images, lots of API calls could all contribute to longer durations.</span></span>
   - <span data-ttu-id="7f887-162">**SPIISLatency** 是在 SharePoint Online 开始加载页面时所用的时间（以毫秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="7f887-162">**SPIISLatency** is the time in milliseconds taken for SharePoint Online begin loading the page.</span></span> <span data-ttu-id="7f887-163">此值不包括 web 应用程序响应所用的时间。</span><span class="sxs-lookup"><span data-stu-id="7f887-163">This value does not include the time taken for the web application to respond.</span></span>
   - <span data-ttu-id="7f887-164">**页面加载时间** 是在请求收到并在浏览器中呈现响应时，页面记录的总时间。</span><span class="sxs-lookup"><span data-stu-id="7f887-164">**Page load time** is the total time recorded by the page from the time of the request to the time the response was received and rendered in the browser.</span></span> <span data-ttu-id="7f887-165">此值受多种因素的影响，包括网络延迟、计算机的性能以及浏览器加载页面所需的时间。</span><span class="sxs-lookup"><span data-stu-id="7f887-165">This value is affected by a variety of factors including network latency, the performance of the computer and the time it takes for the browser to load the page.</span></span>
   - <span data-ttu-id="7f887-166">**页面 URL** (统一资源定位器) 是当前页面的 web 地址。</span><span class="sxs-lookup"><span data-stu-id="7f887-166">The **Page URL** (Uniform Resource Locator) is the web address of the current page.</span></span>

1. <span data-ttu-id="7f887-167">" [**诊断测试**](#how-to-use-the-diagnostic-tests-tab) " 选项卡将分析结果显示为三个类别; **无需任何操作**、 **改进机会** 和 **注意事项**。</span><span class="sxs-lookup"><span data-stu-id="7f887-167">The [**Diagnostic tests**](#how-to-use-the-diagnostic-tests-tab) tab displays the analysis results in three categories; **No action required**, **Improvement opportunities** and **Attention required**.</span></span> <span data-ttu-id="7f887-168">每个测试结果由其中一个类别中的项表示，如下表中所述：</span><span class="sxs-lookup"><span data-stu-id="7f887-168">Each test result is represented by an item in one of these categories as described in the following table:</span></span>

    |<span data-ttu-id="7f887-169">类别</span><span class="sxs-lookup"><span data-stu-id="7f887-169">Category</span></span>  |<span data-ttu-id="7f887-170">颜色</span><span class="sxs-lookup"><span data-stu-id="7f887-170">Color</span></span>  |<span data-ttu-id="7f887-171">说明</span><span class="sxs-lookup"><span data-stu-id="7f887-171">Description</span></span>  |
    |---------|---------|---------|
    |<span data-ttu-id="7f887-172">**注意事项**</span><span class="sxs-lookup"><span data-stu-id="7f887-172">**Attention required**</span></span> |<span data-ttu-id="7f887-173">红色</span><span class="sxs-lookup"><span data-stu-id="7f887-173">Red</span></span> |<span data-ttu-id="7f887-174">测试结果不在比较基准值的范围之内，因而会影响页面性能。</span><span class="sxs-lookup"><span data-stu-id="7f887-174">Test result falls outside the baseline value and is affecting page performance.</span></span> <span data-ttu-id="7f887-175">遵循更正指南。</span><span class="sxs-lookup"><span data-stu-id="7f887-175">Follow remediation guidance.</span></span>|
    |<span data-ttu-id="7f887-176">**改进机会**</span><span class="sxs-lookup"><span data-stu-id="7f887-176">**Improvement opportunities**</span></span> |<span data-ttu-id="7f887-177">黄色</span><span class="sxs-lookup"><span data-stu-id="7f887-177">Yellow</span></span> |<span data-ttu-id="7f887-178">测试结果不在比较基准值的范围之内，可能会引起性能问题。</span><span class="sxs-lookup"><span data-stu-id="7f887-178">Test result falls outside the baseline value and could be contributing to performance issues.</span></span> <span data-ttu-id="7f887-179">可能应用特定于测试的条件。</span><span class="sxs-lookup"><span data-stu-id="7f887-179">Test-specific criteria may apply.</span></span>|
    |<span data-ttu-id="7f887-180">**不需要执行任何操作**</span><span class="sxs-lookup"><span data-stu-id="7f887-180">**No action required**</span></span> |<span data-ttu-id="7f887-181">绿色</span><span class="sxs-lookup"><span data-stu-id="7f887-181">Green</span></span> |<span data-ttu-id="7f887-182">测试结果在测试的比较基准值范围内。</span><span class="sxs-lookup"><span data-stu-id="7f887-182">Test result falls within the test's baseline value.</span></span>|

    ![页面诊断](../media/page-diagnostics-for-spo/pagediag-results-general.PNG)

1. <span data-ttu-id="7f887-184">" [**网络跟踪**](#how-to-use-the-network-trace-tab) " 选项卡提供有关页面生成请求和响应的详细信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-184">A [**Network trace**](#how-to-use-the-network-trace-tab) tab provides details about page build requests and responses.</span></span>

## <a name="how-to-use-the-diagnostic-tests-tab"></a><span data-ttu-id="7f887-185">如何使用 "诊断测试" 选项卡</span><span class="sxs-lookup"><span data-stu-id="7f887-185">How to use the Diagnostic tests tab</span></span>

<span data-ttu-id="7f887-186">在使用 SharePoint 工具的页面诊断工具分析 SharePoint 新式门户或经典发布网站页面时，将使用预定义的规则对结果进行分析，这些规则将比较比较基准值和 " **诊断测试** " 选项卡中显示的结果。某些测试的规则可能对新式门户和经典发布网站使用不同的比较基准值，具体取决于两者之间的特定性能特征不同。</span><span class="sxs-lookup"><span data-stu-id="7f887-186">When you analyze a SharePoint modern portal page or classic publishing site page with the Page Diagnostics for SharePoint tool, results are analyzed using pre-defined rules that compare results against baseline values and displayed in the **Diagnostic tests** tab. Rules for certain tests may use different baseline values for modern portal and classic publishing sites depending on how specific performance characteristics differ between the two.</span></span>

<span data-ttu-id="7f887-187">" **改善机会** " 或 " **注意事项** " 类别中显示的测试结果指明应针对建议的做法评审的区域，并且可以选择此选项以显示有关结果的其他信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-187">Test results that appear in the **Improvement opportunities** or **Attention required** categories indicate areas that should be reviewed against recommended practices, and can be selected to display additional information about the result.</span></span> <span data-ttu-id="7f887-188">每个项目的详细信息包括一个 " _了解更多_ " 链接，它将直接转到与测试相关的相应指南。</span><span class="sxs-lookup"><span data-stu-id="7f887-188">Details for each item include a _Learn more_ link which will take you directly to the appropriate guidance related to the test.</span></span> <span data-ttu-id="7f887-189">" **无需任何操作** " 类别中显示的测试结果指示符合相关规则，并且在选中时不显示其他详细信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-189">Test results that appear in the **No action required** category indicate compliance with the relevant rule and do not display additional details when selected.</span></span>

<span data-ttu-id="7f887-190">"诊断测试" 选项卡中的信息不会告诉您如何设计页面，但会突出显示可能影响页面性能的因素。</span><span class="sxs-lookup"><span data-stu-id="7f887-190">The information in the Diagnostics tests tab will not tell you how to design pages, but will highlight factors that may impact page performance.</span></span> <span data-ttu-id="7f887-191">某些页面功能和自定义对页面性能的影响不可避免，应检查它们的可能修正或从页面中省略（如果它们的影响是重大的）。</span><span class="sxs-lookup"><span data-stu-id="7f887-191">Some page functionality and customizations have an unavoidable impact on page performance, and should be reviewed for potential remediation or omission from the page if their impact is substantial.</span></span>

<span data-ttu-id="7f887-192">红色或黄色结果也可能表示刷新数据过于频繁的 web 部件。</span><span class="sxs-lookup"><span data-stu-id="7f887-192">Red or yellow results may also indicate web parts that refresh data too frequently.</span></span> <span data-ttu-id="7f887-193">例如，公司新闻不会每秒更新一次，但自定义 web 部件通常是为每秒提取最新新闻，而不是实施可以改善总体用户体验的缓存元素。</span><span class="sxs-lookup"><span data-stu-id="7f887-193">For example, corporate news is not updated every second but custom web parts are often built to fetch the latest news every second instead of implementing caching elements that could improve the overall user experience.</span></span> <span data-ttu-id="7f887-194">在页面上添加 web 部件时，请注意，通过评估每个可用参数的值来降低它们的性能影响，以确保将其设置为适合其预期目的的简单方法。</span><span class="sxs-lookup"><span data-stu-id="7f887-194">Keep in mind when including web parts on a page that there are often simple ways to reduce their performance impact by evaluating the value of each available parameter to ensure it is set appropriately for its intended purpose.</span></span>

>[!NOTE]
><span data-ttu-id="7f887-195">如果经典工作组网站未启用发布功能，则无法使用 Cdn。</span><span class="sxs-lookup"><span data-stu-id="7f887-195">Classic team sites that don't have the publishing feature enabled cannot make use of CDNs.</span></span> <span data-ttu-id="7f887-196">当您在这些网站上运行此工具时，CDN 测试应会失败，并且可以忽略，但其余所有测试均适用。</span><span class="sxs-lookup"><span data-stu-id="7f887-196">When you run the tool on these sites, the CDN test is expected to fail and can be ignored, but all of the remaining tests are applicable.</span></span> <span data-ttu-id="7f887-197">SharePoint 发布功能的其他功能可能会增加页面加载时间，因此不应只为允许 CDN 功能而启用此功能。</span><span class="sxs-lookup"><span data-stu-id="7f887-197">The additional functionality of the SharePoint publishing feature can increase page load times, so it should not be enabled just to allow CDN functionality.</span></span>

>[!IMPORTANT]
><span data-ttu-id="7f887-198">将定期添加和更新测试规则，请参阅最新版本的工具，了解有关当前规则和测试结果中包含的特定信息的详细信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-198">Test rules are added and updated regularly so please refer to the latest version of the tool for details about current rules and specific information included in test results.</span></span> <span data-ttu-id="7f887-199">您可以通过管理您的扩展来验证版本，扩展将告知是否有更新可用。</span><span class="sxs-lookup"><span data-stu-id="7f887-199">You can verify the version by managing your extensions and the extension will advise whether an update is available.</span></span>

## <a name="how-to-use-the-network-trace-tab"></a><span data-ttu-id="7f887-200">如何使用网络跟踪选项卡</span><span class="sxs-lookup"><span data-stu-id="7f887-200">How to use the Network Trace tab</span></span>

<span data-ttu-id="7f887-201">" **网络跟踪** " 选项卡提供了用于生成页面的两个请求的详细信息以及从 SharePoint 收到的响应。</span><span class="sxs-lookup"><span data-stu-id="7f887-201">The **Network Trace** tab provides detailed information about both requests to build the page and the responses received from SharePoint.</span></span>

1. <span data-ttu-id="7f887-202">**查找标记为红色的项目加载时间**。</span><span class="sxs-lookup"><span data-stu-id="7f887-202">**Look for item load times flagged as red**.</span></span> <span data-ttu-id="7f887-203">每个请求和响应都采用颜色编码，以指示其对总体页面性能的影响使用以下延迟指标：</span><span class="sxs-lookup"><span data-stu-id="7f887-203">Each request and response is color coded to indicate its impact on overall page performance using the following latency metrics:</span></span>
    - <span data-ttu-id="7f887-204">绿色： \< 500ms</span><span class="sxs-lookup"><span data-stu-id="7f887-204">Green: \< 500ms</span></span>
    - <span data-ttu-id="7f887-205">黄色： 500-1000ms</span><span class="sxs-lookup"><span data-stu-id="7f887-205">Yellow: 500-1000ms</span></span>
    - <span data-ttu-id="7f887-206">红色： \> 1000ms</span><span class="sxs-lookup"><span data-stu-id="7f887-206">Red: \> 1000ms</span></span>

    ![网络跟踪](../media/page-diagnostics-for-spo/pagediag-networktrace-red.png)

    <span data-ttu-id="7f887-208">在上面显示的图像中，红色项目与默认页面相关。</span><span class="sxs-lookup"><span data-stu-id="7f887-208">In the image shown above, the red item pertains to the default page.</span></span> <span data-ttu-id="7f887-209">除非在1000ms 中加载页面 \< (小于1秒) ，否则它将始终显示红色。</span><span class="sxs-lookup"><span data-stu-id="7f887-209">It will always show red unless the page loads in \< 1000ms (less than 1 second).</span></span>

2. <span data-ttu-id="7f887-210">**测试项加载时间**。</span><span class="sxs-lookup"><span data-stu-id="7f887-210">**Test item load times**.</span></span> <span data-ttu-id="7f887-211">在某些情况下，由于浏览器已缓存这些项，因此不会有任何时间或颜色指示器。</span><span class="sxs-lookup"><span data-stu-id="7f887-211">In some cases there will be no time or color indicator because the items have already been cached by the browser.</span></span> <span data-ttu-id="7f887-212">若要正确测试此设置，请打开页面，清除浏览器缓存，然后单击 " **启动** "，这将强制 "冷" 页面加载，并成为初始页面加载的真正反映。</span><span class="sxs-lookup"><span data-stu-id="7f887-212">To test this correctly, open the page, clear browser cache, and then click **Start** as that will force a "cold" page load and be a true reflection of the initial page load.</span></span> <span data-ttu-id="7f887-213">此操作应与 "感兴趣" 页面加载进行比较，这将有助于确定要在页面上缓存的项目。</span><span class="sxs-lookup"><span data-stu-id="7f887-213">This should then be compared to the "warm" page load as that will also help determine what items are being cached on the page.</span></span>

3. <span data-ttu-id="7f887-214">**与可帮助调查问题的其他人共享相关详细信息**。</span><span class="sxs-lookup"><span data-stu-id="7f887-214">**Share relevant details with others who can help investigate issues**.</span></span> <span data-ttu-id="7f887-215">若要与您的开发人员或技术支持人员共享工具中提供的详细信息或信息，请单击 " **导出到 JSON** (，如上面) 的图像中所示。</span><span class="sxs-lookup"><span data-stu-id="7f887-215">To share the details or information provided in the tool with your developers or a technical support person, click **Export to JSON** (as shown in the image above).</span></span> <span data-ttu-id="7f887-216">这将使您能够通过 JSON 文件查看器进行查看，从而下载结果。</span><span class="sxs-lookup"><span data-stu-id="7f887-216">That will enable you to download the results, viewable with a JSON file viewer.</span></span>

    <span data-ttu-id="7f887-217">如果你已选择使用预览功能，请将 *导出到 har* ，导出类型将显示为 " **导出到 har**"。</span><span class="sxs-lookup"><span data-stu-id="7f887-217">If you have opted to use the preview feature *enable Export to HAR* then the export type will show as **Export to HAR**.</span></span>

    ![网络跟踪](../media/page-diagnostics-for-spo/pagediag-NetworkTraceHAR.PNG)

> [!IMPORTANT]
> <span data-ttu-id="7f887-219">这些结果包含的 Url 和可分类为 PII 的 Url (个人身份信息) 。</span><span class="sxs-lookup"><span data-stu-id="7f887-219">These results contain URLs and that can be classified as PII (Personally Identifiable Information).</span></span> <span data-ttu-id="7f887-220">在分发该信息之前，请确保遵守组织的准则。</span><span class="sxs-lookup"><span data-stu-id="7f887-220">Make sure to follow your organization's guidelines before distributing that information.</span></span>

## <a name="engaging-with-microsoft-support"></a><span data-ttu-id="7f887-221">与 Microsoft 支持人员接洽</span><span class="sxs-lookup"><span data-stu-id="7f887-221">Engaging with Microsoft Support</span></span>

<span data-ttu-id="7f887-222">我们已加入 **Microsoft 支持级别功能** ，仅当直接在支持案例中工作时才能使用此功能。</span><span class="sxs-lookup"><span data-stu-id="7f887-222">We have included a **Microsoft Support level feature** that should only be utilized when working directly on a support case.</span></span> <span data-ttu-id="7f887-223">如果使用此功能，则在不支持团队合作的情况下使用时不会对你带来任何好处，并且可以使页面的执行速度显著降低。</span><span class="sxs-lookup"><span data-stu-id="7f887-223">Utilizing this feature will provide no benefit to you when used without support team engagement, and can make the page perform significantly slower.</span></span> <span data-ttu-id="7f887-224">在工具中使用此功能时，在将其他信息添加到服务中的日志记录中时，不会提供任何其他信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-224">There is no additional information when using this feature in the tool as the additional information is added to the logging in the service.</span></span>

<span data-ttu-id="7f887-225">不显示任何更改，只是系统会通知您已启用该功能，并且您的页面性能会显著下降2-3 倍的性能，同时启用速度降低。</span><span class="sxs-lookup"><span data-stu-id="7f887-225">No change is visible except that you will be notified that you have enabled it and your page performance will be significantly degraded by 2-3 times slower performance whilst enabled.</span></span> <span data-ttu-id="7f887-226">它将仅与特定页面和活动会话相关。</span><span class="sxs-lookup"><span data-stu-id="7f887-226">It will only be relevant for the particular page and that active session.</span></span> <span data-ttu-id="7f887-227">出于此原因，应谨慎使用，仅在主动参与支持时使用。</span><span class="sxs-lookup"><span data-stu-id="7f887-227">For this reason, this should be used sparingly and only when actively engaged with support.</span></span>

### <a name="to-enable-the-microsoft-support-level-feature"></a><span data-ttu-id="7f887-228">启用 Microsoft 支持级别功能</span><span class="sxs-lookup"><span data-stu-id="7f887-228">To enable the Microsoft Support level feature</span></span>

1. <span data-ttu-id="7f887-229">打开 "页面诊断" "SharePoint 工具"。</span><span class="sxs-lookup"><span data-stu-id="7f887-229">Open the Page Diagnostics for SharePoint tool.</span></span>
2. <span data-ttu-id="7f887-230">在键盘上，按 **ALT + Shift-L**。</span><span class="sxs-lookup"><span data-stu-id="7f887-230">On your keyboard, press **ALT-Shift-L**.</span></span> <span data-ttu-id="7f887-231">这将显示 " **启用支持日志记录** " 复选框。</span><span class="sxs-lookup"><span data-stu-id="7f887-231">This will display the **Enable support logging** check box.</span></span>
3. <span data-ttu-id="7f887-232">选中 "" 复选框，然后单击 " **开始** " 以重新加载页面并生成详细日志记录。</span><span class="sxs-lookup"><span data-stu-id="7f887-232">Select the check box, and then click **Start** to reload the page and generate verbose logging.</span></span>

    ![启用了支持选项](../media/page-diagnostics-for-spo/pagediag-support.png)
  
    <span data-ttu-id="7f887-234">您应注意 (显示在工具顶部的 CorrelationID) 并将其提供给支持代表，以使其能够收集有关诊断会话的其他信息。</span><span class="sxs-lookup"><span data-stu-id="7f887-234">You should note the CorrelationID (displayed at the top of the tool) and provide it to your support representative to enable them to gather additional information about the diagnostic session.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7f887-235">相关主题</span><span class="sxs-lookup"><span data-stu-id="7f887-235">Related topics</span></span>

[<span data-ttu-id="7f887-236">优化 SharePoint Online 性能</span><span class="sxs-lookup"><span data-stu-id="7f887-236">Tune SharePoint Online performance</span></span>](tune-sharepoint-online-performance.md)

[<span data-ttu-id="7f887-237">优化 Office 365 性能</span><span class="sxs-lookup"><span data-stu-id="7f887-237">Tune Office 365 performance</span></span>](tune-microsoft-365-performance.md)

[<span data-ttu-id="7f887-238">新式 SharePoint 体验中的性能</span><span class="sxs-lookup"><span data-stu-id="7f887-238">Performance in the modern SharePoint experience</span></span>](https://docs.microsoft.com/sharepoint/modern-experience-performance)

[<span data-ttu-id="7f887-239">内容分发网络</span><span class="sxs-lookup"><span data-stu-id="7f887-239">Content delivery networks</span></span>](content-delivery-networks.md)

[<span data-ttu-id="7f887-240">结合使用 Office 365 内容分发网络和 SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="7f887-240">Use the Office 365 Content Delivery Network (CDN) with SharePoint Online</span></span>](use-microsoft-365-cdn-with-spo.md)
