---
title: 使用基线和性能历史记录优化 Office 365 性能
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 8/31/2017
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom:
- Adm_O365
- seo-marvel-apr2020
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 1492cb94-bd62-43e6-b8d0-2a61ed88ebae
ms.collection:
- M365-security-compliance
- Ent_O365
- SPO_Content
description: 了解如何检查客户端计算机连接的历史记录，以帮助你尽早检测新出现的问题。
ms.openlocfilehash: 87b1d43df560fc7fea5aadfbf1c422eb22883067
ms.sourcegitcommit: 27b2b2e5c41934b918cac2c171556c45e36661bf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/19/2021
ms.locfileid: "50928140"
---
# <a name="office-365-performance-tuning-using-baselines-and-performance-history"></a><span data-ttu-id="111f2-103">使用基线和性能历史记录优化 Office 365 性能</span><span class="sxs-lookup"><span data-stu-id="111f2-103">Office 365 performance tuning using baselines and performance history</span></span>

<span data-ttu-id="111f2-104">有一些简单的方法可以检查 Office 365 和您的业务之间的连接性能，这可让你建立大致的连接基线。</span><span class="sxs-lookup"><span data-stu-id="111f2-104">There are some simple ways to check the connection performance between Office 365 and your business that will let you establish a rough baseline of your connectivity.</span></span> <span data-ttu-id="111f2-105">了解客户端计算机连接的性能历史记录可帮助您提前检测新出现的问题、识别和预测问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-105">Knowing the performance history of your client computer connections can help you detect emerging issues early, identify, and predict problems.</span></span>
  
<span data-ttu-id="111f2-106">如果您不习惯处理性能问题，本文旨在帮助您考虑一些常见问题，例如您如何知道您看到的问题是性能问题而不是 Office 365 服务事件？</span><span class="sxs-lookup"><span data-stu-id="111f2-106">If you're not used to working on performance issues, this article is designed to help you consider some common questions, like How do you know the problem you're seeing is a performance issue and not an Office 365 service incident?</span></span> <span data-ttu-id="111f2-107">如何规划良好的长期性能？</span><span class="sxs-lookup"><span data-stu-id="111f2-107">How can you plan for good performance, long term?</span></span> <span data-ttu-id="111f2-108">如何关注性能？</span><span class="sxs-lookup"><span data-stu-id="111f2-108">How can you keep an eye on performance?</span></span> <span data-ttu-id="111f2-109">如果你的团队或客户端在使用 Office 365 时发现性能缓慢，并且你想知道其中任何一个问题，请继续阅读。</span><span class="sxs-lookup"><span data-stu-id="111f2-109">If your team or clients are seeing slow performance while using Office 365, and you wonder about any of these questions, read on.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="111f2-110">**现在客户端和 Office 365 之间出现性能问题？**</span><span class="sxs-lookup"><span data-stu-id="111f2-110">**Have a performance issue between your client and Office 365 right now?**</span></span> <span data-ttu-id="111f2-111">按照 [Office 365 的性能疑难解答计划中概述的步骤操作](performance-troubleshooting-plan.md)。</span><span class="sxs-lookup"><span data-stu-id="111f2-111">Follow the steps outlined in the [Performance troubleshooting plan for Office 365](performance-troubleshooting-plan.md).</span></span> 
    
## <a name="something-you-should-know-about-office-365-performance"></a><span data-ttu-id="111f2-112">有关 Office 365 性能应了解的一些信息</span><span class="sxs-lookup"><span data-stu-id="111f2-112">Something you should know about Office 365 performance</span></span>

<span data-ttu-id="111f2-113">Office 365 位于高容量专用 Microsoft 网络内，该网络不仅通过自动化，而且还由真实人员进行稳定监视。</span><span class="sxs-lookup"><span data-stu-id="111f2-113">Office 365 lives inside a high-capacity, dedicated Microsoft network that is steadily monitored not just by automation, but by real people.</span></span> <span data-ttu-id="111f2-114">维护 Office 365 云的部分角色是尽可能进行性能优化和简化。</span><span class="sxs-lookup"><span data-stu-id="111f2-114">Part of the role of maintaining the Office 365 cloud is building-in performance tuning and streamlining where it's possible.</span></span> <span data-ttu-id="111f2-115">由于 Office 365 云的客户端必须跨 Internet 连接，因此，我们持续努力跨 Office 365 服务微调性能。</span><span class="sxs-lookup"><span data-stu-id="111f2-115">Since clients of the Office 365 cloud have to connect across the Internet, there is a continuous effort to fine-tune the performance across Office 365 services too.</span></span> <span data-ttu-id="111f2-116">性能改进从未真正在云中停止过，在保持云正常运行和快速方面累积了许多经验。</span><span class="sxs-lookup"><span data-stu-id="111f2-116">Performance improvements never really stop in the cloud, and there is a lot of accumulated experience with keeping the cloud healthy and quick.</span></span> <span data-ttu-id="111f2-117">如果从你的位置连接到 Office 365 时遇到性能问题，最好不要从支持案例开始等待。</span><span class="sxs-lookup"><span data-stu-id="111f2-117">Should you experience a performance issue connecting from your location to Office 365, it's best not to start with, and wait on, a Support case.</span></span> <span data-ttu-id="111f2-118">相反，你应该从"从内到外"开始调查问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-118">Instead, you should begin investigating the problem from 'the inside out'.</span></span> <span data-ttu-id="111f2-119">也就是说，从网络内部开始，并解决 Office 365 的问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-119">That is, start inside of your network, and work your way out to Office 365.</span></span> <span data-ttu-id="111f2-120">在打开 Office 365 支持案例之前，可以收集数据，并采取措施来探索并可能解决你的问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-120">Before you open a case with Office 365 Support, you can gather data and take actions that will explore, and may resolve, your problem.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="111f2-121">请注意 Office 365 中的容量规划和限制。</span><span class="sxs-lookup"><span data-stu-id="111f2-121">Be aware of capacity planning and limits in Office 365.</span></span> <span data-ttu-id="111f2-122">在尝试解决性能问题时，该信息将置于曲线的前面。</span><span class="sxs-lookup"><span data-stu-id="111f2-122">That information will put you ahead of the curve when trying to resolve a performance issue.</span></span> <span data-ttu-id="111f2-123">下面是指向 [Microsoft 365 和 Office 365 服务说明的链接](/office365/servicedescriptions/office-365-service-descriptions-technet-library)。</span><span class="sxs-lookup"><span data-stu-id="111f2-123">Here's a link to the [Microsoft 365 and Office 365 service descriptions](/office365/servicedescriptions/office-365-service-descriptions-technet-library).</span></span> <span data-ttu-id="111f2-124">这是中心中心，Office 365 提供的所有服务都有一个链接，可在此处转到其自己的服务说明。</span><span class="sxs-lookup"><span data-stu-id="111f2-124">This is a central hub, and all the services offered by Office 365 have a link that goes to their own Service Descriptions from here.</span></span> <span data-ttu-id="111f2-125">这意味着，如果您需要查看 SharePoint Online 的标准限制，例如，应单击 ["SharePoint Online](/office365/servicedescriptions/sharepoint-online-service-description/sharepoint-online-service-description) 服务说明"并找到其 ["SharePoint Online 限制"部分](/office365/servicedescriptions/sharepoint-online-service-description/sharepoint-online-limits)。</span><span class="sxs-lookup"><span data-stu-id="111f2-125">That means, should you need to see the standard limits for SharePoint Online, for example, you would click [SharePoint Online Service Description](/office365/servicedescriptions/sharepoint-online-service-description/sharepoint-online-service-description) and locate its [SharePoint Online Limits section](/office365/servicedescriptions/sharepoint-online-service-description/sharepoint-online-limits).</span></span> 
  
<span data-ttu-id="111f2-126">确保你进入疑难解答，了解性能是一种滑动的规模，而不是实现理想化值并永久维护它 (如果你认为这样，那么偶尔执行高带宽任务（如加入大量用户或执行大型数据迁移）将非常压力，因此请规划对性能的影响，然后) 。</span><span class="sxs-lookup"><span data-stu-id="111f2-126">Make sure you go into your troubleshooting with the understanding that performance is a sliding scale, it's not about achieving an idealized value and maintaining it permanently (if you believe this is so, then occasional high-bandwidth tasks like on-boarding a large number of users, or doing large data migrations will be very stressful -- so do plan for performance impacts then).</span></span> <span data-ttu-id="111f2-127">你可以并且应该对性能目标有一个粗略的了解，但性能会由许多变量影响，因此，性能会有所不同。</span><span class="sxs-lookup"><span data-stu-id="111f2-127">You can, and should, have a rough idea of your performance targets, but a lot of variables play into performance, therefore, performance varies.</span></span> <span data-ttu-id="111f2-128">这是性能的性质。</span><span class="sxs-lookup"><span data-stu-id="111f2-128">That's the nature of performance.</span></span> 
  
<span data-ttu-id="111f2-129">性能疑难解答与实现特定目标并无限期地维护这些数字有关，而与改进现有活动（假设存在所有变量）有关。</span><span class="sxs-lookup"><span data-stu-id="111f2-129">Performance troubleshooting isn't about meeting specific goals and maintaining those numbers indefinitely, it's about improving existing activities, given all the variables.</span></span> 
  
## <a name="okay-what-does-a-performance-problem-look-like"></a><span data-ttu-id="111f2-130">好的，性能问题看起来是什么？</span><span class="sxs-lookup"><span data-stu-id="111f2-130">Okay, what does a performance problem look like?</span></span>

<span data-ttu-id="111f2-131">首先，需要确保你遇到的情况确实是性能问题，而不是服务事件。</span><span class="sxs-lookup"><span data-stu-id="111f2-131">First, you need to make sure that what you are experiencing is indeed a performance issue and not a service incident.</span></span> <span data-ttu-id="111f2-132">性能问题不同于 Office 365 中的服务事件。</span><span class="sxs-lookup"><span data-stu-id="111f2-132">A performance problem is different from a service incident in Office 365.</span></span> <span data-ttu-id="111f2-133">下面将介绍它们分开。</span><span class="sxs-lookup"><span data-stu-id="111f2-133">Here's how to tell them apart.</span></span>
  
<span data-ttu-id="111f2-134">如果 Office 365 服务遇到问题，即服务事件。</span><span class="sxs-lookup"><span data-stu-id="111f2-134">If the Office 365 service is having issues, that's a service incident.</span></span> <span data-ttu-id="111f2-135">你将在 Microsoft 365 管理中心的"当前运行状况"下看到红色或黄色图标，还可能会注意到连接到 Office 365 的客户端计算机性能缓慢。 </span><span class="sxs-lookup"><span data-stu-id="111f2-135">You will see red or yellow icons under **Current health** in the Microsoft 365 admin center, you may also notice slow performance on client computers connecting to Office 365.</span></span> <span data-ttu-id="111f2-136">例如，如果"当前运行状况"报告红色图标，且在Exchange 旁边看到"正在调查"，则您可能还收到来自组织中抱怨使用 Exchange Online 的客户端邮箱性能不佳的用户的一批呼叫。</span><span class="sxs-lookup"><span data-stu-id="111f2-136">For example, if Current health reports a red icon and you see **Investigating** beside Exchange, you might then also receive a bunch of calls from people in your organization who complain that client mailboxes that use Exchange Online are performing badly.</span></span> <span data-ttu-id="111f2-137">在这种情况下，可以合理假定 Exchange Online 性能刚刚成为服务内问题的受害者。</span><span class="sxs-lookup"><span data-stu-id="111f2-137">In that case, it's reasonable to assume that your Exchange Online performance just became a victim of issues within the Service.</span></span> 
  
![Office 365 运行状况仪表板，所有工作负荷都显示绿色，Exchange 除外，其中显示服务已还原。](../media/ec7f0325-9e61-4e1a-bec0-64b87f4469be.PNG)
  
<span data-ttu-id="111f2-139">此时，Office 365 管理员应检查"当前运行状况"，然后经常查看详细信息和历史记录，以及时了解我们在系统上执行最新的维护。 </span><span class="sxs-lookup"><span data-stu-id="111f2-139">At this point, you, the Office 365 admin, should check **Current health** and then **View details and history**, frequently, to keep up to date on maintenance we perform on the system.</span></span> <span data-ttu-id="111f2-140">**已创建** 当前运行状况仪表板，以更新服务更改和问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-140">The **Current health** dashboard was made to update you about changes to, and problems in, the service.</span></span> <span data-ttu-id="111f2-141">记录到运行状况历史记录（管理员到管理员）的说明和说明可帮助你衡量影响，并持续发布有关正在进行的工作。</span><span class="sxs-lookup"><span data-stu-id="111f2-141">The notes and explanations written to health history, admin to admin, are there to help you gauge your impact, and to keep you posted about ongoing work.</span></span> 
  
![Office 365 运行状况仪表板的图片，说明 Exchange Online 服务已还原以及原因。](../media/66609554-426a-4448-8be6-ea09817f41ba.PNG)
  
<span data-ttu-id="111f2-143">性能问题不是服务事件，即使事件会导致性能下降。</span><span class="sxs-lookup"><span data-stu-id="111f2-143">A performance issue isn't a service incident, even though incidents can cause slow performance.</span></span> <span data-ttu-id="111f2-144">性能问题如下所示：</span><span class="sxs-lookup"><span data-stu-id="111f2-144">A performance issue looks like this:</span></span>
  
- <span data-ttu-id="111f2-145">无论管理中心是什么当前运行状况报告服务 **，都会出现** 性能问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-145">A performance issue occurs no matter what the admin center **Current health** is reporting for the service.</span></span> 
    
-  <span data-ttu-id="111f2-146">过去是相对无缝的行为需要很长时间才能完成或永远不会完成。</span><span class="sxs-lookup"><span data-stu-id="111f2-146">A behavior that used to be relatively seamless takes a long time to complete or never completes.</span></span> 
    
- <span data-ttu-id="111f2-147">您也可以复制该问题，或者至少，如果执行正确的一系列步骤，就会发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="111f2-147">You can replicate the problem too, or, at least, you know it will happen if you do the right series of steps.</span></span>
    
-  <span data-ttu-id="111f2-148">如果问题是间歇性的，则仍有一种模式，例如，你知道在上午 10：00 之前，你将有来自无法可靠地访问 Office 365 的用户的呼叫，并且呼叫将在中午时分结束。</span><span class="sxs-lookup"><span data-stu-id="111f2-148">If the problem is intermittent, there is still a pattern, for example, you know that by 10:00 AM you will have calls from users who can't reliably access Office 365, and that the calls will die down around noon.</span></span> 
    
<span data-ttu-id="111f2-149">这可能很熟悉;可能太熟悉了。</span><span class="sxs-lookup"><span data-stu-id="111f2-149">This probably sounds familiar; maybe too familiar.</span></span> <span data-ttu-id="111f2-150">当你知道这是性能问题后，问题就变成"下一步做什么？"</span><span class="sxs-lookup"><span data-stu-id="111f2-150">Once you know it's a performance problem, the question becomes, "What do you do next?"</span></span> <span data-ttu-id="111f2-151">本文的其余部分将帮助您准确确定这一点。</span><span class="sxs-lookup"><span data-stu-id="111f2-151">The rest of this article helps you determine exactly that.</span></span>
  
## <a name="how-to-define-and-test-the-performance-problem"></a><span data-ttu-id="111f2-152">如何定义和测试性能问题</span><span class="sxs-lookup"><span data-stu-id="111f2-152">How to define and test the performance problem</span></span>

<span data-ttu-id="111f2-153">性能问题通常会随着时间的推移而出现，因此定义实际问题可能非常困难。</span><span class="sxs-lookup"><span data-stu-id="111f2-153">Performance issues often emerge over time, so it can be challenging to define the actual problem.</span></span> <span data-ttu-id="111f2-154">你需要创建一个很好的问题陈述和问题上下文的好想法，然后需要重复的测试步骤来赢得这一天。</span><span class="sxs-lookup"><span data-stu-id="111f2-154">You need to create a good problem statement and a good idea of issue context, and then you need to repeatable testing steps to win the day.</span></span> <span data-ttu-id="111f2-155">否则，如果没有自己的错误，你可能会丢失。</span><span class="sxs-lookup"><span data-stu-id="111f2-155">Otherwise, through no fault of your own, you may be lost.</span></span> <span data-ttu-id="111f2-156">为什么？</span><span class="sxs-lookup"><span data-stu-id="111f2-156">Why?</span></span> <span data-ttu-id="111f2-157">下面是一些无法提供足够信息的问题语句示例：</span><span class="sxs-lookup"><span data-stu-id="111f2-157">Well, here are some examples of problems statements that don't provide enough information:</span></span>
  
- <span data-ttu-id="111f2-158">从"收件箱"切换到"日历"过去是一个我未注意到的内容，现在它是一个咖啡壶。</span><span class="sxs-lookup"><span data-stu-id="111f2-158">Switching from my Inbox to my Calendar used to be something I didn't notice, and now it's a coffee-break.</span></span> <span data-ttu-id="111f2-159">能否使其像以前一样工作？</span><span class="sxs-lookup"><span data-stu-id="111f2-159">Can you make it act like it used to?</span></span>
    
- <span data-ttu-id="111f2-160">将我的文件上传到 SharePoint Online 需要永久完成。</span><span class="sxs-lookup"><span data-stu-id="111f2-160">Uploading my files to SharePoint Online is taking forever.</span></span> <span data-ttu-id="111f2-161">为什么下午很慢，但在其他任何时间，速度都很快？</span><span class="sxs-lookup"><span data-stu-id="111f2-161">Why is it slow in the afternoon, but any other time, it's fast?</span></span> <span data-ttu-id="111f2-162">不够快吗？</span><span class="sxs-lookup"><span data-stu-id="111f2-162">Can't it just be fast?</span></span>
    
<span data-ttu-id="111f2-163">上面的问题陈述带来了一些较大的挑战。</span><span class="sxs-lookup"><span data-stu-id="111f2-163">There are several large challenges posed by the problem statements above.</span></span> <span data-ttu-id="111f2-164">具体而言，需要处理很多歧义。</span><span class="sxs-lookup"><span data-stu-id="111f2-164">Specifically, there are a lot of ambiguities to deal with.</span></span> <span data-ttu-id="111f2-165">例如：</span><span class="sxs-lookup"><span data-stu-id="111f2-165">for example:</span></span>
  
- <span data-ttu-id="111f2-166">不清楚在用于笔记本电脑的收件箱和日历之间如何切换。</span><span class="sxs-lookup"><span data-stu-id="111f2-166">It's unclear how switching between Inbox and Calendar used to act on the laptop.</span></span>
    
- <span data-ttu-id="111f2-167">当用户说"无法快速"时，什么是"快速"？</span><span class="sxs-lookup"><span data-stu-id="111f2-167">When the user says, "Can't it just be fast", what's "fast"?</span></span>
    
- <span data-ttu-id="111f2-168">"永远"多久？</span><span class="sxs-lookup"><span data-stu-id="111f2-168">How long is "forever"?</span></span> <span data-ttu-id="111f2-169">是几秒钟还是几分钟，或者用户能否去午餐，在用户回来后将结束 10 分钟？</span><span class="sxs-lookup"><span data-stu-id="111f2-169">Is that several seconds, or minutes, or could the user go to lunch and it would finish up ten minutes after the user got back?</span></span>
    
<span data-ttu-id="111f2-170">所有这一切都不考虑管理员和疑难解答程序无法从类似问题陈述中了解许多详细信息。</span><span class="sxs-lookup"><span data-stu-id="111f2-170">All of this is without considering that the admin and troubleshooter can't be aware of many details from problem statements like these.</span></span> <span data-ttu-id="111f2-171">例如，当问题开始出现时;用户在家工作，并且仅在家庭网络上看到切换缓慢;用户必须在本地客户端上运行其他几个 RAM 密集型应用程序，或者用户运行的是较旧的操作系统或尚未运行最近更新。</span><span class="sxs-lookup"><span data-stu-id="111f2-171">For example, when the problem started happening; That the user works from home and only ever sees slow switching while on a home network; That the user must run several other RAM intensive applications on the local client, or the user is running an older operating system or hasn't run recent updates.</span></span>
  
<span data-ttu-id="111f2-172">当用户报告性能问题时，需要收集大量信息。</span><span class="sxs-lookup"><span data-stu-id="111f2-172">When users report a performance problem, there's a lot of information to collect.</span></span> <span data-ttu-id="111f2-173">收集此信息是名为确定问题范围或进行调查的过程的一部分。</span><span class="sxs-lookup"><span data-stu-id="111f2-173">Collecting this information is part of a process called scoping the issue, or investigating it.</span></span> <span data-ttu-id="111f2-174">以下是可用于收集有关性能问题的信息的基本范围列表。</span><span class="sxs-lookup"><span data-stu-id="111f2-174">The following is a basic scoping list you can use to collect information about your performance issue.</span></span> <span data-ttu-id="111f2-175">此列表并不详尽，但可以启动您自己的列表之一：</span><span class="sxs-lookup"><span data-stu-id="111f2-175">This list is not exhaustive, but it's a place to start one of your own:</span></span> 
  
- <span data-ttu-id="111f2-176">该问题在什么日期发生，以及一天或一夜的哪一天？</span><span class="sxs-lookup"><span data-stu-id="111f2-176">On what date did the issue happen, and around what time of day or night?</span></span>
    
- <span data-ttu-id="111f2-177">你使用的是哪种类型的客户端计算机，它如何连接到使用 VPN、有线、无线 (业务) ？</span><span class="sxs-lookup"><span data-stu-id="111f2-177">What kind of client computer were you using, and how does it connect to the business network (VPN, Wired, Wireless)?</span></span>
    
- <span data-ttu-id="111f2-178">你是远程工作还是正在办公室工作？</span><span class="sxs-lookup"><span data-stu-id="111f2-178">Were you working remotely or were you in the office?</span></span>
    
- <span data-ttu-id="111f2-179">您是否尝试在另一计算机上执行相同的操作，并看到相同的行为？</span><span class="sxs-lookup"><span data-stu-id="111f2-179">Did you try the same actions on another computer and see the same behavior?</span></span>
    
- <span data-ttu-id="111f2-180">演练为您提供问题的步骤，以便您可以编写要采取的操作。</span><span class="sxs-lookup"><span data-stu-id="111f2-180">Walk through the steps that are giving you the trouble so that you can write the actions you take down.</span></span>
    
- <span data-ttu-id="111f2-181">性能以秒或分钟的速度有多慢？</span><span class="sxs-lookup"><span data-stu-id="111f2-181">How slow in seconds or minutes is the performance?</span></span>
    
- <span data-ttu-id="111f2-182">你位于世界上的什么位置？</span><span class="sxs-lookup"><span data-stu-id="111f2-182">Where in the world are you located?</span></span>
    
<span data-ttu-id="111f2-183">其中一些问题比其他问题更明显。</span><span class="sxs-lookup"><span data-stu-id="111f2-183">Some of these questions are more obvious than others.</span></span> <span data-ttu-id="111f2-184">大多数每个人都会了解疑难解答程序需要确切步骤来重现问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-184">Most everyone will understand a troubleshooter needs the exact steps to reproduce the issue.</span></span> <span data-ttu-id="111f2-185">毕竟，如何记录错误，以及如果问题已修复，如何进行测试？</span><span class="sxs-lookup"><span data-stu-id="111f2-185">After all, how else can you record what's wrong, and how else can you test if the issue is fixed?</span></span> <span data-ttu-id="111f2-186">不太明显的是"您看到该问题的日期和时间？"和"您位于何处？"等内容，信息可以一起使用。</span><span class="sxs-lookup"><span data-stu-id="111f2-186">Less obvious are things like "What date and time did you see the issue?", and "Where in the world are you located?", information that can be used in tandem.</span></span> <span data-ttu-id="111f2-187">根据用户工作的时间，几小时的时差可能意味着已在公司网络的某些部分进行维护。</span><span class="sxs-lookup"><span data-stu-id="111f2-187">Depending on when the user was working, a few hours of time difference may mean maintenance is already underway on parts of your company's network.</span></span> <span data-ttu-id="111f2-188">例如，如果您的公司具有混合实现（如混合 SharePoint 搜索，它可以查询 SharePoint Online 和本地 SharePoint Server 2013 实例中的搜索索引）时，本地服务器场中可能会进行更新。</span><span class="sxs-lookup"><span data-stu-id="111f2-188">If, for example, your company has a hybrid implementation, like a hybrid SharePoint Search, which can query search indexes in both SharePoint Online and an On-premises SharePoint Server 2013 instance, updates may be underway in the on-premises farm.</span></span> <span data-ttu-id="111f2-189">如果你的公司全部位于云中，系统维护可能包括添加或删除网络硬件、推出公司范围内的更新，或者更改 DNS 或其他核心基础结构。</span><span class="sxs-lookup"><span data-stu-id="111f2-189">If your company is all in the cloud, system maintenance may include adding or removing network hardware, rolling out updates that are company-wide, or making changes to DNS, or other core infrastructure.</span></span>
  
<span data-ttu-id="111f2-190">当你对性能问题进行故障排除时，它有点像一个犯罪场景，你需要精确观察，以从证据中得出任何结论。</span><span class="sxs-lookup"><span data-stu-id="111f2-190">When you're troubleshooting a performance problem, it's a bit like a crime scene, you need to be precise and observant to draw any conclusions from the evidence.</span></span> <span data-ttu-id="111f2-191">为此，必须通过收集证据获得一个很好的问题陈述。</span><span class="sxs-lookup"><span data-stu-id="111f2-191">In order to do this, you must get a good problem statement by gathering evidence.</span></span> <span data-ttu-id="111f2-192">它应包括计算机的上下文、用户的上下文、问题开始时以及公开性能问题的确切步骤。</span><span class="sxs-lookup"><span data-stu-id="111f2-192">It should include the computer's context, the user's context, when the problem began, and the exact steps that exposed the performance issue.</span></span> <span data-ttu-id="111f2-193">This problem statement should， and stay， the top top top page in your notes.</span><span class="sxs-lookup"><span data-stu-id="111f2-193">This problem statement should be, and stay, the topmost page in your notes.</span></span> <span data-ttu-id="111f2-194">在解决问题后，通过再次浏览问题陈述，您可以采取一些步骤来测试并证明您采取的操作是否已解决问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-194">By walking through the problem statement again after you work on the resolution, you are taking the steps to test and prove whether the actions you take have resolved the issue.</span></span> <span data-ttu-id="111f2-195">这一点对于了解工作何时完成至关重要。</span><span class="sxs-lookup"><span data-stu-id="111f2-195">This is critical to knowing when your work, there, is done.</span></span>
  
## <a name="do-you-know-how-performance-used-to-look-when-it-was-good"></a><span data-ttu-id="111f2-196">你是否知道性能在好时如何显示？</span><span class="sxs-lookup"><span data-stu-id="111f2-196">Do you know how performance used to look when it was good?</span></span>

<span data-ttu-id="111f2-197">如果你未通过，则没有人知道。</span><span class="sxs-lookup"><span data-stu-id="111f2-197">If you're unlucky, nobody knows.</span></span> <span data-ttu-id="111f2-198">没有人有数字。</span><span class="sxs-lookup"><span data-stu-id="111f2-198">Nobody had numbers.</span></span> <span data-ttu-id="111f2-199">这意味着没有人可以回答简单的问题"关于在 Office 365 中显示收件箱所花的秒数？"或"当主管人员召开 Lync Online 会议时，它过去需要多久？"，这是许多公司的常见方案。</span><span class="sxs-lookup"><span data-stu-id="111f2-199">That means nobody can answer the simple question "About how many seconds did it used to take to bring up an Inbox in Office 365?", or "How long did it used to take when the Executives had a Lync Online meeting?", which is a common scenario for many companies.</span></span>
  
<span data-ttu-id="111f2-200">此处缺少的是性能基线。</span><span class="sxs-lookup"><span data-stu-id="111f2-200">What's missing here is a performance baseline.</span></span>
  
<span data-ttu-id="111f2-201">基线可为您提供性能上下文。</span><span class="sxs-lookup"><span data-stu-id="111f2-201">Baselines give you a context for your performance.</span></span> <span data-ttu-id="111f2-202">您有时应该经常采取基准，具体取决于公司的需求。</span><span class="sxs-lookup"><span data-stu-id="111f2-202">You should take a baseline occasionally to frequently, depending on the needs of your company.</span></span> <span data-ttu-id="111f2-203">如果你是一家较大的公司，则运营团队可能已经为本地环境设定了基准。</span><span class="sxs-lookup"><span data-stu-id="111f2-203">If you are a larger company, your Operations team may take baselines for your on-premises environment already.</span></span> <span data-ttu-id="111f2-204">例如，如果在每月的第一个星期一修补所有 Exchange 服务器，第三个星期一修补所有 SharePoint 服务器，则操作团队可能有一个任务和方案列表，这些任务和方案在修补后运行，以证明关键功能可正常运行。</span><span class="sxs-lookup"><span data-stu-id="111f2-204">For example, if you patch all the Exchange servers on the first Monday of the month, and all your SharePoint servers on the third Monday, your Operations team probably has a list of tasks and scenarios it runs post-patching, to prove that critical functions are operational.</span></span> <span data-ttu-id="111f2-205">例如，打开"收件箱"，单击"发送/接收"，并确保文件夹更新，或者，在 SharePoint 中浏览网站的主页，进入企业"搜索"页，然后执行返回结果的搜索。</span><span class="sxs-lookup"><span data-stu-id="111f2-205">For example, opening the Inbox, clicking Send/Receive, and making sure the folders update, or, in SharePoint, browsing the main page of the site, going into the enterprise Search page, and doing a search that returns results.</span></span>
  
<span data-ttu-id="111f2-206">如果你的应用程序位于 Office 365 中，你可以测量从网络内部的客户端计算机到出口点的时间)  (（以毫秒为单位）或离开网络并进入 Office 365 的点。</span><span class="sxs-lookup"><span data-stu-id="111f2-206">If your applications are in Office 365, some of the most fundamental baselines you can take measure the time (in milliseconds) from a client computer inside your network, to an egress point, or the point where you leave your network and go out to Office 365.</span></span> <span data-ttu-id="111f2-207">以下是你可以调查和记录的一些有用的基线：</span><span class="sxs-lookup"><span data-stu-id="111f2-207">Here are some helpful baselines that you can investigate and record:</span></span>
  
- <span data-ttu-id="111f2-208">标识客户端计算机和出口点之间的设备，例如代理服务器。</span><span class="sxs-lookup"><span data-stu-id="111f2-208">Identify the devices between your client computer and your egress point, for example, your proxy server.</span></span>
    
  - <span data-ttu-id="111f2-209">你需要了解你的设备，以便你拥有上下文 (IP 地址、设备类型以及) 性能问题的信息。</span><span class="sxs-lookup"><span data-stu-id="111f2-209">You need to know your devices so that you have context (IP addresses, type of device, et cetera) for performance problems that arise.</span></span>
    
  - <span data-ttu-id="111f2-210">代理服务器是常见的出口点，因此你可以检查 Web 浏览器以查看它设置为使用哪些代理服务器（如果有）。</span><span class="sxs-lookup"><span data-stu-id="111f2-210">Proxy servers are common egress points, so you can check your web browser to see what proxy server it is set to use, if any.</span></span>
    
  - <span data-ttu-id="111f2-211">有第三方工具可以发现和映射你的网络，但最安全的了解你的设备的方式是询问你的网络团队成员。</span><span class="sxs-lookup"><span data-stu-id="111f2-211">There are third party tools that can discover and map your network, but the safest way to know your devices is to ask a member of your network team.</span></span>
    
- <span data-ttu-id="111f2-212">确定 ISP (服务提供商) ，记下其联系信息，并询问您有多少电路带宽。</span><span class="sxs-lookup"><span data-stu-id="111f2-212">Identify your Internet service provider (ISP), write down their contact information, and ask how many circuits how much bandwidth you have.</span></span>
    
- <span data-ttu-id="111f2-213">在公司内，确定客户端和出口点之间的设备资源，或标识要与网络问题交谈的紧急联系人。</span><span class="sxs-lookup"><span data-stu-id="111f2-213">Inside your company, identify resources for the devices between your client and the egress point, or identify an emergency contact to talk to about networking issues.</span></span>
    
<span data-ttu-id="111f2-214">以下是使用工具的简单测试可以计算的一些基线：</span><span class="sxs-lookup"><span data-stu-id="111f2-214">Here are some baselines that simple testing with tools can calculate for you:</span></span>
  
- <span data-ttu-id="111f2-215">从客户端计算机到出口点的时间（以毫秒为单位）</span><span class="sxs-lookup"><span data-stu-id="111f2-215">Time from your client computer to your egress point in milliseconds</span></span>
    
- <span data-ttu-id="111f2-216">从出口点到 Office 365 的时间（以毫秒为单位）</span><span class="sxs-lookup"><span data-stu-id="111f2-216">Time from your egress point to Office 365 in milliseconds</span></span>
    
- <span data-ttu-id="111f2-217">在浏览时解析 Office 365 URL 的服务器世界位置</span><span class="sxs-lookup"><span data-stu-id="111f2-217">Location in the world of the server that resolves the URLS for Office 365 when you browse</span></span>
    
- <span data-ttu-id="111f2-218">ISP 的 DNS 解析速度（以毫秒为单位），数据包到达不一致 (网络抖动) 上载和下载时间（以毫秒为单位）</span><span class="sxs-lookup"><span data-stu-id="111f2-218">The speed of your ISP's DNS resolution in milliseconds, inconsistencies in packet arrival (network jitter), upload and download times in milliseconds</span></span>
    
<span data-ttu-id="111f2-219">如果您不熟悉如何执行这些步骤，我们将在本文中详细介绍。</span><span class="sxs-lookup"><span data-stu-id="111f2-219">If you're unfamiliar with how to carry out these steps, we'll go into more detail in this article.</span></span> 
  
## <a name="what-is-a-baseline"></a><span data-ttu-id="111f2-220">什么是基线？</span><span class="sxs-lookup"><span data-stu-id="111f2-220">What is a baseline?</span></span>

<span data-ttu-id="111f2-221">当它变差时，你将知道它的影响，但如果你不知道你的历史性能数据，则不可能有关于它可能会变得有多差以及何时发生的情况的上下文。</span><span class="sxs-lookup"><span data-stu-id="111f2-221">You'll know the impact when it goes bad, but if you don't know your historical performance data, it's not possible to have a context for how bad it may have become, and when.</span></span> <span data-ttu-id="111f2-222">因此，如果没有基线，你缺少解决问题的关键线索：问题框上的图片。</span><span class="sxs-lookup"><span data-stu-id="111f2-222">So without a baseline, you're missing the key clue to solve the puzzle: the picture on the puzzle box.</span></span> <span data-ttu-id="111f2-223">在性能疑难解答中，您需要一个比较  *点*  。</span><span class="sxs-lookup"><span data-stu-id="111f2-223">In performance troubleshooting, you need a point of  *comparison*  .</span></span> <span data-ttu-id="111f2-224">简单性能基线并不难接受。</span><span class="sxs-lookup"><span data-stu-id="111f2-224">Simple performance baselines aren't difficult to take.</span></span> <span data-ttu-id="111f2-225">运营团队可以负责按计划执行这些操作。</span><span class="sxs-lookup"><span data-stu-id="111f2-225">Your Operations team can be tasked with carrying these out on a schedule.</span></span> <span data-ttu-id="111f2-226">例如，假设你的连接如下所示：</span><span class="sxs-lookup"><span data-stu-id="111f2-226">For example, let's say your connection looks like this:</span></span> 
  
![显示客户端、代理和 Office 365 云的基本网络图形。](../media/c6ca7140-09f9-4c2d-a775-dbf2820eaa0c.PNG)
  
<span data-ttu-id="111f2-228">这意味着你已与网络团队核实，并且发现你通过代理服务器离开公司用于 Internet，并且该代理将处理客户端计算机发送到云的所有请求。</span><span class="sxs-lookup"><span data-stu-id="111f2-228">That means you've checked with your network team and found out that you leave your company for the Internet through a proxy server, and that proxy handles all the requests your client computer sends to the cloud.</span></span> <span data-ttu-id="111f2-229">在这种情况下，应绘制列出所有干预设备的简化连接版本。</span><span class="sxs-lookup"><span data-stu-id="111f2-229">In this case, you should draw a simplified version of your connection that lists all the intervening devices.</span></span> <span data-ttu-id="111f2-230">现在，插入可用于测试客户端、 (Internet) 和 Office 365 云网络的出口点之间的性能的工具。</span><span class="sxs-lookup"><span data-stu-id="111f2-230">Now, insert tools that you can use to test the performance between the client, the egress point (where you leave your network for the Internet), and the Office 365 cloud.</span></span>
  
![具有客户端、代理和云以及工具建议 PSPing、TraceTCP 和网络跟踪的基本网络。](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
<span data-ttu-id="111f2-232">这些选项列为"**简单**"和"高级"，因为查找性能数据所需的专业技能量。</span><span class="sxs-lookup"><span data-stu-id="111f2-232">The options are listed as **Simple** and **Advanced** because of the amount of expertise you need in order to find the performance data.</span></span> <span data-ttu-id="111f2-233">与运行 PsPing 和 TraceTCP 等命令行工具相比，网络跟踪需要很长时间。</span><span class="sxs-lookup"><span data-stu-id="111f2-233">A network trace will take a lot of time, compared to running command-line tools like PsPing and TraceTCP.</span></span> <span data-ttu-id="111f2-234">之所以选择这两个命令行工具，是因为它们不使用 ICMP 数据包（将被 Office 365 阻止），并且因为它们提供了离开客户端计算机或代理服务器 (（如果您有权访问) 并到达 Office 365）所花的时间（以毫秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="111f2-234">These two command-line tools were chosen because they don't use ICMP packets, which will be blocked by Office 365, and because they give the time in milliseconds that it takes to leave the client computer, or proxy server (if you have access) and arrive at Office 365.</span></span> <span data-ttu-id="111f2-235">从一台计算机到另一台计算机的每个跃点最终都会有一个时间值，这非常适用于基线！</span><span class="sxs-lookup"><span data-stu-id="111f2-235">Each individual hop from one computer to another will end up with a time value, and that's great for baselines!</span></span> <span data-ttu-id="111f2-236">与重要的是，这些命令行工具允许您在命令中添加端口号，这非常有用，因为 Office 365 通过端口 443 进行通信，端口是安全套接字层和传输层安全性 (SSL 和 TLS) 使用的端口。</span><span class="sxs-lookup"><span data-stu-id="111f2-236">Just as importantly, these command-line tools allow you to add a port number onto the command, this is useful because Office 365 communicates over port 443, which is the port used by Secure Sockets Layer and Transport Layer Security (SSL and TLS).</span></span> <span data-ttu-id="111f2-237">但是，其他第三方工具可能更适用于你的情况。</span><span class="sxs-lookup"><span data-stu-id="111f2-237">However, other third-party tools may be better solutions for your situation.</span></span> <span data-ttu-id="111f2-238">Microsoft 不支持所有这些工具，因此，如果出于某种原因，无法使 PsPing 和 TraceTCP 正常工作，请使用 Netmon 等工具继续网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-238">Microsoft doesn't support all of these tools, so if, for some reason, you can't get PsPing and TraceTCP working, move on to a network trace with a tool like Netmon.</span></span> 
  
<span data-ttu-id="111f2-239">您可以在工作时间之前、在大量使用期间、之后再次采用基准。</span><span class="sxs-lookup"><span data-stu-id="111f2-239">You can take a baseline before business hours, again during heavy use, and then again after hours.</span></span> <span data-ttu-id="111f2-240">这意味着你最终可能拥有一个如下所示的文件夹结构：</span><span class="sxs-lookup"><span data-stu-id="111f2-240">This means you may have a folder structure that looks a bit like this in the end:</span></span>
  
![建议将性能数据组织到文件夹的方式的图形。](../media/13e01ffa-f0f2-4d10-b89d-d5980ec89fae.png)
  
<span data-ttu-id="111f2-242">还应选取文件的命名约定。</span><span class="sxs-lookup"><span data-stu-id="111f2-242">You should also pick a naming convention your files.</span></span> <span data-ttu-id="111f2-243">下面是一些示例：</span><span class="sxs-lookup"><span data-stu-id="111f2-243">Here are some examples:</span></span>
  
- <span data-ttu-id="111f2-244">Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal</span><span class="sxs-lookup"><span data-stu-id="111f2-244">Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal</span></span>
    
- <span data-ttu-id="111f2-245">Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW</span><span class="sxs-lookup"><span data-stu-id="111f2-245">Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW</span></span>
    
- <span data-ttu-id="111f2-246">Feb_08_2015_2pmEST_PerfBaseline_BADPerf</span><span class="sxs-lookup"><span data-stu-id="111f2-246">Feb_08_2015_2pmEST_PerfBaseline_BADPerf</span></span>
    
- <span data-ttu-id="111f2-247">Feb_08_2015_8-30amEST_PerfBaseline_GoodPerf</span><span class="sxs-lookup"><span data-stu-id="111f2-247">Feb_08_2015_8-30amEST_PerfBaseline_GoodPerf</span></span>
    
<span data-ttu-id="111f2-248">有许多不同方法可以这样做，但使用 格式 **\<dateTime\>\<what's happening in the test\>** 是一个很好的起点。</span><span class="sxs-lookup"><span data-stu-id="111f2-248">There are lots of different ways to do this, but using the format **\<dateTime\>\<what's happening in the test\>** is a good place to start.</span></span> <span data-ttu-id="111f2-249">当您稍后尝试解决问题时，对此多做了解将大有帮助。</span><span class="sxs-lookup"><span data-stu-id="111f2-249">Being diligent about this will help a lot when you are trying to troubleshoot issues later.</span></span> <span data-ttu-id="111f2-250">稍后，你可以说"我在 2 月 8 日跟踪了两次，一次显示良好性能，另一次显示不佳，因此我们可以比较它们"。</span><span class="sxs-lookup"><span data-stu-id="111f2-250">Later, you'll be able to say "I took two traces on February 8th, one showed good performance and one showed bad, so we can compare them".</span></span> <span data-ttu-id="111f2-251">这非常有助于进行疑难解答。</span><span class="sxs-lookup"><span data-stu-id="111f2-251">This is extremely helpful for troubleshooting.</span></span> 
  
<span data-ttu-id="111f2-252">你需要有条不理地保留历史基线。</span><span class="sxs-lookup"><span data-stu-id="111f2-252">You need to have an organized way to keep your historical baselines.</span></span> <span data-ttu-id="111f2-253">在此示例中，简单方法生成了三个命令行输出，并且结果收集为屏幕截图，但您可以改为使用网络捕获文件。</span><span class="sxs-lookup"><span data-stu-id="111f2-253">In this example, the simple methods produced three command line outputs and the results were collected as screen shots, but you may have network capture files instead.</span></span> <span data-ttu-id="111f2-254">使用最适合您的方法。</span><span class="sxs-lookup"><span data-stu-id="111f2-254">Use the method that works best for you.</span></span> <span data-ttu-id="111f2-255">存储历史基线，在发现联机服务行为发生变化的点引用这些基线。</span><span class="sxs-lookup"><span data-stu-id="111f2-255">Store your historical baselines and refer to them at points where you notice changes in the behavior of online services.</span></span> 
  
## <a name="why-collect-performance-data-during-a-pilot"></a><span data-ttu-id="111f2-256">为什么在试点期间收集性能数据？</span><span class="sxs-lookup"><span data-stu-id="111f2-256">Why collect performance data during a pilot?</span></span>

<span data-ttu-id="111f2-257">与试用 Office 365 服务期间没有更好的时间来开始建立基线。</span><span class="sxs-lookup"><span data-stu-id="111f2-257">There is no better time to start making baselines than during a pilot of the Office 365 service.</span></span> <span data-ttu-id="111f2-258">你的办公室可能有成千上万个用户、数十万，或者可能有五个用户，但即使只有少量用户，您也可以执行测试来测量性能的波动。</span><span class="sxs-lookup"><span data-stu-id="111f2-258">Your office may have thousands of users, hundreds of thousands, or it may have five, but even with a small number of users, you can perform tests to measure fluctuations in performance.</span></span> <span data-ttu-id="111f2-259">对于大型公司，可以向外规划数千个用户试点 Office 365 的具有代表性的示例，以便了解在问题发生之前可能出现问题的地方。</span><span class="sxs-lookup"><span data-stu-id="111f2-259">In the case of a large company, a representative sample of several hundred users piloting Office 365 can be projected outward to several thousands so you know where issues might arise before they happen.</span></span>
  
<span data-ttu-id="111f2-260">对于小型公司，其中上机意味着所有用户同时访问服务，并且没有试点，请保留性能度量，以便向可能必须解决运行不良问题的人显示数据。</span><span class="sxs-lookup"><span data-stu-id="111f2-260">In the case of a small company, where on-boarding means that all users go to the service at the same time and there is no pilot, keep performance measures so that you have data to show to anyone who may have to troubleshoot a badly performing operation.</span></span> <span data-ttu-id="111f2-261">例如，如果你注意到突然间，可以在上载中型图形（该图形过去很快发生）时在建筑物四处移动。</span><span class="sxs-lookup"><span data-stu-id="111f2-261">For example, if you notice that all of a sudden you can walk around your building in the time it takes to upload a medium-sized graphic where it used to happen very quickly.</span></span>
  
## <a name="how-to-collect-baselines"></a><span data-ttu-id="111f2-262">如何收集基线</span><span class="sxs-lookup"><span data-stu-id="111f2-262">How to collect baselines</span></span>

<span data-ttu-id="111f2-263">对于所有疑难解答计划，至少需要确定以下项：</span><span class="sxs-lookup"><span data-stu-id="111f2-263">For all troubleshooting plans you need to identify these things at a minimum:</span></span>
  
- <span data-ttu-id="111f2-264">你使用的客户端计算机 (计算机或设备的类型、IP 地址以及导致问题) </span><span class="sxs-lookup"><span data-stu-id="111f2-264">The client computer you're using (the type of computer or device, an IP address, and the actions that caused the issue)</span></span>
    
- <span data-ttu-id="111f2-265">例如，客户端计算机所在的世界 (例如，此用户是使用 VPN 连接到网络、远程工作，还是使用公司 Intranet) </span><span class="sxs-lookup"><span data-stu-id="111f2-265">Where the client computer is located in the world (for example, whether this user on a VPN to the network, working remotely, or on the company intranet)</span></span>
    
- <span data-ttu-id="111f2-266">客户端计算机从网络使用的出口点 (ISP 或 Internet 服务提供商的流量离开业务) </span><span class="sxs-lookup"><span data-stu-id="111f2-266">The egress point the client computer uses from your network (the point at which traffic leaves your business for an ISP or the Internet)</span></span>
    
 <span data-ttu-id="111f2-267">你可以从网络管理员找到你的网络布局。</span><span class="sxs-lookup"><span data-stu-id="111f2-267">You can find out the layout of your network from the network administrator.</span></span> <span data-ttu-id="111f2-268">如果你使用小型网络，请看一下将你连接到 Internet 的设备，如果对布局有疑问，请呼叫 ISP。</span><span class="sxs-lookup"><span data-stu-id="111f2-268">If you're on a small network, take a look at the devices connecting you to the Internet, and call your ISP if you have questions about the layout.</span></span> <span data-ttu-id="111f2-269">为参考创建最终布局的图形。</span><span class="sxs-lookup"><span data-stu-id="111f2-269">Create a graphic of the final layout for your reference.</span></span> 
  
<span data-ttu-id="111f2-270">本节分为简单的命令行工具和方法以及更高级的工具选项。</span><span class="sxs-lookup"><span data-stu-id="111f2-270">This section is broken into simple command-line tools and methods, and more advanced tools options.</span></span> <span data-ttu-id="111f2-271">我们将首先介绍简单方法。</span><span class="sxs-lookup"><span data-stu-id="111f2-271">We'll cover simple methods first.</span></span> <span data-ttu-id="111f2-272">但是，如果当前存在性能问题，应跳转到高级方法并尝试示例性能疑难解答行动计划。</span><span class="sxs-lookup"><span data-stu-id="111f2-272">But if you've got a performance problem right now, you should jump to advanced methods and try out the sample performance-troubleshooting action plan.</span></span>
  
### <a name="simple-methods"></a><span data-ttu-id="111f2-273">简单方法</span><span class="sxs-lookup"><span data-stu-id="111f2-273">Simple methods</span></span>

<span data-ttu-id="111f2-274">这些简单方法的目标是了解、了解并正确存储一段时间的简单性能基准，以便你了解 Office 365 性能。</span><span class="sxs-lookup"><span data-stu-id="111f2-274">The objective of these simple methods is to learn to take, understand, and properly store simple performance baselines over time so that you are informed about Office 365 performance.</span></span> <span data-ttu-id="111f2-275">下面是非常简单的简单图表，如您之前所见：</span><span class="sxs-lookup"><span data-stu-id="111f2-275">Here's the very simple diagram for simple, as you've seen before:</span></span>
  
![具有客户端、代理和云以及工具建议 PSPing、TraceTCP 和网络跟踪的基本网络。](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
> [!NOTE]
> <span data-ttu-id="111f2-277">TraceTCP 包括在此屏幕截图中，因为它是一个有用的工具，可用于显示请求到达目标需要的时间（以毫秒为单位），以及从一台计算机到下一台计算机的网络跃点数或连接数。</span><span class="sxs-lookup"><span data-stu-id="111f2-277">TraceTCP is included in this screen shot because it's a useful tool for showing, in milliseconds, how long a request takes to process, and how many network hops, or connections from one computer to the next, that the request takes to reach a destination.</span></span> <span data-ttu-id="111f2-278">TraceTCP 还可以提供跃点期间所使用的服务器的名称，这可用于支持中的 Microsoft Office 365 疑难解答程序。</span><span class="sxs-lookup"><span data-stu-id="111f2-278">TraceTCP can also give the names of servers used during hops, which can be useful to a Microsoft Office 365 troubleshooter in Support.</span></span> <span data-ttu-id="111f2-279">> TraceTCP 命令可能非常简单，例如：>>  `tracetcp.exe outlook.office365.com:443` 请记住在命令中包括端口号！</span><span class="sxs-lookup"><span data-stu-id="111f2-279">> TraceTCP commands can be very simple, such as: >  `tracetcp.exe outlook.office365.com:443`> Remember to include the port number in the command!</span></span><span data-ttu-id="111f2-280"> > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) 是一种免费下载，但依赖于 Wincap。</span><span class="sxs-lookup"><span data-stu-id="111f2-280"> > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) is a free download, but relies on Wincap.</span></span> <span data-ttu-id="111f2-281">Wincap 是一种由 Netmon 也使用和安装的工具。</span><span class="sxs-lookup"><span data-stu-id="111f2-281">Wincap is a tool that is also used and installed by Netmon.</span></span> <span data-ttu-id="111f2-282">我们还在高级方法部分中使用 Netmon。</span><span class="sxs-lookup"><span data-stu-id="111f2-282">We also use Netmon in the advanced methods section.</span></span> 
  
 <span data-ttu-id="111f2-283">如果有多个办公室，则还需要在每个位置保留来自客户端的一组数据。</span><span class="sxs-lookup"><span data-stu-id="111f2-283">If you have multiple offices, you'll need to keep a set of data from a client in each of those locations as well.</span></span> <span data-ttu-id="111f2-284">此测试测量延迟，在这种情况下，是一个数字值，用于描述客户端向 Office 365 发送请求与 Office 365 响应请求之间的时间量。</span><span class="sxs-lookup"><span data-stu-id="111f2-284">This test measures latency, which, in this case, is a number value that describes the amount of time between a client sending a request to Office 365, and Office 365 responding to the request.</span></span> <span data-ttu-id="111f2-285">测试源自客户端计算机上的域内部，并查找测量从网络内部、通过出口点、通过 Internet 到 Office 365 以及返回的往返行程。</span><span class="sxs-lookup"><span data-stu-id="111f2-285">The testing originates inside your domain on a client computer, and looks to measure a round trip from inside your network, out through an egress point, across the Internet to Office 365, and back.</span></span> 
  
<span data-ttu-id="111f2-286">有多种方式可以处理出口点，在这种情况下，是代理服务器。</span><span class="sxs-lookup"><span data-stu-id="111f2-286">There are a few ways to deal with the egress point, in this case, the proxy server.</span></span> <span data-ttu-id="111f2-287">你可以跟踪 1 到 2，然后跟踪 2 到 3，然后以毫秒为单位添加数字，以得到网络边缘的最终总计。</span><span class="sxs-lookup"><span data-stu-id="111f2-287">You can either trace from 1 to 2 and then 2 to 3, and then add the numbers in milliseconds to get a final total to the edge of your network.</span></span> <span data-ttu-id="111f2-288">或者，可以将连接配置为绕过 Office 365 地址的代理。</span><span class="sxs-lookup"><span data-stu-id="111f2-288">Or, you can configure the connection to bypass the proxy for Office 365 addresses.</span></span> <span data-ttu-id="111f2-289">在具有防火墙、反向代理或这两者的组合的较大网络中，您可能需要在代理服务器上创建允许流量通过大量 URL 的例外。</span><span class="sxs-lookup"><span data-stu-id="111f2-289">In a larger network with a firewall, reverse proxy, or some combination of the two, you may need to make exceptions on the proxy server that will allow traffic to pass for a lot of URLs.</span></span> <span data-ttu-id="111f2-290">有关 Office 365 使用的终结点列表，请参阅 [Office 365 URL 和 IP 地址范围](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2)。</span><span class="sxs-lookup"><span data-stu-id="111f2-290">For the list of endpoints used by Office 365, see [Office 365 URLs and IP address ranges](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span> <span data-ttu-id="111f2-291">如果你有身份验证代理，请首先测试以下各项的异常：</span><span class="sxs-lookup"><span data-stu-id="111f2-291">If you have an authenticating proxy, begin by testing exceptions for the following:</span></span>
  
- <span data-ttu-id="111f2-292">端口 80 和 443</span><span class="sxs-lookup"><span data-stu-id="111f2-292">Ports 80 and 443</span></span>
    
- <span data-ttu-id="111f2-293">TCP 和 HTTPs</span><span class="sxs-lookup"><span data-stu-id="111f2-293">TCP and HTTPs</span></span>
    
- <span data-ttu-id="111f2-294">出站到以下任一 URL 的连接：</span><span class="sxs-lookup"><span data-stu-id="111f2-294">Connections that are outbound to any of these URLs:</span></span>
    
- <span data-ttu-id="111f2-295">\*.microsoftonline.com</span><span class="sxs-lookup"><span data-stu-id="111f2-295">\*.microsoftonline.com</span></span>
    
- <span data-ttu-id="111f2-296">\*.microsoftonline-p.com</span><span class="sxs-lookup"><span data-stu-id="111f2-296">\*.microsoftonline-p.com</span></span>
    
- <span data-ttu-id="111f2-297">\*.sharepoint.com</span><span class="sxs-lookup"><span data-stu-id="111f2-297">\*.sharepoint.com</span></span>
    
- <span data-ttu-id="111f2-298">\*.outlook.com</span><span class="sxs-lookup"><span data-stu-id="111f2-298">\*.outlook.com</span></span>
    
- <span data-ttu-id="111f2-299">\*.lync.com</span><span class="sxs-lookup"><span data-stu-id="111f2-299">\*.lync.com</span></span>
    
- <span data-ttu-id="111f2-300">osub.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="111f2-300">osub.microsoft.com</span></span>
    
<span data-ttu-id="111f2-301">需要允许所有用户访问这些地址，而无需任何代理干扰或身份验证。</span><span class="sxs-lookup"><span data-stu-id="111f2-301">All users need to be allowed to get to these addresses without any proxy interference or authentication.</span></span> <span data-ttu-id="111f2-302">在较小的网络中，应在 Web 浏览器中将其添加到代理旁路列表。</span><span class="sxs-lookup"><span data-stu-id="111f2-302">On a smaller network, you should add these to your proxy bypass list in your web browser.</span></span> 
  
<span data-ttu-id="111f2-303">若要将其添加到你的代理旁路列表Internet Explorer， **请转到工具** \> **Internet 选项** \> **连接** \> **LAN 设置** \> **高级**。</span><span class="sxs-lookup"><span data-stu-id="111f2-303">To add these to your proxy bypass list in Internet Explorer, go to **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**.</span></span> <span data-ttu-id="111f2-304">高级选项卡也是找到代理服务器和代理服务器端口的地方。</span><span class="sxs-lookup"><span data-stu-id="111f2-304">The advanced tab is also where you will find your proxy server and proxy server port.</span></span> <span data-ttu-id="111f2-305">你可能需要单击"为 **LAN** 使用代理服务器"复选框，以访问" **高级"** 按钮。</span><span class="sxs-lookup"><span data-stu-id="111f2-305">You may need to click the checkbox **Use a proxy server for your LAN**, to access the **Advanced** button.</span></span> <span data-ttu-id="111f2-306">您需要确保选中"对本地 **地址绕过** 代理服务器"。</span><span class="sxs-lookup"><span data-stu-id="111f2-306">You'll want to make sure that **Bypass proxy server for local addresses** is checked.</span></span> <span data-ttu-id="111f2-307">单击" **高级"** 后，你将看到一个文本框，可以在其中输入例外。</span><span class="sxs-lookup"><span data-stu-id="111f2-307">Once you click **Advanced**, you'll see a text box where you can enter exceptions.</span></span> <span data-ttu-id="111f2-308">用分号分隔上面列出的通配符 URL，例如：</span><span class="sxs-lookup"><span data-stu-id="111f2-308">Separate the wildcard URLs listed above with semi-colons, for example:</span></span>
  
<span data-ttu-id="111f2-309">\*.microsoftonline.com; \*.sharepoint.com</span><span class="sxs-lookup"><span data-stu-id="111f2-309">\*.microsoftonline.com; \*.sharepoint.com</span></span>
  
<span data-ttu-id="111f2-310">绕过代理后，应该能够直接在 Office 365 URL 上使用 ping 或 PsPing。</span><span class="sxs-lookup"><span data-stu-id="111f2-310">Once you bypass your proxy, you should be able to use ping or PsPing directly on an Office 365 URL.</span></span> <span data-ttu-id="111f2-311">下一步是测试 **ping** outlook.office365.com 。</span><span class="sxs-lookup"><span data-stu-id="111f2-311">The next step will be to test ping **outlook.office365.com**.</span></span> <span data-ttu-id="111f2-312">或者，如果你使用的是 PsPing 或其他工具，该工具将允许向命令提供端口号，PsPing 针对 **portal.microsoftonline.com:443** 查看平均往返时间（以毫秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="111f2-312">Or, if you're using PsPing or another tool that will let you supply a port number to the command, PsPing against **portal.microsoftonline.com:443** to see the average round trip time in milliseconds.</span></span> 
  
<span data-ttu-id="111f2-313">往返时间（即 RTT）是一个数字值，它测量向服务器（如 outlook.office365.com）发送 HTTP 请求并返回确认服务器知道您这样做的响应所花的时间。</span><span class="sxs-lookup"><span data-stu-id="111f2-313">The round trip time, or RTT, is a number value that measures how long it takes to send a HTTP request to a server like outlook.office365.com and get a response back that acknowledges the server knows that you did it.</span></span> <span data-ttu-id="111f2-314">有时，你将看到此缩写为 RTT。</span><span class="sxs-lookup"><span data-stu-id="111f2-314">You'll sometimes see this abbreviated as RTT.</span></span> <span data-ttu-id="111f2-315">这应该是一个相对短的时间。</span><span class="sxs-lookup"><span data-stu-id="111f2-315">This should be a relatively short amount of time.</span></span>
  
<span data-ttu-id="111f2-316">您必须使用 [PSPing](/sysinternals/downloads/psping) 或其他不使用 Office 365 阻止的 ICMP 数据包的工具才能执行此测试。</span><span class="sxs-lookup"><span data-stu-id="111f2-316">You have to use [PSPing](/sysinternals/downloads/psping) or another tool that does not use ICMP packets which are blocked by Office 365 in order to do this test.</span></span> 
  
 <span data-ttu-id="111f2-317">**如何使用 PsPing 直接从 Office 365 URL 获取总往返时间（以毫秒为单位）**</span><span class="sxs-lookup"><span data-stu-id="111f2-317">**How to use PsPing to get an overall round trip time in milliseconds directly from an Office 365 URL**</span></span>
  
1. <span data-ttu-id="111f2-318">通过完成以下步骤运行提升的命令提示符：</span><span class="sxs-lookup"><span data-stu-id="111f2-318">Run an elevated command prompt by completing these steps:</span></span>
    
1. <span data-ttu-id="111f2-319">单击“**开始**”。</span><span class="sxs-lookup"><span data-stu-id="111f2-319">Click **Start**.</span></span>
    
2. <span data-ttu-id="111f2-320">在" **开始搜索"** 框中，键入 cmd，然后按 Ctrl+Shift+Enter。</span><span class="sxs-lookup"><span data-stu-id="111f2-320">In the **Start Search** box, type cmd, and then press CTRL+SHIFT+ENTER.</span></span>
    
3. <span data-ttu-id="111f2-321">如果出现“**用户帐户控制**”对话框，请确认所显示的是您想要执行的操作，然后单击“**继续**”。</span><span class="sxs-lookup"><span data-stu-id="111f2-321">If the **User Account Control** dialog box appears, confirm that the action it displays is what you want, and then click **Continue**.</span></span>
    
2. <span data-ttu-id="111f2-322">导航到安装此工具的文件夹 (安装 PsPing) 并测试这些 Office 365 URL：</span><span class="sxs-lookup"><span data-stu-id="111f2-322">Navigate to the folder where the tool (in this case PsPing) is installed and test these Office 365 URLs:</span></span>
    
  - <span data-ttu-id="111f2-323">psping portal.office.com:443</span><span class="sxs-lookup"><span data-stu-id="111f2-323">psping portal.office.com:443</span></span>
    
  - <span data-ttu-id="111f2-324">psping microsoft-my.sharepoint.com:443</span><span class="sxs-lookup"><span data-stu-id="111f2-324">psping microsoft-my.sharepoint.com:443</span></span>
    
  - <span data-ttu-id="111f2-325">psping outlook.office365.com:443</span><span class="sxs-lookup"><span data-stu-id="111f2-325">psping outlook.office365.com:443</span></span>
    
  - <span data-ttu-id="111f2-326">psping www.yammer.com:443</span><span class="sxs-lookup"><span data-stu-id="111f2-326">psping www.yammer.com:443</span></span>
    
    ![将进入端口 443 microsoft-my.sharepoint.com PSPing 命令。](../media/3258f620-4513-4e82-95c9-06b387fc3a82.PNG)
  
<span data-ttu-id="111f2-328">请务必包含端口号 443。</span><span class="sxs-lookup"><span data-stu-id="111f2-328">Be sure to include the port number of 443.</span></span> <span data-ttu-id="111f2-329">请记住，Office 365 适用于加密通道。</span><span class="sxs-lookup"><span data-stu-id="111f2-329">Remember that Office 365 works on an encrypted channel.</span></span> <span data-ttu-id="111f2-330">如果没有端口号的 PsPing，请求将失败。</span><span class="sxs-lookup"><span data-stu-id="111f2-330">If you PsPing without the port number, your request will fail.</span></span> <span data-ttu-id="111f2-331">Ping 简短列表后，查找"毫秒数" (毫秒) 。</span><span class="sxs-lookup"><span data-stu-id="111f2-331">Once you've pinged your short list, look for the Average time in milliseconds (ms).</span></span> <span data-ttu-id="111f2-332">这就是你想要录制的！</span><span class="sxs-lookup"><span data-stu-id="111f2-332">That is what you want to record!</span></span>
  
![此图显示客户端代理 PSPing 的图示，往返时间为 2.8 毫秒。](../media/96901aea-1093-4f1b-b5a3-6078e9035e6c.png)
  
<span data-ttu-id="111f2-334">如果您不熟悉代理绕过，并且希望分步执行一些操作，您需要首先查找代理服务器的名称。</span><span class="sxs-lookup"><span data-stu-id="111f2-334">If you're not familiar with proxy bypass, and prefer to take things step-by-step, you need to first find out the name of your proxy server.</span></span> <span data-ttu-id="111f2-335">In Internet Explorer go to **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**.</span><span class="sxs-lookup"><span data-stu-id="111f2-335">In Internet Explorer go to **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**.</span></span> <span data-ttu-id="111f2-336">在 **"** 高级"选项卡中，你将看到列出的代理服务器。</span><span class="sxs-lookup"><span data-stu-id="111f2-336">The **Advanced** tab is where you will see your proxy server listed.</span></span> <span data-ttu-id="111f2-337">通过完成此任务，在命令提示符下 Ping 该代理服务器：</span><span class="sxs-lookup"><span data-stu-id="111f2-337">Ping that proxy server at a command prompt by completing this task:</span></span> 
  
 <span data-ttu-id="111f2-338">**Ping 代理服务器并获取第 1 阶段到第 2 阶段的往返值（以毫秒为单位）**</span><span class="sxs-lookup"><span data-stu-id="111f2-338">**To ping the proxy server and get a round trip value in milliseconds for stage 1 to 2**</span></span>
  
1. <span data-ttu-id="111f2-339">通过完成以下步骤运行提升的命令提示符：</span><span class="sxs-lookup"><span data-stu-id="111f2-339">Run an elevated command prompt by completing these steps:</span></span>
    
1. <span data-ttu-id="111f2-340">单击“**开始**”。</span><span class="sxs-lookup"><span data-stu-id="111f2-340">Click **Start**.</span></span>
    
2. <span data-ttu-id="111f2-341">在" **开始搜索"** 框中，键入 cmd，然后按 Ctrl+Shift+Enter。</span><span class="sxs-lookup"><span data-stu-id="111f2-341">In the **Start Search** box, type cmd, and then press CTRL+SHIFT+ENTER.</span></span>
    
3. <span data-ttu-id="111f2-342">如果出现“**用户帐户控制**”对话框，请确认所显示的是您想要执行的操作，然后单击“**继续**”。</span><span class="sxs-lookup"><span data-stu-id="111f2-342">If the **User Account Control** dialog box appears, confirm that the action it displays is what you want, and then click **Continue**.</span></span>
    
2. <span data-ttu-id="111f2-343">键入 \<the name of the proxy server your browser uses, or the IP address of the proxy server\> ping，然后按 Enter。</span><span class="sxs-lookup"><span data-stu-id="111f2-343">Type ping \<the name of the proxy server your browser uses, or the IP address of the proxy server\> and then press ENTER.</span></span> <span data-ttu-id="111f2-344">如果已安装 PsPing 或其他一些工具，可以选择改为使用此工具。</span><span class="sxs-lookup"><span data-stu-id="111f2-344">If you have PsPing, or some other tool, installed, you can choose to use that tool instead.</span></span> 
    
    <span data-ttu-id="111f2-345">命令可能如以下任意示例所示：</span><span class="sxs-lookup"><span data-stu-id="111f2-345">Your command may look like any of these examples:</span></span> 
    
  - <span data-ttu-id="111f2-346">ping ourproxy.ourdomain.industry.business.com</span><span class="sxs-lookup"><span data-stu-id="111f2-346">ping ourproxy.ourdomain.industry.business.com</span></span>
    
  - <span data-ttu-id="111f2-347">ping 155.55.121.55</span><span class="sxs-lookup"><span data-stu-id="111f2-347">ping 155.55.121.55</span></span>
    
  - <span data-ttu-id="111f2-348">ping ourproxy</span><span class="sxs-lookup"><span data-stu-id="111f2-348">ping ourproxy</span></span>
    
  - <span data-ttu-id="111f2-349">psping ourproxy.ourdomain.industry.business.com:80</span><span class="sxs-lookup"><span data-stu-id="111f2-349">psping ourproxy.ourdomain.industry.business.com:80</span></span>
    
  - <span data-ttu-id="111f2-350">psping 155.55.121.55：80</span><span class="sxs-lookup"><span data-stu-id="111f2-350">psping 155.55.121.55:80</span></span>
    
  - <span data-ttu-id="111f2-351">psping ourproxy：80</span><span class="sxs-lookup"><span data-stu-id="111f2-351">psping ourproxy:80</span></span>
    
3. <span data-ttu-id="111f2-352">当跟踪停止发送测试数据包时，你将得到一个小摘要，其中列出了平均值（以毫秒为单位），这是您寻找的值。</span><span class="sxs-lookup"><span data-stu-id="111f2-352">When the trace stops sending test packets, you'll get a small summary that lists an average, in milliseconds, and that's the value you're after.</span></span> <span data-ttu-id="111f2-353">拍摄提示的屏幕截图，然后使用命名约定保存它。</span><span class="sxs-lookup"><span data-stu-id="111f2-353">Take a screen shot of the prompt and save it using your naming convention.</span></span> <span data-ttu-id="111f2-354">此时，使用值填充图表可能也有所帮助。</span><span class="sxs-lookup"><span data-stu-id="111f2-354">At this point it may also help to fill in the diagram with the value.</span></span>
    
<span data-ttu-id="111f2-355">也许在凌晨你已进行跟踪，你的客户端可以快速访问代理 (或任何进入 Internet) 出口。</span><span class="sxs-lookup"><span data-stu-id="111f2-355">Maybe you've taken a trace in the early morning, and your client can get to the proxy (or whatever egress server exits to the Internet) quickly.</span></span> <span data-ttu-id="111f2-356">在这种情况下，你的数字可能如下所示：</span><span class="sxs-lookup"><span data-stu-id="111f2-356">In this case, your numbers may look like this:</span></span>
  
![显示从客户端到代理的往返时间为 2.8 毫秒的图形。](../media/1bd03544-23fc-47d4-bbae-c1feb466a5d8.PNG)
  
<span data-ttu-id="111f2-358">如果客户端计算机是有权访问代理 (或出口) 服务器的少数计算机之一，则可以通过远程连接到该计算机来运行下一段测试，从该计算机运行 PsPing 到 Office 365 URL 的命令提示符。</span><span class="sxs-lookup"><span data-stu-id="111f2-358">If your client computer is one of the select few with access to the proxy (or egress) server, you can run the next leg of the test by remotely connecting to that computer, running the command prompt to PsPing to an Office 365 URL from there.</span></span> <span data-ttu-id="111f2-359">如果无法访问该计算机，可以联系网络资源，获取下一段帮助，然后通过此方式获取准确号码。</span><span class="sxs-lookup"><span data-stu-id="111f2-359">If you don't have access to that computer, you can contact your network resources for help with the next leg and get exact numbers that way.</span></span> <span data-ttu-id="111f2-360">如果不可能，请针对 Office 365 URL 执行 PsPing，并将其与代理服务器的 PsPing 或 Ping 时间进行比较。</span><span class="sxs-lookup"><span data-stu-id="111f2-360">If that's not possible, take a PsPing against the Office 365 URL in question and compare it to the PsPing or Ping time against your proxy server.</span></span> 
  
<span data-ttu-id="111f2-361">例如，如果从客户端到 Office 365 URL 的时间为 51.84 毫秒，且从客户端到代理 (或出口点) 的时间为 2.8 毫秒，那么从 Office 365 出口有 49.04 毫秒。</span><span class="sxs-lookup"><span data-stu-id="111f2-361">For example, if you have 51.84 milliseconds from the client to the Office 365 URL, and you have 2.8 milliseconds from the client to the proxy (or egress point), then you have 49.04 milliseconds from the egress to Office 365.</span></span> <span data-ttu-id="111f2-362">同样，如果在一天的高度内从客户端到代理的 PsPing 为 12.25 毫秒，从客户端到 Office 365 URL 的 PsPing 为 62.01 毫秒，则代理到 Office 365 URL 的平均值为 49.76 毫秒。</span><span class="sxs-lookup"><span data-stu-id="111f2-362">Likewise, if you have a PsPing of 12.25 milliseconds from the client to the proxy during the height of the day, and 62.01 milliseconds from the client to the Office 365 URL, then your average value for the proxy egress to the Office 365 URL is 49.76 milliseconds.</span></span>
  
![显示客户端与 Office 365 旁边的客户端到代理的 ping 的其他图形（以毫秒为单位），以便可以减去这些值。](../media/cd764e77-5154-44ba-a5cd-443a628eb2d9.PNG)
  
<span data-ttu-id="111f2-364">在疑难解答方面，你可能发现一些有趣的内容就是保留这些基线。</span><span class="sxs-lookup"><span data-stu-id="111f2-364">In terms of troubleshooting, you may find something interesting just from keeping these baselines.</span></span> <span data-ttu-id="111f2-365">例如，如果发现从代理或出口指向 Office 365 URL 的延迟通常有约 40 到 59 毫秒， 并且让客户端代理或出口点延迟大约 3 到 7 毫秒 (具体取决于在) 这一天中的网络通信量，如果最后三个代理或出口基线显示延迟为 45 毫秒，则你会知道存在问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-365">For example, if you find that you generally have about 40 to 59 milliseconds of latency from the proxy or egress point to the Office 365 URL, and have a client to proxy or egress point latency of about 3 to 7 milliseconds (depending on the amount network traffic you're seeing during that time of day) then you will surely know something is problematic if your last three client to proxy or egress baselines show a latency of 45 milliseconds.</span></span>
  
### <a name="advanced-methods"></a><span data-ttu-id="111f2-366">高级方法</span><span class="sxs-lookup"><span data-stu-id="111f2-366">Advanced methods</span></span>

<span data-ttu-id="111f2-367">如果确实想知道对 Office 365 的 Internet 请求发生了什么，则需要熟悉网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-367">If you really want to know what is happening with your Internet requests to Office 365, you need to become familiar with network traces.</span></span> <span data-ttu-id="111f2-368">对于这些跟踪，您喜欢哪些工具并不重要，HTTPWatch、Netmon、Message Analyzer、Wireshark、Fiddler、开发人员仪表板工具或任何其他工具只要该工具可以捕获和筛选网络流量就可以执行。</span><span class="sxs-lookup"><span data-stu-id="111f2-368">It does not matter which tools you prefer for these traces, HTTPWatch, Netmon, Message Analyzer, Wireshark, Fiddler, Developer Dashboard tool or any other will do as long as that tool can capture and filter network traffic.</span></span> <span data-ttu-id="111f2-369">你将在此部分中看到，运行多个这些工具以更完整地了解问题会非常有益。</span><span class="sxs-lookup"><span data-stu-id="111f2-369">You'll see in this section that it's beneficial to run more than one of these tools to get a more complete picture of the problem.</span></span> <span data-ttu-id="111f2-370">在测试时，其中某些工具还自行充当代理。</span><span class="sxs-lookup"><span data-stu-id="111f2-370">When you're testing, some of these tools also act as proxies in their own right.</span></span> <span data-ttu-id="111f2-371">配套文章 Performance [troubleshooting plan for Office 365](performance-troubleshooting-plan.md)中使用的工具包括[Netmon 3.4、HTTPWatch](https://www.microsoft.com/download/details.aspx?id=4865)或[WireShark](https://www.wireshark.org/)。 [](https://www.httpwatch.com/download/)</span><span class="sxs-lookup"><span data-stu-id="111f2-371">Tools used in the companion article, [Performance troubleshooting plan for Office 365](performance-troubleshooting-plan.md), include [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865), [HTTPWatch](https://www.httpwatch.com/download/), or [WireShark](https://www.wireshark.org/).</span></span>
  
<span data-ttu-id="111f2-372">采用性能基准是此方法的简单部分，许多步骤与解决性能问题时的步骤相同。</span><span class="sxs-lookup"><span data-stu-id="111f2-372">Taking a performance baseline is the simple part of this method, and many of the steps are the same as when you troubleshoot a performance issue.</span></span> <span data-ttu-id="111f2-373">创建性能基线的更高级方法需要您采用和存储网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-373">The more advanced methods of creating baselines for performance requires you to take and store network traces.</span></span> <span data-ttu-id="111f2-374">本文中的大多数示例都使用 SharePoint Online，但您应该制定您订阅测试和记录的 Office 365 服务中的常见操作列表。</span><span class="sxs-lookup"><span data-stu-id="111f2-374">Most of the examples in this article use SharePoint Online, but you should develop a list of common actions across the Office 365 services to which you subscribe to test and record.</span></span> <span data-ttu-id="111f2-375">下面是一个比较基准示例：</span><span class="sxs-lookup"><span data-stu-id="111f2-375">Here is a baseline example:</span></span>
  
- <span data-ttu-id="111f2-376">SPO 的基线列表 - \*\* 步骤 1：\*\* 浏览 SPO 网站的主页，然后执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-376">Baseline list for SPO - \*\* Step 1: \*\* Browse the home page of the SPO website and do a network trace.</span></span> <span data-ttu-id="111f2-377">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-377">Save the trace.</span></span> 
    
- <span data-ttu-id="111f2-378">SPO 的基线列表 - 步骤 **2：** 搜索术语 (例如公司名称) 通过企业级搜索执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-378">Baseline list for SPO - **Step 2:** Search for a term (such as your company name) via Enterprise Search and do a network trace.</span></span> <span data-ttu-id="111f2-379">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-379">Save the trace.</span></span> 
    
- <span data-ttu-id="111f2-380">SPO 的基线列表 - **步骤 3：** 将大文件上载到 SharePoint Online 文档库并执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-380">Baseline list for SPO - **Step 3:** Upload a large file to a SharePoint Online document library and do a network trace.</span></span> <span data-ttu-id="111f2-381">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-381">Save the trace.</span></span> 
    
- <span data-ttu-id="111f2-382">SPO 的基线列表 - **步骤 4：** 浏览 OneDrive 网站的主页并执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-382">Baseline list for SPO - **Step 4:** Browse the home page of the OneDrive website and do a network trace.</span></span> <span data-ttu-id="111f2-383">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-383">Save the trace.</span></span> 
    
<span data-ttu-id="111f2-384">此列表应包括用户对 SharePoint Online 采取的最重要的常见操作。</span><span class="sxs-lookup"><span data-stu-id="111f2-384">This list should include the most important common actions that users take against SharePoint Online.</span></span> <span data-ttu-id="111f2-385">请注意，为了跟踪到 OneDrive for Business，最后一步构建了 SharePoint Online 主页 (（通常由公司) 和 OneDrive for Business 主页（很少自定义）自定义的负载之间的比较。</span><span class="sxs-lookup"><span data-stu-id="111f2-385">Notice that the last step, to trace going to OneDrive for Business, builds-in a comparison between the load of the SharePoint Online home page (which is often customized by companies) and OneDrive for Business home page, which is seldom customized.</span></span> <span data-ttu-id="111f2-386">对于加载缓慢的 SharePoint Online 网站，这是一个非常基本的测试。</span><span class="sxs-lookup"><span data-stu-id="111f2-386">This is a very basic test when it comes to a slow-loading SharePoint Online site.</span></span> <span data-ttu-id="111f2-387">可以在测试中生成此差异的记录。</span><span class="sxs-lookup"><span data-stu-id="111f2-387">You can build a record of this difference into your testing.</span></span>
  
<span data-ttu-id="111f2-388">如果您正解决性能问题，则许多步骤与执行基线时的步骤相同。</span><span class="sxs-lookup"><span data-stu-id="111f2-388">If you are in the middle of a performance problem, many of the steps are the same as when taking a baseline.</span></span> <span data-ttu-id="111f2-389">网络跟踪变得至关重要，因此接下来我们将如何处理重要跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-389">Network traces become critical, so we'll handle  *how*  to take the important traces next.</span></span> 
  
<span data-ttu-id="111f2-390">若要解决性能问题，  *现在*  您需要在遇到性能问题时进行跟踪。</span><span class="sxs-lookup"><span data-stu-id="111f2-390">To tackle a performance problem,  *right now*  , you need to be taking a trace at the time you are experiencing the performance issue.</span></span> <span data-ttu-id="111f2-391">您需要具有用于收集日志的正确工具，并且您需要一个行动计划，即，为收集可能的最佳信息而要采取的疑难解答操作列表。</span><span class="sxs-lookup"><span data-stu-id="111f2-391">You need to have the proper tools available to gather logs, and you need an action plan, that is, a list of troubleshooting actions to take to gather the best information that you can.</span></span> <span data-ttu-id="111f2-392">首先要记录测试的日期和时间，以便文件可以保存在反映时间的文件夹中。</span><span class="sxs-lookup"><span data-stu-id="111f2-392">The first thing to do is record the date and time of the test so that the files can be saved in a folder that reflect the timing.</span></span> <span data-ttu-id="111f2-393">接下来，缩小到问题步骤本身。</span><span class="sxs-lookup"><span data-stu-id="111f2-393">Next, narrow down to the problem steps themselves.</span></span> <span data-ttu-id="111f2-394">这些是你将用于测试的确切步骤。</span><span class="sxs-lookup"><span data-stu-id="111f2-394">These are the exact steps you will use for testing.</span></span> <span data-ttu-id="111f2-395">不要忘记基础知识：如果问题仅与 Outlook 有关，请务必记录问题行为仅在一个 Office 365 服务中发生。</span><span class="sxs-lookup"><span data-stu-id="111f2-395">Don't forget the basics: if the issue is only with Outlook, make sure to record that the problem behavior happens in only one Office 365 service.</span></span> <span data-ttu-id="111f2-396">缩小此问题的范围有助于专注于可以解决的问题。</span><span class="sxs-lookup"><span data-stu-id="111f2-396">Narrowing down the scope of this issue will help you to focus on something you can resolve.</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="111f2-397">另请参阅</span><span class="sxs-lookup"><span data-stu-id="111f2-397">See also</span></span>

[<span data-ttu-id="111f2-398">管理 Office 365 终结点</span><span class="sxs-lookup"><span data-stu-id="111f2-398">Managing Office 365 endpoints</span></span>](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)