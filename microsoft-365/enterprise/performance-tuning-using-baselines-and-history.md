---
title: 使用基线和性能历史记录优化 Office 365 性能
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 8/31/2017
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom:
- Adm_O365
- seo-marvel-apr2020
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 1492cb94-bd62-43e6-b8d0-2a61ed88ebae
ms.collection:
- M365-security-compliance
- Ent_O365
- SPO_Content
description: 了解如何检查客户端计算机连接的历史记录，以帮助您及早检测新兴问题。
ms.openlocfilehash: 2337b14542f894e9a62037b2f032632147e45e09
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/14/2020
ms.locfileid: "46687852"
---
# <a name="office-365-performance-tuning-using-baselines-and-performance-history"></a><span data-ttu-id="1e354-103">使用基线和性能历史记录优化 Office 365 性能</span><span class="sxs-lookup"><span data-stu-id="1e354-103">Office 365 performance tuning using baselines and performance history</span></span>

<span data-ttu-id="1e354-104">有几种简单的方法可以检查 Office 365 与您的业务之间的连接性能，让您能够建立连接的粗略基准。</span><span class="sxs-lookup"><span data-stu-id="1e354-104">There are some simple ways to check the connection performance between Office 365 and your business that will let you establish a rough baseline of your connectivity.</span></span> <span data-ttu-id="1e354-105">了解客户端计算机连接的性能历史记录可帮助您及早检测新兴问题，识别和预测问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-105">Knowing the performance history of your client computer connections can help you detect emerging issues early, identify, and predict problems.</span></span>
  
<span data-ttu-id="1e354-106">如果您没有使用过性能问题，本文旨在帮助您考虑一些常见问题，如如何知道您所看到的问题是性能问题而不是 Office 365 服务事件？</span><span class="sxs-lookup"><span data-stu-id="1e354-106">If you're not used to working on performance issues, this article is designed to help you consider some common questions, like How do you know the problem you're seeing is a performance issue and not an Office 365 service incident?</span></span> <span data-ttu-id="1e354-107">如何规划最佳性能、长期？</span><span class="sxs-lookup"><span data-stu-id="1e354-107">How can you plan for good performance, long term?</span></span> <span data-ttu-id="1e354-108">如何能够保持对性能的关注？</span><span class="sxs-lookup"><span data-stu-id="1e354-108">How can you keep an eye on performance?</span></span> <span data-ttu-id="1e354-109">如果您的团队或客户端在使用 Office 365 时发现性能低，并且您对上述任何问题感到疑惑，请继续阅读。</span><span class="sxs-lookup"><span data-stu-id="1e354-109">If your team or clients are seeing slow performance while using Office 365, and you wonder about any of these questions, read on.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="1e354-110">**你的客户端和 Office 365 现在是否有性能问题？**</span><span class="sxs-lookup"><span data-stu-id="1e354-110">**Have a performance issue between your client and Office 365 right now?**</span></span> <span data-ttu-id="1e354-111">按照 [针对 Office 365 的性能故障排除计划](performance-troubleshooting-plan.md)中概述的步骤进行操作。</span><span class="sxs-lookup"><span data-stu-id="1e354-111">Follow the steps outlined in the [Performance troubleshooting plan for Office 365](performance-troubleshooting-plan.md).</span></span> 
    
## <a name="something-you-should-know-about-office-365-performance"></a><span data-ttu-id="1e354-112">您应该了解的有关 Office 365 性能的事项</span><span class="sxs-lookup"><span data-stu-id="1e354-112">Something you should know about Office 365 performance</span></span>

<span data-ttu-id="1e354-113">Office 365 位于高容量专用 Microsoft 网络中，该网络不只受自动化的监视，而是真实人员。</span><span class="sxs-lookup"><span data-stu-id="1e354-113">Office 365 lives inside a high-capacity, dedicated Microsoft network that is steadily monitored not just by automation, but by real people.</span></span> <span data-ttu-id="1e354-114">维护 Office 365 云的角色的一部分是在实现性能调整和简化的情况下进行优化。</span><span class="sxs-lookup"><span data-stu-id="1e354-114">Part of the role of maintaining the Office 365 cloud is building-in performance tuning and streamlining where it's possible.</span></span> <span data-ttu-id="1e354-115">由于 Office 365 云的客户端必须通过 Internet 进行连接，因此在不同的 Office 365 服务中进行微调的速度也会不断提高。</span><span class="sxs-lookup"><span data-stu-id="1e354-115">Since clients of the Office 365 cloud have to connect across the Internet, there is a continuous effort to fine-tune the performance across Office 365 services too.</span></span> <span data-ttu-id="1e354-116">性能改进决不会真正在云中停止，并且在保持云正常运行和快速的情况方面有很多积累的体验。</span><span class="sxs-lookup"><span data-stu-id="1e354-116">Performance improvements never really stop in the cloud, and there is a lot of accumulated experience with keeping the cloud healthy and quick.</span></span> <span data-ttu-id="1e354-117">如果从您的位置连接到 Office 365 时遇到性能问题，最好不要从支持用例开始，再等待。</span><span class="sxs-lookup"><span data-stu-id="1e354-117">Should you experience a performance issue connecting from your location to Office 365, it's best not to start with, and wait on, a Support case.</span></span> <span data-ttu-id="1e354-118">相反，应开始调查 "内部输出" 中的问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-118">Instead, you should begin investigating the problem from 'the inside out'.</span></span> <span data-ttu-id="1e354-119">也就是说，从你的网络中开始，然后向 Office 365 推出。</span><span class="sxs-lookup"><span data-stu-id="1e354-119">That is, start inside of your network, and work your way out to Office 365.</span></span> <span data-ttu-id="1e354-120">在使用 Office 365 支持打开事例之前，您可以收集数据并执行操作，并可能会解决问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-120">Before you open a case with Office 365 Support, you can gather data and take actions that will explore, and may resolve, your problem.</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="1e354-121">请注意 Office 365 中的容量规划和限制。</span><span class="sxs-lookup"><span data-stu-id="1e354-121">Be aware of capacity planning and limits in Office 365.</span></span> <span data-ttu-id="1e354-122">当您尝试解决性能问题时，该信息将使您排在曲线的前面。</span><span class="sxs-lookup"><span data-stu-id="1e354-122">That information will put you ahead of the curve when trying to resolve a performance issue.</span></span> <span data-ttu-id="1e354-123">以下是 [Microsoft 365 和 Office 365 服务说明](https://docs.microsoft.com/office365/servicedescriptions/office-365-service-descriptions-technet-library)的链接。</span><span class="sxs-lookup"><span data-stu-id="1e354-123">Here's a link to the [Microsoft 365 and Office 365 service descriptions](https://docs.microsoft.com/office365/servicedescriptions/office-365-service-descriptions-technet-library).</span></span> <span data-ttu-id="1e354-124">这是一个中心中心，Office 365 提供的所有服务都有一个从此处转到其自己的服务说明的链接。</span><span class="sxs-lookup"><span data-stu-id="1e354-124">This is a central hub, and all the services offered by Office 365 have a link that goes to their own Service Descriptions from here.</span></span> <span data-ttu-id="1e354-125">这意味着，如果您需要查看 SharePoint Online 的标准限制，请单击 " [Sharepoint Online 服务说明](https://technet.microsoft.com/library/sharepoint-online-service-description.aspx) " 并找到其 " [sharepoint online 限制" 部分](https://go.microsoft.com/fwlink/p/?LinkID=856113)。</span><span class="sxs-lookup"><span data-stu-id="1e354-125">That means, should you need to see the standard limits for SharePoint Online, for example, you would click [SharePoint Online Service Description](https://technet.microsoft.com/library/sharepoint-online-service-description.aspx) and locate its [SharePoint Online Limits section](https://go.microsoft.com/fwlink/p/?LinkID=856113).</span></span> 
  
<span data-ttu-id="1e354-126">请务必进行故障排除，以了解性能是可调的，不应获取 idealized 值并将其永久保留 (如果您认为这是这样，那么偶尔的高带宽任务（如加入大量用户，或执行大型数据迁移）将会非常大的压力--因此，应规划性能影响，然后) 。</span><span class="sxs-lookup"><span data-stu-id="1e354-126">Make sure you go into your troubleshooting with the understanding that performance is a sliding scale, it's not about achieving an idealized value and maintaining it permanently (if you believe this is so, then occasional high-bandwidth tasks like on-boarding a large number of users, or doing large data migrations will be very stressful -- so do plan for performance impacts then).</span></span> <span data-ttu-id="1e354-127">你可以且应该能够大致了解性能目标，但很多变量在性能上会发挥作用，因此性能各不相同。</span><span class="sxs-lookup"><span data-stu-id="1e354-127">You can, and should, have a rough idea of your performance targets, but a lot of variables play into performance, therefore, performance varies.</span></span> <span data-ttu-id="1e354-128">这就是性能的性质。</span><span class="sxs-lookup"><span data-stu-id="1e354-128">That's the nature of performance.</span></span> 
  
<span data-ttu-id="1e354-129">性能故障排除不涉及会议特定目标并无限期地维护这些号码，这是为了改进现有活动（假设所有变量）。</span><span class="sxs-lookup"><span data-stu-id="1e354-129">Performance troubleshooting isn't about meeting specific goals and maintaining those numbers indefinitely, it's about improving existing activities, given all the variables.</span></span> 
  
## <a name="okay-what-does-a-performance-problem-look-like"></a><span data-ttu-id="1e354-130">好的，性能问题看起来是什么样子的？</span><span class="sxs-lookup"><span data-stu-id="1e354-130">Okay, what does a performance problem look like?</span></span>

<span data-ttu-id="1e354-131">首先，你需要确保你遇到的问题确实是性能问题，而不是服务事件。</span><span class="sxs-lookup"><span data-stu-id="1e354-131">First, you need to make sure that what you are experiencing is indeed a performance issue and not a service incident.</span></span> <span data-ttu-id="1e354-132">性能问题与 Office 365 中的服务事件不同。</span><span class="sxs-lookup"><span data-stu-id="1e354-132">A performance problem is different from a service incident in Office 365.</span></span> <span data-ttu-id="1e354-133">下面介绍如何区分这些内容。</span><span class="sxs-lookup"><span data-stu-id="1e354-133">Here's how to tell them apart.</span></span>
  
<span data-ttu-id="1e354-134">如果 Office 365 服务有问题，这就是服务事件。</span><span class="sxs-lookup"><span data-stu-id="1e354-134">If the Office 365 service is having issues, that's a service incident.</span></span> <span data-ttu-id="1e354-135">您将在 Microsoft 365 管理中心的 " **当前运行状况** " 下看到红色或黄色图标，在连接到 Office 365 的客户端计算机上，您可能还会注意到性能较慢。</span><span class="sxs-lookup"><span data-stu-id="1e354-135">You will see red or yellow icons under **Current health** in the Microsoft 365 admin center, you may also notice slow performance on client computers connecting to Office 365.</span></span> <span data-ttu-id="1e354-136">例如，如果当前运行状况报告了一个红色的图标，并且你在 Exchange 旁边看到了 **调查** ，则你可能还会收到来自组织中的人员的一组呼叫，他们抱怨使用 Exchange Online 的客户端邮箱执行时错误。</span><span class="sxs-lookup"><span data-stu-id="1e354-136">For example, if Current health reports a red icon and you see **Investigating** beside Exchange, you might then also receive a bunch of calls from people in your organization who complain that client mailboxes that use Exchange Online are performing badly.</span></span> <span data-ttu-id="1e354-137">在这种情况下，假定您的 Exchange Online 性能仅成为服务中的问题的牺牲品是合理的。</span><span class="sxs-lookup"><span data-stu-id="1e354-137">In that case, it's reasonable to assume that your Exchange Online performance just became a victim of issues within the Service.</span></span> 
  
![Office 365 运行状况仪表板，所有工作负荷显示为绿色，Exchange 除外，后者显示服务已还原。](../media/ec7f0325-9e61-4e1a-bec0-64b87f4469be.PNG)
  
<span data-ttu-id="1e354-139">此时，Office 365 管理员应检查 **当前运行状况** ，然后 **查看详细信息和历史记录**，以及时更新我们在系统上执行的维护。</span><span class="sxs-lookup"><span data-stu-id="1e354-139">At this point, you, the Office 365 admin, should check **Current health** and then **View details and history**, frequently, to keep up to date on maintenance we perform on the system.</span></span> <span data-ttu-id="1e354-140">已创建 **当前运行状况** 仪表板，以更新有关服务中的更改和问题的信息。</span><span class="sxs-lookup"><span data-stu-id="1e354-140">The **Current health** dashboard was made to update you about changes to, and problems in, the service.</span></span> <span data-ttu-id="1e354-141">向管理员的运行状况历史记录中写入的注释和说明可帮助您评估影响，并使您在日常工作中进行了发布。</span><span class="sxs-lookup"><span data-stu-id="1e354-141">The notes and explanations written to health history, admin to admin, are there to help you gauge your impact, and to keep you posted about ongoing work.</span></span> 
  
![Office 365 运行状况仪表板的图片，它说明 Exchange Online 服务已还原，以及原因。](../media/66609554-426a-4448-8be6-ea09817f41ba.PNG)
  
<span data-ttu-id="1e354-143">性能问题不是服务事件，即使事件可能导致性能降低。</span><span class="sxs-lookup"><span data-stu-id="1e354-143">A performance issue isn't a service incident, even though incidents can cause slow performance.</span></span> <span data-ttu-id="1e354-144">性能问题如下所示：</span><span class="sxs-lookup"><span data-stu-id="1e354-144">A performance issue looks like this:</span></span>
  
- <span data-ttu-id="1e354-145">无论管理员中心的 **当前运行状况** 是为服务报告的，都会发生性能问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-145">A performance issue occurs no matter what the admin center **Current health** is reporting for the service.</span></span> 
    
-  <span data-ttu-id="1e354-146">用于相对无缝的行为需要很长时间才能完成或永远不会完成。</span><span class="sxs-lookup"><span data-stu-id="1e354-146">A behavior that used to be relatively seamless takes a long time to complete or never completes.</span></span> 
    
- <span data-ttu-id="1e354-147">您还可以复制问题，或者至少您知道在执行正确的一系列步骤时，将会发生此问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-147">You can replicate the problem too, or, at least, you know it will happen if you do the right series of steps.</span></span>
    
-  <span data-ttu-id="1e354-148">如果问题是间歇性的，则仍有一种模式，例如，在10:00 的情况下，你将收到无法可靠地访问 Office 365 的用户的呼叫，并且呼叫将在中午周围下降。</span><span class="sxs-lookup"><span data-stu-id="1e354-148">If the problem is intermittent, there is still a pattern, for example, you know that by 10:00 AM you will have calls from users who can't reliably access Office 365, and that the calls will die down around noon.</span></span> 
    
<span data-ttu-id="1e354-149">这可能听起来非常熟悉;或许过于熟悉。</span><span class="sxs-lookup"><span data-stu-id="1e354-149">This probably sounds familiar; maybe too familiar.</span></span> <span data-ttu-id="1e354-150">一旦您知道存在性能问题，问题就变成 "你接下来做什么？"</span><span class="sxs-lookup"><span data-stu-id="1e354-150">Once you know it's a performance problem, the question becomes, "What do you do next?"</span></span> <span data-ttu-id="1e354-151">本文的其余部分将帮助您确定确切的情况。</span><span class="sxs-lookup"><span data-stu-id="1e354-151">The rest of this article helps you determine exactly that.</span></span>
  
## <a name="how-to-define-and-test-the-performance-problem"></a><span data-ttu-id="1e354-152">如何定义和测试性能问题</span><span class="sxs-lookup"><span data-stu-id="1e354-152">How to define and test the performance problem</span></span>

<span data-ttu-id="1e354-153">性能问题通常会随着时间的推移而发生，因此定义实际问题可能是很困难的。</span><span class="sxs-lookup"><span data-stu-id="1e354-153">Performance issues often emerge over time, so it can be challenging to define the actual problem.</span></span> <span data-ttu-id="1e354-154">您需要创建一个好的问题陈述并为问题上下文做一个好主意，然后需要可重复的测试步骤才能赢得这一天。</span><span class="sxs-lookup"><span data-stu-id="1e354-154">You need to create a good problem statement and a good idea of issue context, and then you need to repeatable testing steps to win the day.</span></span> <span data-ttu-id="1e354-155">否则，如果没有自己的故障，可能会丢失。</span><span class="sxs-lookup"><span data-stu-id="1e354-155">Otherwise, through no fault of your own, you may be lost.</span></span> <span data-ttu-id="1e354-156">为什么？</span><span class="sxs-lookup"><span data-stu-id="1e354-156">Why?</span></span> <span data-ttu-id="1e354-157">嗯，下面是一些不提供足够信息的问题声明示例：</span><span class="sxs-lookup"><span data-stu-id="1e354-157">Well, here are some examples of problems statements that don't provide enough information:</span></span>
  
- <span data-ttu-id="1e354-158">从 "我的收件箱" 切换到我没有注意到的 "我的日历"，现在它是一个咖啡中断。</span><span class="sxs-lookup"><span data-stu-id="1e354-158">Switching from my Inbox to my Calendar used to be something I didn't notice, and now it's a coffee-break.</span></span> <span data-ttu-id="1e354-159">你可以让它与它的行为类似吗？</span><span class="sxs-lookup"><span data-stu-id="1e354-159">Can you make it act like it used to?</span></span>
    
- <span data-ttu-id="1e354-160">将我的文件上传到 SharePoint Online 会永久占用。</span><span class="sxs-lookup"><span data-stu-id="1e354-160">Uploading my files to SharePoint Online is taking forever.</span></span> <span data-ttu-id="1e354-161">为什么下午慢，但在其他时间，速度很快？</span><span class="sxs-lookup"><span data-stu-id="1e354-161">Why is it slow in the afternoon, but any other time, it's fast?</span></span> <span data-ttu-id="1e354-162">它无法快速实现吗？</span><span class="sxs-lookup"><span data-stu-id="1e354-162">Can't it just be fast?</span></span>
    
<span data-ttu-id="1e354-163">上面的问题声明带来了一些大型挑战。</span><span class="sxs-lookup"><span data-stu-id="1e354-163">There are several large challenges posed by the problem statements above.</span></span> <span data-ttu-id="1e354-164">具体来说，有很多多义性需要处理。</span><span class="sxs-lookup"><span data-stu-id="1e354-164">Specifically, there are a lot of ambiguities to deal with.</span></span> <span data-ttu-id="1e354-165">例如：</span><span class="sxs-lookup"><span data-stu-id="1e354-165">for example:</span></span>
  
- <span data-ttu-id="1e354-166">不清楚如何在便携式计算机上使用的收件箱和日历之间切换。</span><span class="sxs-lookup"><span data-stu-id="1e354-166">It's unclear how switching between Inbox and Calendar used to act on the laptop.</span></span>
    
- <span data-ttu-id="1e354-167">当用户说： "无法再快些"，什么是 "快"？</span><span class="sxs-lookup"><span data-stu-id="1e354-167">When the user says, "Can't it just be fast", what's "fast"?</span></span>
    
- <span data-ttu-id="1e354-168">"永久" 的时间是多长？</span><span class="sxs-lookup"><span data-stu-id="1e354-168">How long is "forever"?</span></span> <span data-ttu-id="1e354-169">是数秒或数分钟，或者用户是否可以访问午餐，如果用户返回午餐，它会在十分钟后完成？</span><span class="sxs-lookup"><span data-stu-id="1e354-169">Is that several seconds, or minutes, or could the user go to lunch and it would finish up ten minutes after the user got back?</span></span>
    
<span data-ttu-id="1e354-170">在所有这些情况下，不考虑管理员和疑难解答不能了解来自以下问题声明的许多详细信息。</span><span class="sxs-lookup"><span data-stu-id="1e354-170">All of this is without considering that the admin and troubleshooter can't be aware of many details from problem statements like these.</span></span> <span data-ttu-id="1e354-171">例如，当问题开始发生时;用户在家工作，仅在家庭网络中看到慢速切换;用户必须在本地客户端上运行其他几个内存密集型应用程序，或者用户运行的是较旧的操作系统，或者没有运行最近的更新。</span><span class="sxs-lookup"><span data-stu-id="1e354-171">For example, when the problem started happening; That the user works from home and only ever sees slow switching while on a home network; That the user must run several other RAM intensive applications on the local client, or the user is running an older operating system or hasn't run recent updates.</span></span>
  
<span data-ttu-id="1e354-172">当用户报告性能问题时，需要收集大量信息。</span><span class="sxs-lookup"><span data-stu-id="1e354-172">When users report a performance problem, there's a lot of information to collect.</span></span> <span data-ttu-id="1e354-173">收集此信息是对问题进行作用域或调查它的过程的一部分。</span><span class="sxs-lookup"><span data-stu-id="1e354-173">Collecting this information is part of a process called scoping the issue, or investigating it.</span></span> <span data-ttu-id="1e354-174">以下是可用于收集有关性能问题的信息的基本作用域列表。</span><span class="sxs-lookup"><span data-stu-id="1e354-174">The following is a basic scoping list you can use to collect information about your performance issue.</span></span> <span data-ttu-id="1e354-175">此列表并不详尽，但它是启动您自己的一个位置：</span><span class="sxs-lookup"><span data-stu-id="1e354-175">This list is not exhaustive, but it's a place to start one of your own:</span></span> 
  
- <span data-ttu-id="1e354-176">问题是在什么日期发生的，以及在白天或晚上的什么时间？</span><span class="sxs-lookup"><span data-stu-id="1e354-176">On what date did the issue happen, and around what time of day or night?</span></span>
    
- <span data-ttu-id="1e354-177">你使用的是哪种类型的客户端计算机，以及它如何连接到业务网络 (VPN、有线、无线) ？</span><span class="sxs-lookup"><span data-stu-id="1e354-177">What kind of client computer were you using, and how does it connect to the business network (VPN, Wired, Wireless)?</span></span>
    
- <span data-ttu-id="1e354-178">您是否正在远程工作或是否已在 office 中工作？</span><span class="sxs-lookup"><span data-stu-id="1e354-178">Were you working remotely or were you in the office?</span></span>
    
- <span data-ttu-id="1e354-179">您是否尝试在另一台计算机上执行相同的操作并查看相同的行为？</span><span class="sxs-lookup"><span data-stu-id="1e354-179">Did you try the same actions on another computer and see the same behavior?</span></span>
    
- <span data-ttu-id="1e354-180">演练为您提供问题的步骤，以便您可以编写您将执行的操作。</span><span class="sxs-lookup"><span data-stu-id="1e354-180">Walk through the steps that are giving you the trouble so that you can write the actions you take down.</span></span>
    
- <span data-ttu-id="1e354-181">以秒或分钟为单位的性能速度有多慢？</span><span class="sxs-lookup"><span data-stu-id="1e354-181">How slow in seconds or minutes is the performance?</span></span>
    
- <span data-ttu-id="1e354-182">你在世界上的位置是什么？</span><span class="sxs-lookup"><span data-stu-id="1e354-182">Where in the world are you located?</span></span>
    
<span data-ttu-id="1e354-183">其中一些问题比其他问题更明显。</span><span class="sxs-lookup"><span data-stu-id="1e354-183">Some of these questions are more obvious than others.</span></span> <span data-ttu-id="1e354-184">大多数人都要了解故障排除程序需要的具体步骤才能再现问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-184">Most everyone will understand a troubleshooter needs the exact steps to reproduce the issue.</span></span> <span data-ttu-id="1e354-185">毕竟，如何记录错误，以及如何在问题修复时测试其他信息？</span><span class="sxs-lookup"><span data-stu-id="1e354-185">After all, how else can you record what's wrong, and how else can you test if the issue is fixed?</span></span> <span data-ttu-id="1e354-186">不太明显，如 "您看到问题的日期和时间是什么？" 和 "世界上的位置是什么？"，可以串联使用的信息。</span><span class="sxs-lookup"><span data-stu-id="1e354-186">Less obvious are things like "What date and time did you see the issue?", and "Where in the world are you located?", information that can be used in tandem.</span></span> <span data-ttu-id="1e354-187">根据用户的工作时间，几个小时的差异可能意味着维护已在公司网络的各个部分进行。</span><span class="sxs-lookup"><span data-stu-id="1e354-187">Depending on when the user was working, a few hours of time difference may mean maintenance is already underway on parts of your company's network.</span></span> <span data-ttu-id="1e354-188">例如，如果您的公司有混合实施，如混合 SharePoint 搜索（可以同时在 SharePoint Online 和本地 SharePoint Server 2013 实例中查询搜索索引），则可能会在内部部署服务器场中进行更新。</span><span class="sxs-lookup"><span data-stu-id="1e354-188">If, for example, your company has a hybrid implementation, like a hybrid SharePoint Search, which can query search indexes in both SharePoint Online and an On-premises SharePoint Server 2013 instance, updates may be underway in the on-premises farm.</span></span> <span data-ttu-id="1e354-189">如果您的公司都在云中，则系统维护可能包括添加或删除网络硬件、推出公司范围的更新，或者对 DNS 或其他核心基础结构进行更改。</span><span class="sxs-lookup"><span data-stu-id="1e354-189">If your company is all in the cloud, system maintenance may include adding or removing network hardware, rolling out updates that are company-wide, or making changes to DNS, or other core infrastructure.</span></span>
  
<span data-ttu-id="1e354-190">当您解决性能问题时，我们有点像犯罪场景，您需要精确而 observant 地从证据中得出任何结论。</span><span class="sxs-lookup"><span data-stu-id="1e354-190">When you're troubleshooting a performance problem, it's a bit like a crime scene, you need to be precise and observant to draw any conclusions from the evidence.</span></span> <span data-ttu-id="1e354-191">若要执行此操作，您必须通过收集证据获取一个正常的问题声明。</span><span class="sxs-lookup"><span data-stu-id="1e354-191">In order to do this, you must get a good problem statement by gathering evidence.</span></span> <span data-ttu-id="1e354-192">它应包括计算机的上下文、用户的上下文、问题开始时的上下文以及暴露性能问题的确切步骤。</span><span class="sxs-lookup"><span data-stu-id="1e354-192">It should include the computer's context, the user's context, when the problem began, and the exact steps that exposed the performance issue.</span></span> <span data-ttu-id="1e354-193">此问题语句应和在您的笔记中的最顶层页面保持不变。</span><span class="sxs-lookup"><span data-stu-id="1e354-193">This problem statement should be, and stay, the topmost page in your notes.</span></span> <span data-ttu-id="1e354-194">通过在解决解决方案后再次浏览问题声明，您将采取相应步骤来测试并证明您执行的操作是否已解决问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-194">By walking through the problem statement again after you work on the resolution, you are taking the steps to test and prove whether the actions you take have resolved the issue.</span></span> <span data-ttu-id="1e354-195">在完成工作时，了解这一点非常关键。</span><span class="sxs-lookup"><span data-stu-id="1e354-195">This is critical to knowing when your work, there, is done.</span></span>
  
## <a name="do-you-know-how-performance-used-to-look-when-it-was-good"></a><span data-ttu-id="1e354-196">您是否知道性能如何在什么情况中进行查看？</span><span class="sxs-lookup"><span data-stu-id="1e354-196">Do you know how performance used to look when it was good?</span></span>

<span data-ttu-id="1e354-197">如果你是 unlucky，则没有人知道。</span><span class="sxs-lookup"><span data-stu-id="1e354-197">If you're unlucky, nobody knows.</span></span> <span data-ttu-id="1e354-198">无人有号码。</span><span class="sxs-lookup"><span data-stu-id="1e354-198">Nobody had numbers.</span></span> <span data-ttu-id="1e354-199">这意味着无人可以回答这样一个简单的问题： "大约有多少秒用于在 Office 365 中显示收件箱？"，或 "在执行官拥有 Lync Online 会议时它使用的时间长短？"，这是许多公司的常见方案。</span><span class="sxs-lookup"><span data-stu-id="1e354-199">That means nobody can answer the simple question "About how many seconds did it used to take to bring up an Inbox in Office 365?", or "How long did it used to take when the Executives had a Lync Online meeting?", which is a common scenario for many companies.</span></span>
  
<span data-ttu-id="1e354-200">此处缺少的是性能基准。</span><span class="sxs-lookup"><span data-stu-id="1e354-200">What's missing here is a performance baseline.</span></span>
  
<span data-ttu-id="1e354-201">基线为您的性能提供了一个上下文。</span><span class="sxs-lookup"><span data-stu-id="1e354-201">Baselines give you a context for your performance.</span></span> <span data-ttu-id="1e354-202">您应偶尔花费一些基准，具体取决于贵公司的需求。</span><span class="sxs-lookup"><span data-stu-id="1e354-202">You should take a baseline occasionally to frequently, depending on the needs of your company.</span></span> <span data-ttu-id="1e354-203">如果您是一个更大的公司，则操作团队可能会对您的本地环境执行比较基准。</span><span class="sxs-lookup"><span data-stu-id="1e354-203">If you are a larger company, your Operations team may take baselines for your on-premises environment already.</span></span> <span data-ttu-id="1e354-204">例如，如果您在每月的第一个星期一对所有 Exchange 服务器进行修补，并在第三个星期一的所有 SharePoint 服务器上进行修补，则操作团队可能会提供一系列任务和修补程序在修补后运行的方案，以证明关键功能能够正常运行。</span><span class="sxs-lookup"><span data-stu-id="1e354-204">For example, if you patch all the Exchange servers on the first Monday of the month, and all your SharePoint servers on the third Monday, your Operations team probably has a list of tasks and scenarios it runs post-patching, to prove that critical functions are operational.</span></span> <span data-ttu-id="1e354-205">例如，打开收件箱，单击 "发送/接收"，并确保文件夹更新，或者在 SharePoint 中浏览网站的主页面，进入企业级搜索页面，并执行返回结果的搜索。</span><span class="sxs-lookup"><span data-stu-id="1e354-205">For example, opening the Inbox, clicking Send/Receive, and making sure the folders update, or, in SharePoint, browsing the main page of the site, going into the enterprise Search page, and doing a search that returns results.</span></span>
  
<span data-ttu-id="1e354-206">如果您的应用程序在 Office 365 中，则您可以执行的一些最基本的基准是测量从网络内部的客户端计算机到出站点的时间 (（以毫秒为) 单位），或者是您离开网络并转到 Office 365 的点。</span><span class="sxs-lookup"><span data-stu-id="1e354-206">If your applications are in Office 365, some of the most fundamental baselines you can take measure the time (in milliseconds) from a client computer inside your network, to an egress point, or the point where you leave your network and go out to Office 365.</span></span> <span data-ttu-id="1e354-207">下面是您可以调查和录制的一些有用的基线：</span><span class="sxs-lookup"><span data-stu-id="1e354-207">Here are some helpful baselines that you can investigate and record:</span></span>
  
- <span data-ttu-id="1e354-208">确定客户端计算机和传出点之间的设备，例如代理服务器。</span><span class="sxs-lookup"><span data-stu-id="1e354-208">Identify the devices between your client computer and your egress point, for example, your proxy server.</span></span>
    
  - <span data-ttu-id="1e354-209">您需要知道您的设备，以便您具有上下文 (IP 地址、设备类型等) ，以解决出现的性能问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-209">You need to know your devices so that you have context (IP addresses, type of device, et cetera) for performance problems that arise.</span></span>
    
  - <span data-ttu-id="1e354-210">代理服务器是常见的出口点，因此您可以检查 web 浏览器以查看其设置使用的代理服务器（如果有）。</span><span class="sxs-lookup"><span data-stu-id="1e354-210">Proxy servers are common egress points, so you can check your web browser to see what proxy server it is set to use, if any.</span></span>
    
  - <span data-ttu-id="1e354-211">有第三方工具可以发现和映射网络，但了解设备的最安全方法是询问网络团队的成员。</span><span class="sxs-lookup"><span data-stu-id="1e354-211">There are third party tools that can discover and map your network, but the safest way to know your devices is to ask a member of your network team.</span></span>
    
- <span data-ttu-id="1e354-212">确定 Internet 服务提供商 (ISP) 、写下其联系人信息，并询问有多少电路的带宽。</span><span class="sxs-lookup"><span data-stu-id="1e354-212">Identify your Internet service provider (ISP), write down their contact information, and ask how many circuits how much bandwidth you have.</span></span>
    
- <span data-ttu-id="1e354-213">在你的公司内部，识别你的客户端与传出点之间的设备的资源，或确定要与网络问题交谈的紧急联系人。</span><span class="sxs-lookup"><span data-stu-id="1e354-213">Inside your company, identify resources for the devices between your client and the egress point, or identify an emergency contact to talk to about networking issues.</span></span>
    
<span data-ttu-id="1e354-214">下面是使用工具进行的简单测试可为您计算的一些基准：</span><span class="sxs-lookup"><span data-stu-id="1e354-214">Here are some baselines that simple testing with tools can calculate for you:</span></span>
  
- <span data-ttu-id="1e354-215">从客户端计算机到你的出局点的时间（以毫秒为单位）</span><span class="sxs-lookup"><span data-stu-id="1e354-215">Time from your client computer to your egress point in milliseconds</span></span>
    
- <span data-ttu-id="1e354-216">从传出点到 Office 365 的时间（以毫秒为单位）</span><span class="sxs-lookup"><span data-stu-id="1e354-216">Time from your egress point to Office 365 in milliseconds</span></span>
    
- <span data-ttu-id="1e354-217">在浏览时解析 Office 365 URL 的服务器世界上的位置</span><span class="sxs-lookup"><span data-stu-id="1e354-217">Location in the world of the server that resolves the URLS for Office 365 when you browse</span></span>
    
- <span data-ttu-id="1e354-218">您的 ISP 的 DNS 解析速度，以毫秒为单位，数据包到达的不一致 (网络抖动) ，上载和下载时间（以毫秒为单位）</span><span class="sxs-lookup"><span data-stu-id="1e354-218">The speed of your ISP's DNS resolution in milliseconds, inconsistencies in packet arrival (network jitter), upload and download times in milliseconds</span></span>
    
<span data-ttu-id="1e354-219">如果您不熟悉如何执行这些步骤，我们将在本文中详细介绍。</span><span class="sxs-lookup"><span data-stu-id="1e354-219">If you're unfamiliar with how to carry out these steps, we'll go into more detail in this article.</span></span> 
  
## <a name="what-is-a-baseline"></a><span data-ttu-id="1e354-220">什么是比较基准？</span><span class="sxs-lookup"><span data-stu-id="1e354-220">What is a baseline?</span></span>

<span data-ttu-id="1e354-221">您可以知道它在出现故障时的影响，但如果您不知道您的历史性能数据，则不可能有可能会有什么损坏的上下文，以及何时发生的情况。</span><span class="sxs-lookup"><span data-stu-id="1e354-221">You'll know the impact when it goes bad, but if you don't know your historical performance data, it's not possible to have a context for how bad it may have become, and when.</span></span> <span data-ttu-id="1e354-222">因此，如果没有比较基准，就不会错过解决谜题的关键线索： "拼图" 框中的图片。</span><span class="sxs-lookup"><span data-stu-id="1e354-222">So without a baseline, you're missing the key clue to solve the puzzle: the picture on the puzzle box.</span></span> <span data-ttu-id="1e354-223">在性能故障排除中，需要进行  *比较*  。</span><span class="sxs-lookup"><span data-stu-id="1e354-223">In performance troubleshooting, you need a point of  *comparison*  .</span></span> <span data-ttu-id="1e354-224">简单的性能比较基准不是很难执行。</span><span class="sxs-lookup"><span data-stu-id="1e354-224">Simple performance baselines aren't difficult to take.</span></span> <span data-ttu-id="1e354-225">你的运营团队可能会对按计划执行这些任务的任务负责。</span><span class="sxs-lookup"><span data-stu-id="1e354-225">Your Operations team can be tasked with carrying these out on a schedule.</span></span> <span data-ttu-id="1e354-226">例如，假设您的连接如下所示：</span><span class="sxs-lookup"><span data-stu-id="1e354-226">For example, let's say your connection looks like this:</span></span> 
  
![显示客户端、代理和 Office 365 云的基本网络图形。](../media/c6ca7140-09f9-4c2d-a775-dbf2820eaa0c.PNG)
  
<span data-ttu-id="1e354-228">这意味着你已与你的网络团队进行了核对，并发现你通过代理服务器将公司留在 Internet 上，并且该代理将处理客户端计算机发送到云的所有请求。</span><span class="sxs-lookup"><span data-stu-id="1e354-228">That means you've checked with your network team and found out that you leave your company for the Internet through a proxy server, and that proxy handles all the requests your client computer sends to the cloud.</span></span> <span data-ttu-id="1e354-229">在这种情况下，应绘制一个可列出所有干预设备的简化版本的连接。</span><span class="sxs-lookup"><span data-stu-id="1e354-229">In this case, you should draw a simplified version of your connection that lists all the intervening devices.</span></span> <span data-ttu-id="1e354-230">现在，可以使用 "插入" 工具来测试客户端、传出点 (在离开 Internet 的网络) 的传出点和 Office 365 云之间的性能。</span><span class="sxs-lookup"><span data-stu-id="1e354-230">Now, insert tools that you can use to test the performance between the client, the egress point (where you leave your network for the Internet), and the Office 365 cloud.</span></span>
  
![包含客户端、代理和云的基本网络以及工具建议 PSPing、TraceTCP 和网络跟踪。](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
<span data-ttu-id="1e354-232">由于查找性能数据所需的专业知识量，这些选项将列为 **简单** 和 **高级** 。</span><span class="sxs-lookup"><span data-stu-id="1e354-232">The options are listed as **Simple** and **Advanced** because of the amount of expertise you need in order to find the performance data.</span></span> <span data-ttu-id="1e354-233">与运行命令行工具（如 PsPing 和 TraceTCP）相比，网络跟踪需要很长时间。</span><span class="sxs-lookup"><span data-stu-id="1e354-233">A network trace will take a lot of time, compared to running command-line tools like PsPing and TraceTCP.</span></span> <span data-ttu-id="1e354-234">这两个命令行工具已被选择，因为它们不使用 ICMP 数据包（它将被 Office 365 阻止），因为它们提供了将客户端计算机或代理服务器 (所需的时间（以毫秒为单位），如果您有权访问) 并到达 Office 365。</span><span class="sxs-lookup"><span data-stu-id="1e354-234">These two command-line tools were chosen because they don't use ICMP packets, which will be blocked by Office 365, and because they give the time in milliseconds that it takes to leave the client computer, or proxy server (if you have access) and arrive at Office 365.</span></span> <span data-ttu-id="1e354-235">从一台计算机到另一台计算机的每个跃点都将以时间值结束，这对于比较基准而言非常好！</span><span class="sxs-lookup"><span data-stu-id="1e354-235">Each individual hop from one computer to another will end up with a time value, and that's great for baselines!</span></span> <span data-ttu-id="1e354-236">同样重要的是，这些命令行工具允许您向命令中添加端口号，这很有用，因为 Office 365 通过端口443进行通信，该端口是安全套接字层和传输层安全性 (SSL 和 TLS) 中使用的端口。</span><span class="sxs-lookup"><span data-stu-id="1e354-236">Just as importantly, these command-line tools allow you to add a port number onto the command, this is useful because Office 365 communicates over port 443, which is the port used by Secure Sockets Layer and Transport Layer Security (SSL and TLS).</span></span> <span data-ttu-id="1e354-237">但是，其他第三方工具可能是您的情况的更好解决方案。</span><span class="sxs-lookup"><span data-stu-id="1e354-237">However, other third-party tools may be better solutions for your situation.</span></span> <span data-ttu-id="1e354-238">Microsoft 不支持所有这些工具，因此，如果由于某种原因无法获取 PsPing 和 TraceTCP，请使用类似于 Netmon 的工具移动到网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-238">Microsoft doesn't support all of these tools, so if, for some reason, you can't get PsPing and TraceTCP working, move on to a network trace with a tool like Netmon.</span></span> 
  
<span data-ttu-id="1e354-239">你可以在营业时间之前获取比较基准，再次使用，然后在数小时后再次使用。</span><span class="sxs-lookup"><span data-stu-id="1e354-239">You can take a baseline before business hours, again during heavy use, and then again after hours.</span></span> <span data-ttu-id="1e354-240">这意味着，您的文件夹结构可能会在结尾处看上去类似于以下内容：</span><span class="sxs-lookup"><span data-stu-id="1e354-240">This means you may have a folder structure that looks a bit like this in the end:</span></span>
  
![建议将性能数据组织到文件夹的方式的图形。](../media/13e01ffa-f0f2-4d10-b89d-d5980ec89fae.png)
  
<span data-ttu-id="1e354-242">您还应选取文件的命名约定。</span><span class="sxs-lookup"><span data-stu-id="1e354-242">You should also pick a naming convention your files.</span></span> <span data-ttu-id="1e354-243">下面是一些示例：</span><span class="sxs-lookup"><span data-stu-id="1e354-243">Here are some examples:</span></span>
  
- <span data-ttu-id="1e354-244">Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal</span><span class="sxs-lookup"><span data-stu-id="1e354-244">Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal</span></span>
    
- <span data-ttu-id="1e354-245">Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW</span><span class="sxs-lookup"><span data-stu-id="1e354-245">Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW</span></span>
    
- <span data-ttu-id="1e354-246">Feb_08_2015_2pmEST_PerfBaseline_BADPerf</span><span class="sxs-lookup"><span data-stu-id="1e354-246">Feb_08_2015_2pmEST_PerfBaseline_BADPerf</span></span>
    
- <span data-ttu-id="1e354-247">Feb_08_2015_8 30amEST_PerfBaseline_GoodPerf</span><span class="sxs-lookup"><span data-stu-id="1e354-247">Feb_08_2015_8-30amEST_PerfBaseline_GoodPerf</span></span>
    
<span data-ttu-id="1e354-248">有很多不同的方法可以实现此目的，但使用格式 **\<dateTime\>\<what's happening in the test\>** 是一个很好的入门之处。</span><span class="sxs-lookup"><span data-stu-id="1e354-248">There are lots of different ways to do this, but using the format **\<dateTime\>\<what's happening in the test\>** is a good place to start.</span></span> <span data-ttu-id="1e354-249">为此，我们会在稍后尝试解决问题时帮助您这。</span><span class="sxs-lookup"><span data-stu-id="1e354-249">Being diligent about this will help a lot when you are trying to troubleshoot issues later.</span></span> <span data-ttu-id="1e354-250">稍后，您将能够说出 "我在2月8日做了两个跟踪，一个显示好的性能，另一个显示了错误，因此可以对它们进行比较。</span><span class="sxs-lookup"><span data-stu-id="1e354-250">Later, you'll be able to say "I took two traces on February 8th, one showed good performance and one showed bad, so we can compare them".</span></span> <span data-ttu-id="1e354-251">这对于故障排除非常有帮助。</span><span class="sxs-lookup"><span data-stu-id="1e354-251">This is extremely helpful for troubleshooting.</span></span> 
  
<span data-ttu-id="1e354-252">您需要有一个有条理的方式来保留历史比较基准。</span><span class="sxs-lookup"><span data-stu-id="1e354-252">You need to have an organized way to keep your historical baselines.</span></span> <span data-ttu-id="1e354-253">在此示例中，简单方法生成了三个命令行输出，并将结果作为屏幕截图进行收集，但您可能有网络捕获文件。</span><span class="sxs-lookup"><span data-stu-id="1e354-253">In this example, the simple methods produced three command line outputs and the results were collected as screen shots, but you may have network capture files instead.</span></span> <span data-ttu-id="1e354-254">使用最适用于您的方法。</span><span class="sxs-lookup"><span data-stu-id="1e354-254">Use the method that works best for you.</span></span> <span data-ttu-id="1e354-255">存储历史比较基准并在您注意到在线服务行为发生变化的点处对其进行引用。</span><span class="sxs-lookup"><span data-stu-id="1e354-255">Store your historical baselines and refer to them at points where you notice changes in the behavior of online services.</span></span> 
  
## <a name="why-collect-performance-data-during-a-pilot"></a><span data-ttu-id="1e354-256">为何在试点过程中收集性能数据？</span><span class="sxs-lookup"><span data-stu-id="1e354-256">Why collect performance data during a pilot?</span></span>

<span data-ttu-id="1e354-257">在试用 Office 365 服务的过程中，开始制作基准的时间不会更好。</span><span class="sxs-lookup"><span data-stu-id="1e354-257">There is no better time to start making baselines than during a pilot of the Office 365 service.</span></span> <span data-ttu-id="1e354-258">您的 office 可能有成千上万个用户、成百上千个，或者可能有五个，但即使用户数量较少，您也可以执行测试来测量性能波动。</span><span class="sxs-lookup"><span data-stu-id="1e354-258">Your office may have thousands of users, hundreds of thousands, or it may have five, but even with a small number of users, you can perform tests to measure fluctuations in performance.</span></span> <span data-ttu-id="1e354-259">在大型公司的情况下，可以将数百个用户试点 Office 365 的代表性示例向外投影到几个数以千计的，以便您知道问题在发生之前可能出现的位置。</span><span class="sxs-lookup"><span data-stu-id="1e354-259">In the case of a large company, a representative sample of several hundred users piloting Office 365 can be projected outward to several thousands so you know where issues might arise before they happen.</span></span>
  
<span data-ttu-id="1e354-260">在小型公司中，如果使用的是小型公司，则表示所有用户同时进入服务且没有试点，请保留性能措施，以便您可以向可能需要对执行错误的操作进行故障排除的任何人显示数据。</span><span class="sxs-lookup"><span data-stu-id="1e354-260">In the case of a small company, where on-boarding means that all users go to the service at the same time and there is no pilot, keep performance measures so that you have data to show to anyone who may have to troubleshoot a badly performing operation.</span></span> <span data-ttu-id="1e354-261">例如，如果您注意到，突然你可以在上载中型图形时所花的时间内开始进行你的建设，在这种情况下，它会很快发生。</span><span class="sxs-lookup"><span data-stu-id="1e354-261">For example, if you notice that all of a sudden you can walk around your building in the time it takes to upload a medium-sized graphic where it used to happen very quickly.</span></span>
  
## <a name="how-to-collect-baselines"></a><span data-ttu-id="1e354-262">如何收集基线</span><span class="sxs-lookup"><span data-stu-id="1e354-262">How to collect baselines</span></span>

<span data-ttu-id="1e354-263">对于所有故障排除计划，您需要至少确定以下各项：</span><span class="sxs-lookup"><span data-stu-id="1e354-263">For all troubleshooting plans you need to identify these things at a minimum:</span></span>
  
- <span data-ttu-id="1e354-264">您正在使用的客户端计算机 (计算机或设备的类型、IP 地址以及导致问题的操作) </span><span class="sxs-lookup"><span data-stu-id="1e354-264">The client computer you're using (the type of computer or device, an IP address, and the actions that caused the issue)</span></span>
    
- <span data-ttu-id="1e354-265">客户端计算机位于世界上 (例如，此用户是否在 VPN 上的网络、远程工作或公司 intranet) </span><span class="sxs-lookup"><span data-stu-id="1e354-265">Where the client computer is located in the world (for example, whether this user on a VPN to the network, working remotely, or on the company intranet)</span></span>
    
- <span data-ttu-id="1e354-266">客户端计算机从你的网络中使用的出局点 (流量为 ISP 或 Internet 离开你的公司的时刻) </span><span class="sxs-lookup"><span data-stu-id="1e354-266">The egress point the client computer uses from your network (the point at which traffic leaves your business for an ISP or the Internet)</span></span>
    
 <span data-ttu-id="1e354-267">您可以从网络管理员处了解网络布局。</span><span class="sxs-lookup"><span data-stu-id="1e354-267">You can find out the layout of your network from the network administrator.</span></span> <span data-ttu-id="1e354-268">如果你在小型网络上，请查看连接到 Internet 的设备，如果你对布局有任何疑问，请致电你的 ISP。</span><span class="sxs-lookup"><span data-stu-id="1e354-268">If you're on a small network, take a look at the devices connecting you to the Internet, and call your ISP if you have questions about the layout.</span></span> <span data-ttu-id="1e354-269">创建最终布局的图形以供参考。</span><span class="sxs-lookup"><span data-stu-id="1e354-269">Create a graphic of the final layout for your reference.</span></span> 
  
<span data-ttu-id="1e354-270">本节分为简单的命令行工具和方法，以及更高级的工具选项。</span><span class="sxs-lookup"><span data-stu-id="1e354-270">This section is broken into simple command-line tools and methods, and more advanced tools options.</span></span> <span data-ttu-id="1e354-271">我们将首先介绍简单的方法。</span><span class="sxs-lookup"><span data-stu-id="1e354-271">We'll cover simple methods first.</span></span> <span data-ttu-id="1e354-272">但是，如果现在遇到了性能问题，则应跳转到高级方法，并尝试执行示例性能故障排除操作计划。</span><span class="sxs-lookup"><span data-stu-id="1e354-272">But if you've got a performance problem right now, you should jump to advanced methods and try out the sample performance-troubleshooting action plan.</span></span>
  
### <a name="simple-methods"></a><span data-ttu-id="1e354-273">简单方法</span><span class="sxs-lookup"><span data-stu-id="1e354-273">Simple methods</span></span>

<span data-ttu-id="1e354-274">这些简单方法的目标是了解如何在一段时间内学习、理解和正确地存储简单的性能基准，以便了解有关 Office 365 性能的信息。</span><span class="sxs-lookup"><span data-stu-id="1e354-274">The objective of these simple methods is to learn to take, understand, and properly store simple performance baselines over time so that you are informed about Office 365 performance.</span></span> <span data-ttu-id="1e354-275">下面是简单的简单图表，如下所示：</span><span class="sxs-lookup"><span data-stu-id="1e354-275">Here's the very simple diagram for simple, as you've seen before:</span></span>
  
![包含客户端、代理和云的基本网络以及工具建议 PSPing、TraceTCP 和网络跟踪。](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
> [!NOTE]
> <span data-ttu-id="1e354-277">TraceTCP 包含在此屏幕截图中，因为它是一种有用的工具，用于显示请求处理所需的时间，以及从一台计算机到下一台计算机的网络跃距或从一台计算机到下一台计算机之间的连接要到达目标所需的时间（以毫秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="1e354-277">TraceTCP is included in this screen shot because it's a useful tool for showing, in milliseconds, how long a request takes to process, and how many network hops, or connections from one computer to the next, that the request takes to reach a destination.</span></span> <span data-ttu-id="1e354-278">TraceTCP 还可以提供在跃点期间使用的服务器的名称，这对于支持中的 Microsoft Office 365 疑难解答非常有用。</span><span class="sxs-lookup"><span data-stu-id="1e354-278">TraceTCP can also give the names of servers used during hops, which can be useful to a Microsoft Office 365 troubleshooter in Support.</span></span> <span data-ttu-id="1e354-279">> TraceTCP 命令可能非常简单，例如： >  `tracetcp.exe outlook.office365.com:443`> 请务必在命令中包括端口号！</span><span class="sxs-lookup"><span data-stu-id="1e354-279">> TraceTCP commands can be very simple, such as: >  `tracetcp.exe outlook.office365.com:443`> Remember to include the port number in the command!</span></span><span data-ttu-id="1e354-280"> > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) 是免费下载，但依赖于 Wincap。</span><span class="sxs-lookup"><span data-stu-id="1e354-280"> > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) is a free download, but relies on Wincap.</span></span> <span data-ttu-id="1e354-281">Wincap 是一种也由 Netmon 使用和安装的工具。</span><span class="sxs-lookup"><span data-stu-id="1e354-281">Wincap is a tool that is also used and installed by Netmon.</span></span> <span data-ttu-id="1e354-282">我们还在 "高级方法" 部分中使用 Netmon。</span><span class="sxs-lookup"><span data-stu-id="1e354-282">We also use Netmon in the advanced methods section.</span></span> 
  
 <span data-ttu-id="1e354-283">如果有多个办公室，则还需要在每个位置的客户端中保留一组数据。</span><span class="sxs-lookup"><span data-stu-id="1e354-283">If you have multiple offices, you'll need to keep a set of data from a client in each of those locations as well.</span></span> <span data-ttu-id="1e354-284">此测试可衡量延迟，在这种情况下，它是一个数字值，它描述客户端向 Office 365 发送请求与 Office 365 响应请求之间的时间量。</span><span class="sxs-lookup"><span data-stu-id="1e354-284">This test measures latency, which, in this case, is a number value that describes the amount of time between a client sending a request to Office 365, and Office 365 responding to the request.</span></span> <span data-ttu-id="1e354-285">测试源于客户端计算机上的域，并在 Internet 中从传出点传出网络中的往返行程，并将其从 Internet 发送到 Office 365，然后再到上一页进行测量。</span><span class="sxs-lookup"><span data-stu-id="1e354-285">The testing originates inside your domain on a client computer, and looks to measure a round trip from inside your network, out through an egress point, across the Internet to Office 365, and back.</span></span> 
  
<span data-ttu-id="1e354-286">在这种情况下，有几种方法可以处理出局点（在此示例中为代理服务器）。</span><span class="sxs-lookup"><span data-stu-id="1e354-286">There are a few ways to deal with the egress point, in this case, the proxy server.</span></span> <span data-ttu-id="1e354-287">您可以从1到2进行跟踪，然后从2到3进行跟踪，然后以毫秒为单位添加数字以获得网络边缘的最终总计。</span><span class="sxs-lookup"><span data-stu-id="1e354-287">You can either trace from 1 to 2 and then 2 to 3, and then add the numbers in milliseconds to get a final total to the edge of your network.</span></span> <span data-ttu-id="1e354-288">或者，可以将连接配置为绕过 Office 365 地址的代理。</span><span class="sxs-lookup"><span data-stu-id="1e354-288">Or, you can configure the connection to bypass the proxy for Office 365 addresses.</span></span> <span data-ttu-id="1e354-289">在具有防火墙、反向代理或两者的某个组合的大型网络中，可能需要在代理服务器上发出例外，允许流量传递给大量 Url。</span><span class="sxs-lookup"><span data-stu-id="1e354-289">In a larger network with a firewall, reverse proxy, or some combination of the two, you may need to make exceptions on the proxy server that will allow traffic to pass for a lot of URLs.</span></span> <span data-ttu-id="1e354-290">有关 Office 365 使用的终结点列表，请参阅 [office 365 url 和 IP 地址范围](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2)。</span><span class="sxs-lookup"><span data-stu-id="1e354-290">For the list of endpoints used by Office 365, see [Office 365 URLs and IP address ranges](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span> <span data-ttu-id="1e354-291">如果您有身份验证代理，请首先测试以下项的异常：</span><span class="sxs-lookup"><span data-stu-id="1e354-291">If you have an authenticating proxy, begin by testing exceptions for the following:</span></span>
  
- <span data-ttu-id="1e354-292">端口80和443</span><span class="sxs-lookup"><span data-stu-id="1e354-292">Ports 80 and 443</span></span>
    
- <span data-ttu-id="1e354-293">TCP 和 HTTPs</span><span class="sxs-lookup"><span data-stu-id="1e354-293">TCP and HTTPs</span></span>
    
- <span data-ttu-id="1e354-294">出站到以下任意 Url 的连接：</span><span class="sxs-lookup"><span data-stu-id="1e354-294">Connections that are outbound to any of these URLs:</span></span>
    
- <span data-ttu-id="1e354-295">\*。 microsoftonline.com</span><span class="sxs-lookup"><span data-stu-id="1e354-295">\*.microsoftonline.com</span></span>
    
- <span data-ttu-id="1e354-296">\*。 microsoftonline-p.com</span><span class="sxs-lookup"><span data-stu-id="1e354-296">\*.microsoftonline-p.com</span></span>
    
- <span data-ttu-id="1e354-297">\*.sharepoint.com</span><span class="sxs-lookup"><span data-stu-id="1e354-297">\*.sharepoint.com</span></span>
    
- <span data-ttu-id="1e354-298">\*。 outlook.com</span><span class="sxs-lookup"><span data-stu-id="1e354-298">\*.outlook.com</span></span>
    
- <span data-ttu-id="1e354-299">\*。 lync.com</span><span class="sxs-lookup"><span data-stu-id="1e354-299">\*.lync.com</span></span>
    
- <span data-ttu-id="1e354-300">osub.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="1e354-300">osub.microsoft.com</span></span>
    
<span data-ttu-id="1e354-301">必须允许所有用户访问这些地址，而无需任何代理干扰或身份验证。</span><span class="sxs-lookup"><span data-stu-id="1e354-301">All users need to be allowed to get to these addresses without any proxy interference or authentication.</span></span> <span data-ttu-id="1e354-302">在小型网络中，应将它们添加到 web 浏览器中的代理绕过列表中。</span><span class="sxs-lookup"><span data-stu-id="1e354-302">On a smaller network, you should add these to your proxy bypass list in your web browser.</span></span> 
  
<span data-ttu-id="1e354-303">若要将它们添加到 Internet Explorer 中的代理绕过列表，请转到 **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**。</span><span class="sxs-lookup"><span data-stu-id="1e354-303">To add these to your proxy bypass list in Internet Explorer, go to **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**.</span></span> <span data-ttu-id="1e354-304">您还可以在 "高级" 选项卡中找到代理服务器和代理服务器端口。</span><span class="sxs-lookup"><span data-stu-id="1e354-304">The advanced tab is also where you will find your proxy server and proxy server port.</span></span> <span data-ttu-id="1e354-305">您可能需要单击 " **为 LAN 使用代理服务器**" 复选框，以访问 " **高级** " 按钮。</span><span class="sxs-lookup"><span data-stu-id="1e354-305">You may need to click the checkbox **Use a proxy server for your LAN**, to access the **Advanced** button.</span></span> <span data-ttu-id="1e354-306">您需要确保选中 " **对本地地址绕过代理服务器** "。</span><span class="sxs-lookup"><span data-stu-id="1e354-306">You'll want to make sure that **Bypass proxy server for local addresses** is checked.</span></span> <span data-ttu-id="1e354-307">单击 " **高级**" 后，您将看到一个可在其中输入例外的文本框。</span><span class="sxs-lookup"><span data-stu-id="1e354-307">Once you click **Advanced**, you'll see a text box where you can enter exceptions.</span></span> <span data-ttu-id="1e354-308">使用分号分隔上面列出的通配符 Url，例如：</span><span class="sxs-lookup"><span data-stu-id="1e354-308">Separate the wildcard URLs listed above with semi-colons, for example:</span></span>
  
<span data-ttu-id="1e354-309">\*. microsoftonline.com; \*。 sharepoint.com</span><span class="sxs-lookup"><span data-stu-id="1e354-309">\*.microsoftonline.com; \*.sharepoint.com</span></span>
  
<span data-ttu-id="1e354-310">绕过代理之后，您应该能够直接在 Office 365 URL 上使用 ping 或 PsPing。</span><span class="sxs-lookup"><span data-stu-id="1e354-310">Once you bypass your proxy, you should be able to use ping or PsPing directly on an Office 365 URL.</span></span> <span data-ttu-id="1e354-311">下一步将测试 ping **outlook.office365.com**。</span><span class="sxs-lookup"><span data-stu-id="1e354-311">The next step will be to test ping **outlook.office365.com**.</span></span> <span data-ttu-id="1e354-312">或者，如果您正在使用 PsPing 或另一个工具，以允许您向命令提供端口号，PsPing 将根据 **portal.microsoftonline.com:443** 查看平均往返时间（以毫秒为单位）。</span><span class="sxs-lookup"><span data-stu-id="1e354-312">Or, if you're using PsPing or another tool that will let you supply a port number to the command, PsPing against **portal.microsoftonline.com:443** to see the average round trip time in milliseconds.</span></span> 
  
<span data-ttu-id="1e354-313">往返行程时间（或 RTT）是一个数字值，用于衡量向服务器（如 outlook.office365.com）发送 HTTP 请求所需的时间，并获得确认服务器知道您已执行此操作的响应。</span><span class="sxs-lookup"><span data-stu-id="1e354-313">The round trip time, or RTT, is a number value that measures how long it takes to send a HTTP request to a server like outlook.office365.com and get a response back that acknowledges the server knows that you did it.</span></span> <span data-ttu-id="1e354-314">有时，您会看到这种缩写为 RTT。</span><span class="sxs-lookup"><span data-stu-id="1e354-314">You'll sometimes see this abbreviated as RTT.</span></span> <span data-ttu-id="1e354-315">这应该是相对较短的时间量。</span><span class="sxs-lookup"><span data-stu-id="1e354-315">This should be a relatively short amount of time.</span></span>
  
<span data-ttu-id="1e354-316">您必须使用 [PSPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) 或其他不使用 ICMP 数据包的工具，这些数据包被 Office 365 阻止，以便执行此测试。</span><span class="sxs-lookup"><span data-stu-id="1e354-316">You have to use [PSPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) or another tool that does not use ICMP packets which are blocked by Office 365 in order to do this test.</span></span> 
  
 <span data-ttu-id="1e354-317">**如何使用 PsPing 从 Office 365 URL 中直接获取整体往返时间（以毫秒为单位）**</span><span class="sxs-lookup"><span data-stu-id="1e354-317">**How to use PsPing to get an overall round trip time in milliseconds directly from an Office 365 URL**</span></span>
  
1. <span data-ttu-id="1e354-318">通过完成以下步骤运行提升的命令提示符：</span><span class="sxs-lookup"><span data-stu-id="1e354-318">Run an elevated command prompt by completing these steps:</span></span>
    
1. <span data-ttu-id="1e354-319">单击“**开始**”。</span><span class="sxs-lookup"><span data-stu-id="1e354-319">Click **Start**.</span></span>
    
2. <span data-ttu-id="1e354-320">在 " **开始搜索** " 框中，键入 cmd，然后按 CTRL + SHIFT + ENTER。</span><span class="sxs-lookup"><span data-stu-id="1e354-320">In the **Start Search** box, type cmd, and then press CTRL+SHIFT+ENTER.</span></span>
    
3. <span data-ttu-id="1e354-321">如果出现“**用户帐户控制**”对话框，请确认所显示的是您想要执行的操作，然后单击“**继续**”。</span><span class="sxs-lookup"><span data-stu-id="1e354-321">If the **User Account Control** dialog box appears, confirm that the action it displays is what you want, and then click **Continue**.</span></span>
    
2. <span data-ttu-id="1e354-322">导航到在此示例中 (工具的文件夹。在此示例中安装了 PsPing) 并测试这些 Office 365 Url：</span><span class="sxs-lookup"><span data-stu-id="1e354-322">Navigate to the folder where the tool (in this case PsPing) is installed and test these Office 365 URLs:</span></span>
    
  - <span data-ttu-id="1e354-323">psping portal.office.com:443</span><span class="sxs-lookup"><span data-stu-id="1e354-323">psping portal.office.com:443</span></span>
    
  - <span data-ttu-id="1e354-324">psping microsoft-my.sharepoint.com:443</span><span class="sxs-lookup"><span data-stu-id="1e354-324">psping microsoft-my.sharepoint.com:443</span></span>
    
  - <span data-ttu-id="1e354-325">psping outlook.office365.com:443</span><span class="sxs-lookup"><span data-stu-id="1e354-325">psping outlook.office365.com:443</span></span>
    
  - <span data-ttu-id="1e354-326">psping www.yammer.com:443</span><span class="sxs-lookup"><span data-stu-id="1e354-326">psping www.yammer.com:443</span></span>
    
    ![PSPing 命令转到 microsoft-my.sharepoint.com 端口443。](../media/3258f620-4513-4e82-95c9-06b387fc3a82.PNG)
  
<span data-ttu-id="1e354-328">请务必包括端口号443。</span><span class="sxs-lookup"><span data-stu-id="1e354-328">Be sure to include the port number of 443.</span></span> <span data-ttu-id="1e354-329">请注意，Office 365 在加密频道上工作正常。</span><span class="sxs-lookup"><span data-stu-id="1e354-329">Remember that Office 365 works on an encrypted channel.</span></span> <span data-ttu-id="1e354-330">如果没有端口号，则您的请求将失败 PsPing。</span><span class="sxs-lookup"><span data-stu-id="1e354-330">If you PsPing without the port number, your request will fail.</span></span> <span data-ttu-id="1e354-331">在 ping 你的短列表后，请查找以毫秒为单位的平均时间 (ms) 。</span><span class="sxs-lookup"><span data-stu-id="1e354-331">Once you've pinged your short list, look for the Average time in milliseconds (ms).</span></span> <span data-ttu-id="1e354-332">这就是您想要录制的内容！</span><span class="sxs-lookup"><span data-stu-id="1e354-332">That is what you want to record!</span></span>
  
![该图显示了在往返时间为2.8 毫秒的情况下，客户端到代理 PSPing 的说明。](../media/96901aea-1093-4f1b-b5a3-6078e9035e6c.png)
  
<span data-ttu-id="1e354-334">如果您不熟悉代理旁路，并且想要分步采取措施，则需要先找出代理服务器的名称。</span><span class="sxs-lookup"><span data-stu-id="1e354-334">If you're not familiar with proxy bypass, and prefer to take things step-by-step, you need to first find out the name of your proxy server.</span></span> <span data-ttu-id="1e354-335">在 internet Explorer 中，转到 **工具** \> **Internet 选项** \> **连接** \> **LAN 设置** \> **高级**。</span><span class="sxs-lookup"><span data-stu-id="1e354-335">In Internet Explorer go to **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**.</span></span> <span data-ttu-id="1e354-336">" **高级** " 选项卡是您将在其中看到列出的代理服务器的位置。</span><span class="sxs-lookup"><span data-stu-id="1e354-336">The **Advanced** tab is where you will see your proxy server listed.</span></span> <span data-ttu-id="1e354-337">通过完成此任务在命令提示符处 Ping 代理服务器：</span><span class="sxs-lookup"><span data-stu-id="1e354-337">Ping that proxy server at a command prompt by completing this task:</span></span> 
  
 <span data-ttu-id="1e354-338">**Ping 代理服务器并获取阶段1到2的往返行程值（以毫秒为单位）**</span><span class="sxs-lookup"><span data-stu-id="1e354-338">**To ping the proxy server and get a round trip value in milliseconds for stage 1 to 2**</span></span>
  
1. <span data-ttu-id="1e354-339">通过完成以下步骤运行提升的命令提示符：</span><span class="sxs-lookup"><span data-stu-id="1e354-339">Run an elevated command prompt by completing these steps:</span></span>
    
1. <span data-ttu-id="1e354-340">单击“**开始**”。</span><span class="sxs-lookup"><span data-stu-id="1e354-340">Click **Start**.</span></span>
    
2. <span data-ttu-id="1e354-341">在 " **开始搜索** " 框中，键入 cmd，然后按 CTRL + SHIFT + ENTER。</span><span class="sxs-lookup"><span data-stu-id="1e354-341">In the **Start Search** box, type cmd, and then press CTRL+SHIFT+ENTER.</span></span>
    
3. <span data-ttu-id="1e354-342">如果出现“**用户帐户控制**”对话框，请确认所显示的是您想要执行的操作，然后单击“**继续**”。</span><span class="sxs-lookup"><span data-stu-id="1e354-342">If the **User Account Control** dialog box appears, confirm that the action it displays is what you want, and then click **Continue**.</span></span>
    
2. <span data-ttu-id="1e354-343">键入 ping \<the name of the proxy server your browser uses, or the IP address of the proxy server\> ，然后按 enter 键。</span><span class="sxs-lookup"><span data-stu-id="1e354-343">Type ping \<the name of the proxy server your browser uses, or the IP address of the proxy server\> and then press ENTER.</span></span> <span data-ttu-id="1e354-344">如果已安装 PsPing 或其他工具，则可以选择改用该工具。</span><span class="sxs-lookup"><span data-stu-id="1e354-344">If you have PsPing, or some other tool, installed, you can choose to use that tool instead.</span></span> 
    
    <span data-ttu-id="1e354-345">您的命令可能如下例所示：</span><span class="sxs-lookup"><span data-stu-id="1e354-345">Your command may look like any of these examples:</span></span> 
    
  - <span data-ttu-id="1e354-346">ping ourproxy.ourdomain.industry.business.com</span><span class="sxs-lookup"><span data-stu-id="1e354-346">ping ourproxy.ourdomain.industry.business.com</span></span>
    
  - <span data-ttu-id="1e354-347">ping 155.55.121.55</span><span class="sxs-lookup"><span data-stu-id="1e354-347">ping 155.55.121.55</span></span>
    
  - <span data-ttu-id="1e354-348">ping ourproxy</span><span class="sxs-lookup"><span data-stu-id="1e354-348">ping ourproxy</span></span>
    
  - <span data-ttu-id="1e354-349">psping ourproxy.ourdomain.industry.business.com:80</span><span class="sxs-lookup"><span data-stu-id="1e354-349">psping ourproxy.ourdomain.industry.business.com:80</span></span>
    
  - <span data-ttu-id="1e354-350">psping 155.55.121.55：80</span><span class="sxs-lookup"><span data-stu-id="1e354-350">psping 155.55.121.55:80</span></span>
    
  - <span data-ttu-id="1e354-351">psping ourproxy：80</span><span class="sxs-lookup"><span data-stu-id="1e354-351">psping ourproxy:80</span></span>
    
3. <span data-ttu-id="1e354-352">当跟踪停止发送测试数据包时，你将获得一个小摘要，其中列出了平均值（以毫秒为单位），这是你的值。</span><span class="sxs-lookup"><span data-stu-id="1e354-352">When the trace stops sending test packets, you'll get a small summary that lists an average, in milliseconds, and that's the value you're after.</span></span> <span data-ttu-id="1e354-353">获取提示的屏幕截图并使用您的命名约定保存它。</span><span class="sxs-lookup"><span data-stu-id="1e354-353">Take a screen shot of the prompt and save it using your naming convention.</span></span> <span data-ttu-id="1e354-354">此时，还可能会帮助您在图表中填入值。</span><span class="sxs-lookup"><span data-stu-id="1e354-354">At this point it may also help to fill in the diagram with the value.</span></span>
    
<span data-ttu-id="1e354-355">或许你已在上午早上进行跟踪，并且你的客户端可以访问代理 (或快速退出 Internet 的任何出口服务器) 。</span><span class="sxs-lookup"><span data-stu-id="1e354-355">Maybe you've taken a trace in the early morning, and your client can get to the proxy (or whatever egress server exits to the Internet) quickly.</span></span> <span data-ttu-id="1e354-356">在这种情况下，你的号码可能如下所示：</span><span class="sxs-lookup"><span data-stu-id="1e354-356">In this case, your numbers may look like this:</span></span>
  
![显示从一台客户端到2.8 毫秒的代理的往返时间的图形。](../media/1bd03544-23fc-47d4-bbae-c1feb466a5d8.PNG)
  
<span data-ttu-id="1e354-358">如果您的客户端计算机是对代理 (或出局) 服务器的访问权限之一，则可以通过远程连接到该计算机来运行该测试的下一步，从那里运行命令提示符 PsPing 到 Office 365 URL。</span><span class="sxs-lookup"><span data-stu-id="1e354-358">If your client computer is one of the select few with access to the proxy (or egress) server, you can run the next leg of the test by remotely connecting to that computer, running the command prompt to PsPing to an Office 365 URL from there.</span></span> <span data-ttu-id="1e354-359">如果您没有对该计算机的访问权限，则可以联系网络资源，以获取下一条腿的帮助，并获得确切的号码。</span><span class="sxs-lookup"><span data-stu-id="1e354-359">If you don't have access to that computer, you can contact your network resources for help with the next leg and get exact numbers that way.</span></span> <span data-ttu-id="1e354-360">如果不可能，请针对相关 Office 365 URL 采取 PsPing，并将其与 PsPing 或 Ping time 相对于代理服务器进行比较。</span><span class="sxs-lookup"><span data-stu-id="1e354-360">If that's not possible, take a PsPing against the Office 365 URL in question and compare it to the PsPing or Ping time against your proxy server.</span></span> 
  
<span data-ttu-id="1e354-361">例如，如果从客户端到 Office 365 URL 的51.84 毫秒，而从客户端到代理 (或出局点) 的时间为2.8 毫秒，则从外出365到 Office 的时间为49.04 毫秒。</span><span class="sxs-lookup"><span data-stu-id="1e354-361">For example, if you have 51.84 milliseconds from the client to the Office 365 URL, and you have 2.8 milliseconds from the client to the proxy (or egress point), then you have 49.04 milliseconds from the egress to Office 365.</span></span> <span data-ttu-id="1e354-362">同样，如果从客户端到代理的 PsPing 为12.25 毫秒，在一天的高度和从客户端到 Office 365 URL 的62.01 毫秒之间，则到 Office 365 URL 的代理传出的平均值为49.76 毫秒。</span><span class="sxs-lookup"><span data-stu-id="1e354-362">Likewise, if you have a PsPing of 12.25 milliseconds from the client to the proxy during the height of the day, and 62.01 milliseconds from the client to the Office 365 URL, then your average value for the proxy egress to the Office 365 URL is 49.76 milliseconds.</span></span>
  
![显示从客户端到 Office 365 旁边的 ping 的其他图形（以毫秒为单位），以便可以减去这些值。](../media/cd764e77-5154-44ba-a5cd-443a628eb2d9.PNG)
  
<span data-ttu-id="1e354-364">在进行故障排除的过程中，您可能会发现，只是保留这些基准是很有趣的。</span><span class="sxs-lookup"><span data-stu-id="1e354-364">In terms of troubleshooting, you may find something interesting just from keeping these baselines.</span></span> <span data-ttu-id="1e354-365">例如，如果发现从代理或传出点到 Office 365 URL 通常有大约40到59毫秒的延迟，并将客户端到约3到7毫秒的代理或出口点延迟 (具体取决于您在一天中看到的网络流量量) 那么，如果您的最后三个客户端代理或出局基准显示延迟为45毫秒，则您肯定会知道存在什么问题。</span><span class="sxs-lookup"><span data-stu-id="1e354-365">For example, if you find that you generally have about 40 to 59 milliseconds of latency from the proxy or egress point to the Office 365 URL, and have a client to proxy or egress point latency of about 3 to 7 milliseconds (depending on the amount network traffic you're seeing during that time of day) then you will surely know something is problematic if your last three client to proxy or egress baselines show a latency of 45 milliseconds.</span></span>
  
### <a name="advanced-methods"></a><span data-ttu-id="1e354-366">高级方法</span><span class="sxs-lookup"><span data-stu-id="1e354-366">Advanced methods</span></span>

<span data-ttu-id="1e354-367">如果您确实想知道您的 Internet 请求在 Office 365 中发生的情况，您需要熟悉网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-367">If you really want to know what is happening with your Internet requests to Office 365, you need to become familiar with network traces.</span></span> <span data-ttu-id="1e354-368">您喜欢这些跟踪、HTTPWatch、Netmon、消息分析程序、Wireshark、Fiddler、开发人员仪表板工具或任何其他工具的情况并不重要，只要该工具可以捕获和筛选网络流量。</span><span class="sxs-lookup"><span data-stu-id="1e354-368">It does not matter which tools you prefer for these traces, HTTPWatch, Netmon, Message Analyzer, Wireshark, Fiddler, Developer Dashboard tool or any other will do as long as that tool can capture and filter network traffic.</span></span> <span data-ttu-id="1e354-369">在本节中，您将看到运行这些工具中的多个工具，以获得更完整的问题的详细信息是有益的。</span><span class="sxs-lookup"><span data-stu-id="1e354-369">You'll see in this section that it's beneficial to run more than one of these tools to get a more complete picture of the problem.</span></span> <span data-ttu-id="1e354-370">在测试时，这些工具中的一些也会在自己的权限中充当代理。</span><span class="sxs-lookup"><span data-stu-id="1e354-370">When you're testing, some of these tools also act as proxies in their own right.</span></span> <span data-ttu-id="1e354-371">在配套文章中使用的工具、 [Office 365 的性能故障排除计划](performance-troubleshooting-plan.md)、包括 [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865)、 [HTTPWatch](https://www.httpwatch.com/download/)或 [WireShark](https://www.wireshark.org/)。</span><span class="sxs-lookup"><span data-stu-id="1e354-371">Tools used in the companion article, [Performance troubleshooting plan for Office 365](performance-troubleshooting-plan.md), include [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865), [HTTPWatch](https://www.httpwatch.com/download/), or [WireShark](https://www.wireshark.org/).</span></span>
  
<span data-ttu-id="1e354-372">性能基线是此方法的简单部分，其中的许多步骤与解决性能问题时的步骤相同。</span><span class="sxs-lookup"><span data-stu-id="1e354-372">Taking a performance baseline is the simple part of this method, and many of the steps are the same as when you troubleshoot a performance issue.</span></span> <span data-ttu-id="1e354-373">创建性能基线的更高级方法要求您采用和存储网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-373">The more advanced methods of creating baselines for performance requires you to take and store network traces.</span></span> <span data-ttu-id="1e354-374">本文中的大多数示例都使用 SharePoint Online，但您应该在订阅的 Office 365 服务中为测试和记录创建一系列常见操作。</span><span class="sxs-lookup"><span data-stu-id="1e354-374">Most of the examples in this article use SharePoint Online, but you should develop a list of common actions across the Office 365 services to which you subscribe to test and record.</span></span> <span data-ttu-id="1e354-375">下面是一个比较基准示例：</span><span class="sxs-lookup"><span data-stu-id="1e354-375">Here is a baseline example:</span></span>
  
- <span data-ttu-id="1e354-376">SPO 的基线列表-\* \* 步骤1： \* \* 浏览 SPO 网站的主页并执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-376">Baseline list for SPO - \*\* Step 1: \*\* Browse the home page of the SPO website and do a network trace.</span></span> <span data-ttu-id="1e354-377">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-377">Save the trace.</span></span> 
    
- <span data-ttu-id="1e354-378">SPO 的基线列表- **步骤2：** 搜索术语 (如公司名称) 通过企业级搜索和执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-378">Baseline list for SPO - **Step 2:** Search for a term (such as your company name) via Enterprise Search and do a network trace.</span></span> <span data-ttu-id="1e354-379">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-379">Save the trace.</span></span> 
    
- <span data-ttu-id="1e354-380">SPO 的基线列表- **第3步：** 将大型文件上传到 SharePoint Online 文档库并执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-380">Baseline list for SPO - **Step 3:** Upload a large file to a SharePoint Online document library and do a network trace.</span></span> <span data-ttu-id="1e354-381">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-381">Save the trace.</span></span> 
    
- <span data-ttu-id="1e354-382">SPO 的基线列表- **步骤4：** 浏览 OneDrive 网站的主页并执行网络跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-382">Baseline list for SPO - **Step 4:** Browse the home page of the OneDrive website and do a network trace.</span></span> <span data-ttu-id="1e354-383">保存跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-383">Save the trace.</span></span> 
    
<span data-ttu-id="1e354-384">此列表应包括用户对 SharePoint Online 所执行的最重要的常见操作。</span><span class="sxs-lookup"><span data-stu-id="1e354-384">This list should include the most important common actions that users take against SharePoint Online.</span></span> <span data-ttu-id="1e354-385">请注意，最后一步是跟踪到 OneDrive for business，这是在 SharePoint Online (主页的负载之间进行比较的，这通常是由公司) 和 OneDrive for business 主页进行自定义的，很少进行自定义。</span><span class="sxs-lookup"><span data-stu-id="1e354-385">Notice that the last step, to trace going to OneDrive for Business, builds-in a comparison between the load of the SharePoint Online home page (which is often customized by companies) and OneDrive for Business home page, which is seldom customized.</span></span> <span data-ttu-id="1e354-386">当遇到速度较慢的 SharePoint Online 网站时，这是一个非常基本的测试。</span><span class="sxs-lookup"><span data-stu-id="1e354-386">This is a very basic test when it comes to a slow-loading SharePoint Online site.</span></span> <span data-ttu-id="1e354-387">你可以将此差异的记录构建到测试中。</span><span class="sxs-lookup"><span data-stu-id="1e354-387">You can build a record of this difference into your testing.</span></span>
  
<span data-ttu-id="1e354-388">如果您处于性能问题的中间部分，则许多步骤与采用比较基准时相同。</span><span class="sxs-lookup"><span data-stu-id="1e354-388">If you are in the middle of a performance problem, many of the steps are the same as when taking a baseline.</span></span> <span data-ttu-id="1e354-389">网络跟踪变得至关重要，因此我们将  *处理下*  一步的重要跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-389">Network traces become critical, so we'll handle  *how*  to take the important traces next.</span></span> 
  
<span data-ttu-id="1e354-390">若要解决性能问题，  *现在*  您需要在遇到性能问题时进行跟踪。</span><span class="sxs-lookup"><span data-stu-id="1e354-390">To tackle a performance problem,  *right now*  , you need to be taking a trace at the time you are experiencing the performance issue.</span></span> <span data-ttu-id="1e354-391">您需要具有适当的工具来收集日志，并且您需要一个行动计划，即，要采取的故障排除操作的列表，以收集您可以使用的最佳信息。</span><span class="sxs-lookup"><span data-stu-id="1e354-391">You need to have the proper tools available to gather logs, and you need an action plan, that is, a list of troubleshooting actions to take to gather the best information that you can.</span></span> <span data-ttu-id="1e354-392">要做的第一件事就是记录测试的日期和时间，以便可以将文件保存在反映计时的文件夹中。</span><span class="sxs-lookup"><span data-stu-id="1e354-392">The first thing to do is record the date and time of the test so that the files can be saved in a folder that reflect the timing.</span></span> <span data-ttu-id="1e354-393">接下来，缩小问题步骤本身。</span><span class="sxs-lookup"><span data-stu-id="1e354-393">Next, narrow down to the problem steps themselves.</span></span> <span data-ttu-id="1e354-394">以下是您将用于测试的确切步骤。</span><span class="sxs-lookup"><span data-stu-id="1e354-394">These are the exact steps you will use for testing.</span></span> <span data-ttu-id="1e354-395">不要忘记基本操作：如果问题仅与 Outlook 一起使用，请确保记录该问题行为只发生在一个 Office 365 服务中。</span><span class="sxs-lookup"><span data-stu-id="1e354-395">Don't forget the basics: if the issue is only with Outlook, make sure to record that the problem behavior happens in only one Office 365 service.</span></span> <span data-ttu-id="1e354-396">缩小此问题的范围将有助于您将注意力集中在可以解决的内容上。</span><span class="sxs-lookup"><span data-stu-id="1e354-396">Narrowing down the scope of this issue will help you to focus on something you can resolve.</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="1e354-397">另请参阅</span><span class="sxs-lookup"><span data-stu-id="1e354-397">See also</span></span>

[<span data-ttu-id="1e354-398">管理 Office 365 终结点</span><span class="sxs-lookup"><span data-stu-id="1e354-398">Managing Office 365 endpoints</span></span>](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)

