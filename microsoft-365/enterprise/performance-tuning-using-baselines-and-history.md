---
title: 使用基线和性能历史记录优化 Office 365 性能
ms.author: tracyp
author: MSFTTracyP
manager: laurawi
ms.date: 8/31/2017
audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
f1.keywords:
- CSH
ms.custom:
- Adm_O365
- seo-marvel-apr2020
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: 1492cb94-bd62-43e6-b8d0-2a61ed88ebae
ms.collection:
- M365-security-compliance
- Ent_O365
- SPO_Content
description: 了解如何检查客户端计算机连接的历史记录，以帮助您及早检测新兴问题。
ms.openlocfilehash: 2337b14542f894e9a62037b2f032632147e45e09
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/14/2020
ms.locfileid: "46687852"
---
# <a name="office-365-performance-tuning-using-baselines-and-performance-history"></a>使用基线和性能历史记录优化 Office 365 性能

有几种简单的方法可以检查 Office 365 与您的业务之间的连接性能，让您能够建立连接的粗略基准。 了解客户端计算机连接的性能历史记录可帮助您及早检测新兴问题，识别和预测问题。
  
如果您没有使用过性能问题，本文旨在帮助您考虑一些常见问题，如如何知道您所看到的问题是性能问题而不是 Office 365 服务事件？ 如何规划最佳性能、长期？ 如何能够保持对性能的关注？ 如果您的团队或客户端在使用 Office 365 时发现性能低，并且您对上述任何问题感到疑惑，请继续阅读。
  
> [!IMPORTANT]
> **你的客户端和 Office 365 现在是否有性能问题？** 按照 [针对 Office 365 的性能故障排除计划](performance-troubleshooting-plan.md)中概述的步骤进行操作。 
    
## <a name="something-you-should-know-about-office-365-performance"></a>您应该了解的有关 Office 365 性能的事项

Office 365 位于高容量专用 Microsoft 网络中，该网络不只受自动化的监视，而是真实人员。 维护 Office 365 云的角色的一部分是在实现性能调整和简化的情况下进行优化。 由于 Office 365 云的客户端必须通过 Internet 进行连接，因此在不同的 Office 365 服务中进行微调的速度也会不断提高。 性能改进决不会真正在云中停止，并且在保持云正常运行和快速的情况方面有很多积累的体验。 如果从您的位置连接到 Office 365 时遇到性能问题，最好不要从支持用例开始，再等待。 相反，应开始调查 "内部输出" 中的问题。 也就是说，从你的网络中开始，然后向 Office 365 推出。 在使用 Office 365 支持打开事例之前，您可以收集数据并执行操作，并可能会解决问题。
  
> [!IMPORTANT]
> 请注意 Office 365 中的容量规划和限制。 当您尝试解决性能问题时，该信息将使您排在曲线的前面。 以下是 [Microsoft 365 和 Office 365 服务说明](https://docs.microsoft.com/office365/servicedescriptions/office-365-service-descriptions-technet-library)的链接。 这是一个中心中心，Office 365 提供的所有服务都有一个从此处转到其自己的服务说明的链接。 这意味着，如果您需要查看 SharePoint Online 的标准限制，请单击 " [Sharepoint Online 服务说明](https://technet.microsoft.com/library/sharepoint-online-service-description.aspx) " 并找到其 " [sharepoint online 限制" 部分](https://go.microsoft.com/fwlink/p/?LinkID=856113)。 
  
请务必进行故障排除，以了解性能是可调的，不应获取 idealized 值并将其永久保留 (如果您认为这是这样，那么偶尔的高带宽任务（如加入大量用户，或执行大型数据迁移）将会非常大的压力--因此，应规划性能影响，然后) 。 你可以且应该能够大致了解性能目标，但很多变量在性能上会发挥作用，因此性能各不相同。 这就是性能的性质。 
  
性能故障排除不涉及会议特定目标并无限期地维护这些号码，这是为了改进现有活动（假设所有变量）。 
  
## <a name="okay-what-does-a-performance-problem-look-like"></a>好的，性能问题看起来是什么样子的？

首先，你需要确保你遇到的问题确实是性能问题，而不是服务事件。 性能问题与 Office 365 中的服务事件不同。 下面介绍如何区分这些内容。
  
如果 Office 365 服务有问题，这就是服务事件。 您将在 Microsoft 365 管理中心的 " **当前运行状况** " 下看到红色或黄色图标，在连接到 Office 365 的客户端计算机上，您可能还会注意到性能较慢。 例如，如果当前运行状况报告了一个红色的图标，并且你在 Exchange 旁边看到了 **调查** ，则你可能还会收到来自组织中的人员的一组呼叫，他们抱怨使用 Exchange Online 的客户端邮箱执行时错误。 在这种情况下，假定您的 Exchange Online 性能仅成为服务中的问题的牺牲品是合理的。 
  
![Office 365 运行状况仪表板，所有工作负荷显示为绿色，Exchange 除外，后者显示服务已还原。](../media/ec7f0325-9e61-4e1a-bec0-64b87f4469be.PNG)
  
此时，Office 365 管理员应检查 **当前运行状况** ，然后 **查看详细信息和历史记录**，以及时更新我们在系统上执行的维护。 已创建 **当前运行状况** 仪表板，以更新有关服务中的更改和问题的信息。 向管理员的运行状况历史记录中写入的注释和说明可帮助您评估影响，并使您在日常工作中进行了发布。 
  
![Office 365 运行状况仪表板的图片，它说明 Exchange Online 服务已还原，以及原因。](../media/66609554-426a-4448-8be6-ea09817f41ba.PNG)
  
性能问题不是服务事件，即使事件可能导致性能降低。 性能问题如下所示：
  
- 无论管理员中心的 **当前运行状况** 是为服务报告的，都会发生性能问题。 
    
-  用于相对无缝的行为需要很长时间才能完成或永远不会完成。 
    
- 您还可以复制问题，或者至少您知道在执行正确的一系列步骤时，将会发生此问题。
    
-  如果问题是间歇性的，则仍有一种模式，例如，在10:00 的情况下，你将收到无法可靠地访问 Office 365 的用户的呼叫，并且呼叫将在中午周围下降。 
    
这可能听起来非常熟悉;或许过于熟悉。 一旦您知道存在性能问题，问题就变成 "你接下来做什么？" 本文的其余部分将帮助您确定确切的情况。
  
## <a name="how-to-define-and-test-the-performance-problem"></a>如何定义和测试性能问题

性能问题通常会随着时间的推移而发生，因此定义实际问题可能是很困难的。 您需要创建一个好的问题陈述并为问题上下文做一个好主意，然后需要可重复的测试步骤才能赢得这一天。 否则，如果没有自己的故障，可能会丢失。 为什么？ 嗯，下面是一些不提供足够信息的问题声明示例：
  
- 从 "我的收件箱" 切换到我没有注意到的 "我的日历"，现在它是一个咖啡中断。 你可以让它与它的行为类似吗？
    
- 将我的文件上传到 SharePoint Online 会永久占用。 为什么下午慢，但在其他时间，速度很快？ 它无法快速实现吗？
    
上面的问题声明带来了一些大型挑战。 具体来说，有很多多义性需要处理。 例如：
  
- 不清楚如何在便携式计算机上使用的收件箱和日历之间切换。
    
- 当用户说： "无法再快些"，什么是 "快"？
    
- "永久" 的时间是多长？ 是数秒或数分钟，或者用户是否可以访问午餐，如果用户返回午餐，它会在十分钟后完成？
    
在所有这些情况下，不考虑管理员和疑难解答不能了解来自以下问题声明的许多详细信息。 例如，当问题开始发生时;用户在家工作，仅在家庭网络中看到慢速切换;用户必须在本地客户端上运行其他几个内存密集型应用程序，或者用户运行的是较旧的操作系统，或者没有运行最近的更新。
  
当用户报告性能问题时，需要收集大量信息。 收集此信息是对问题进行作用域或调查它的过程的一部分。 以下是可用于收集有关性能问题的信息的基本作用域列表。 此列表并不详尽，但它是启动您自己的一个位置： 
  
- 问题是在什么日期发生的，以及在白天或晚上的什么时间？
    
- 你使用的是哪种类型的客户端计算机，以及它如何连接到业务网络 (VPN、有线、无线) ？
    
- 您是否正在远程工作或是否已在 office 中工作？
    
- 您是否尝试在另一台计算机上执行相同的操作并查看相同的行为？
    
- 演练为您提供问题的步骤，以便您可以编写您将执行的操作。
    
- 以秒或分钟为单位的性能速度有多慢？
    
- 你在世界上的位置是什么？
    
其中一些问题比其他问题更明显。 大多数人都要了解故障排除程序需要的具体步骤才能再现问题。 毕竟，如何记录错误，以及如何在问题修复时测试其他信息？ 不太明显，如 "您看到问题的日期和时间是什么？" 和 "世界上的位置是什么？"，可以串联使用的信息。 根据用户的工作时间，几个小时的差异可能意味着维护已在公司网络的各个部分进行。 例如，如果您的公司有混合实施，如混合 SharePoint 搜索（可以同时在 SharePoint Online 和本地 SharePoint Server 2013 实例中查询搜索索引），则可能会在内部部署服务器场中进行更新。 如果您的公司都在云中，则系统维护可能包括添加或删除网络硬件、推出公司范围的更新，或者对 DNS 或其他核心基础结构进行更改。
  
当您解决性能问题时，我们有点像犯罪场景，您需要精确而 observant 地从证据中得出任何结论。 若要执行此操作，您必须通过收集证据获取一个正常的问题声明。 它应包括计算机的上下文、用户的上下文、问题开始时的上下文以及暴露性能问题的确切步骤。 此问题语句应和在您的笔记中的最顶层页面保持不变。 通过在解决解决方案后再次浏览问题声明，您将采取相应步骤来测试并证明您执行的操作是否已解决问题。 在完成工作时，了解这一点非常关键。
  
## <a name="do-you-know-how-performance-used-to-look-when-it-was-good"></a>您是否知道性能如何在什么情况中进行查看？

如果你是 unlucky，则没有人知道。 无人有号码。 这意味着无人可以回答这样一个简单的问题： "大约有多少秒用于在 Office 365 中显示收件箱？"，或 "在执行官拥有 Lync Online 会议时它使用的时间长短？"，这是许多公司的常见方案。
  
此处缺少的是性能基准。
  
基线为您的性能提供了一个上下文。 您应偶尔花费一些基准，具体取决于贵公司的需求。 如果您是一个更大的公司，则操作团队可能会对您的本地环境执行比较基准。 例如，如果您在每月的第一个星期一对所有 Exchange 服务器进行修补，并在第三个星期一的所有 SharePoint 服务器上进行修补，则操作团队可能会提供一系列任务和修补程序在修补后运行的方案，以证明关键功能能够正常运行。 例如，打开收件箱，单击 "发送/接收"，并确保文件夹更新，或者在 SharePoint 中浏览网站的主页面，进入企业级搜索页面，并执行返回结果的搜索。
  
如果您的应用程序在 Office 365 中，则您可以执行的一些最基本的基准是测量从网络内部的客户端计算机到出站点的时间 (（以毫秒为) 单位），或者是您离开网络并转到 Office 365 的点。 下面是您可以调查和录制的一些有用的基线：
  
- 确定客户端计算机和传出点之间的设备，例如代理服务器。
    
  - 您需要知道您的设备，以便您具有上下文 (IP 地址、设备类型等) ，以解决出现的性能问题。
    
  - 代理服务器是常见的出口点，因此您可以检查 web 浏览器以查看其设置使用的代理服务器（如果有）。
    
  - 有第三方工具可以发现和映射网络，但了解设备的最安全方法是询问网络团队的成员。
    
- 确定 Internet 服务提供商 (ISP) 、写下其联系人信息，并询问有多少电路的带宽。
    
- 在你的公司内部，识别你的客户端与传出点之间的设备的资源，或确定要与网络问题交谈的紧急联系人。
    
下面是使用工具进行的简单测试可为您计算的一些基准：
  
- 从客户端计算机到你的出局点的时间（以毫秒为单位）
    
- 从传出点到 Office 365 的时间（以毫秒为单位）
    
- 在浏览时解析 Office 365 URL 的服务器世界上的位置
    
- 您的 ISP 的 DNS 解析速度，以毫秒为单位，数据包到达的不一致 (网络抖动) ，上载和下载时间（以毫秒为单位）
    
如果您不熟悉如何执行这些步骤，我们将在本文中详细介绍。 
  
## <a name="what-is-a-baseline"></a>什么是比较基准？

您可以知道它在出现故障时的影响，但如果您不知道您的历史性能数据，则不可能有可能会有什么损坏的上下文，以及何时发生的情况。 因此，如果没有比较基准，就不会错过解决谜题的关键线索： "拼图" 框中的图片。 在性能故障排除中，需要进行  *比较*  。 简单的性能比较基准不是很难执行。 你的运营团队可能会对按计划执行这些任务的任务负责。 例如，假设您的连接如下所示： 
  
![显示客户端、代理和 Office 365 云的基本网络图形。](../media/c6ca7140-09f9-4c2d-a775-dbf2820eaa0c.PNG)
  
这意味着你已与你的网络团队进行了核对，并发现你通过代理服务器将公司留在 Internet 上，并且该代理将处理客户端计算机发送到云的所有请求。 在这种情况下，应绘制一个可列出所有干预设备的简化版本的连接。 现在，可以使用 "插入" 工具来测试客户端、传出点 (在离开 Internet 的网络) 的传出点和 Office 365 云之间的性能。
  
![包含客户端、代理和云的基本网络以及工具建议 PSPing、TraceTCP 和网络跟踪。](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
由于查找性能数据所需的专业知识量，这些选项将列为 **简单** 和 **高级** 。 与运行命令行工具（如 PsPing 和 TraceTCP）相比，网络跟踪需要很长时间。 这两个命令行工具已被选择，因为它们不使用 ICMP 数据包（它将被 Office 365 阻止），因为它们提供了将客户端计算机或代理服务器 (所需的时间（以毫秒为单位），如果您有权访问) 并到达 Office 365。 从一台计算机到另一台计算机的每个跃点都将以时间值结束，这对于比较基准而言非常好！ 同样重要的是，这些命令行工具允许您向命令中添加端口号，这很有用，因为 Office 365 通过端口443进行通信，该端口是安全套接字层和传输层安全性 (SSL 和 TLS) 中使用的端口。 但是，其他第三方工具可能是您的情况的更好解决方案。 Microsoft 不支持所有这些工具，因此，如果由于某种原因无法获取 PsPing 和 TraceTCP，请使用类似于 Netmon 的工具移动到网络跟踪。 
  
你可以在营业时间之前获取比较基准，再次使用，然后在数小时后再次使用。 这意味着，您的文件夹结构可能会在结尾处看上去类似于以下内容：
  
![建议将性能数据组织到文件夹的方式的图形。](../media/13e01ffa-f0f2-4d10-b89d-d5980ec89fae.png)
  
您还应选取文件的命名约定。 下面是一些示例：
  
- Feb_09_2015_9amPST_PerfBaseline_Netmon_ClientToEgress_Normal
    
- Jan_10_2015_3pmCST_PerfBaseline_PsPing_ClientToO365_bypassProxy_SLOW
    
- Feb_08_2015_2pmEST_PerfBaseline_BADPerf
    
- Feb_08_2015_8 30amEST_PerfBaseline_GoodPerf
    
有很多不同的方法可以实现此目的，但使用格式 **\<dateTime\>\<what's happening in the test\>** 是一个很好的入门之处。 为此，我们会在稍后尝试解决问题时帮助您这。 稍后，您将能够说出 "我在2月8日做了两个跟踪，一个显示好的性能，另一个显示了错误，因此可以对它们进行比较。 这对于故障排除非常有帮助。 
  
您需要有一个有条理的方式来保留历史比较基准。 在此示例中，简单方法生成了三个命令行输出，并将结果作为屏幕截图进行收集，但您可能有网络捕获文件。 使用最适用于您的方法。 存储历史比较基准并在您注意到在线服务行为发生变化的点处对其进行引用。 
  
## <a name="why-collect-performance-data-during-a-pilot"></a>为何在试点过程中收集性能数据？

在试用 Office 365 服务的过程中，开始制作基准的时间不会更好。 您的 office 可能有成千上万个用户、成百上千个，或者可能有五个，但即使用户数量较少，您也可以执行测试来测量性能波动。 在大型公司的情况下，可以将数百个用户试点 Office 365 的代表性示例向外投影到几个数以千计的，以便您知道问题在发生之前可能出现的位置。
  
在小型公司中，如果使用的是小型公司，则表示所有用户同时进入服务且没有试点，请保留性能措施，以便您可以向可能需要对执行错误的操作进行故障排除的任何人显示数据。 例如，如果您注意到，突然你可以在上载中型图形时所花的时间内开始进行你的建设，在这种情况下，它会很快发生。
  
## <a name="how-to-collect-baselines"></a>如何收集基线

对于所有故障排除计划，您需要至少确定以下各项：
  
- 您正在使用的客户端计算机 (计算机或设备的类型、IP 地址以及导致问题的操作) 
    
- 客户端计算机位于世界上 (例如，此用户是否在 VPN 上的网络、远程工作或公司 intranet) 
    
- 客户端计算机从你的网络中使用的出局点 (流量为 ISP 或 Internet 离开你的公司的时刻) 
    
 您可以从网络管理员处了解网络布局。 如果你在小型网络上，请查看连接到 Internet 的设备，如果你对布局有任何疑问，请致电你的 ISP。 创建最终布局的图形以供参考。 
  
本节分为简单的命令行工具和方法，以及更高级的工具选项。 我们将首先介绍简单的方法。 但是，如果现在遇到了性能问题，则应跳转到高级方法，并尝试执行示例性能故障排除操作计划。
  
### <a name="simple-methods"></a>简单方法

这些简单方法的目标是了解如何在一段时间内学习、理解和正确地存储简单的性能基准，以便了解有关 Office 365 性能的信息。 下面是简单的简单图表，如下所示：
  
![包含客户端、代理和云的基本网络以及工具建议 PSPing、TraceTCP 和网络跟踪。](../media/627bfb77-abf7-4ef1-bbe8-7f8cbe48e1d2.png)
  
> [!NOTE]
> TraceTCP 包含在此屏幕截图中，因为它是一种有用的工具，用于显示请求处理所需的时间，以及从一台计算机到下一台计算机的网络跃距或从一台计算机到下一台计算机之间的连接要到达目标所需的时间（以毫秒为单位）。 TraceTCP 还可以提供在跃点期间使用的服务器的名称，这对于支持中的 Microsoft Office 365 疑难解答非常有用。 > TraceTCP 命令可能非常简单，例如： >  `tracetcp.exe outlook.office365.com:443`> 请务必在命令中包括端口号！ > [TraceTCP](https://simulatedsimian.github.io/tracetcp_download.html) 是免费下载，但依赖于 Wincap。 Wincap 是一种也由 Netmon 使用和安装的工具。 我们还在 "高级方法" 部分中使用 Netmon。 
  
 如果有多个办公室，则还需要在每个位置的客户端中保留一组数据。 此测试可衡量延迟，在这种情况下，它是一个数字值，它描述客户端向 Office 365 发送请求与 Office 365 响应请求之间的时间量。 测试源于客户端计算机上的域，并在 Internet 中从传出点传出网络中的往返行程，并将其从 Internet 发送到 Office 365，然后再到上一页进行测量。 
  
在这种情况下，有几种方法可以处理出局点（在此示例中为代理服务器）。 您可以从1到2进行跟踪，然后从2到3进行跟踪，然后以毫秒为单位添加数字以获得网络边缘的最终总计。 或者，可以将连接配置为绕过 Office 365 地址的代理。 在具有防火墙、反向代理或两者的某个组合的大型网络中，可能需要在代理服务器上发出例外，允许流量传递给大量 Url。 有关 Office 365 使用的终结点列表，请参阅 [office 365 url 和 IP 地址范围](https://support.office.com/article/8548a211-3fe7-47cb-abb1-355ea5aa88a2)。 如果您有身份验证代理，请首先测试以下项的异常：
  
- 端口80和443
    
- TCP 和 HTTPs
    
- 出站到以下任意 Url 的连接：
    
- \*。 microsoftonline.com
    
- \*。 microsoftonline-p.com
    
- \*.sharepoint.com
    
- \*。 outlook.com
    
- \*。 lync.com
    
- osub.microsoft.com
    
必须允许所有用户访问这些地址，而无需任何代理干扰或身份验证。 在小型网络中，应将它们添加到 web 浏览器中的代理绕过列表中。 
  
若要将它们添加到 Internet Explorer 中的代理绕过列表，请转到 **Tools** \> **Internet Options** \> **Connections** \> **LAN settings** \> **Advanced**。 您还可以在 "高级" 选项卡中找到代理服务器和代理服务器端口。 您可能需要单击 " **为 LAN 使用代理服务器**" 复选框，以访问 " **高级** " 按钮。 您需要确保选中 " **对本地地址绕过代理服务器** "。 单击 " **高级**" 后，您将看到一个可在其中输入例外的文本框。 使用分号分隔上面列出的通配符 Url，例如：
  
\*. microsoftonline.com; \*。 sharepoint.com
  
绕过代理之后，您应该能够直接在 Office 365 URL 上使用 ping 或 PsPing。 下一步将测试 ping **outlook.office365.com**。 或者，如果您正在使用 PsPing 或另一个工具，以允许您向命令提供端口号，PsPing 将根据 **portal.microsoftonline.com:443** 查看平均往返时间（以毫秒为单位）。 
  
往返行程时间（或 RTT）是一个数字值，用于衡量向服务器（如 outlook.office365.com）发送 HTTP 请求所需的时间，并获得确认服务器知道您已执行此操作的响应。 有时，您会看到这种缩写为 RTT。 这应该是相对较短的时间量。
  
您必须使用 [PSPing](https://technet.microsoft.com/sysinternals/jj729731.aspx) 或其他不使用 ICMP 数据包的工具，这些数据包被 Office 365 阻止，以便执行此测试。 
  
 **如何使用 PsPing 从 Office 365 URL 中直接获取整体往返时间（以毫秒为单位）**
  
1. 通过完成以下步骤运行提升的命令提示符：
    
1. 单击“**开始**”。
    
2. 在 " **开始搜索** " 框中，键入 cmd，然后按 CTRL + SHIFT + ENTER。
    
3. 如果出现“**用户帐户控制**”对话框，请确认所显示的是您想要执行的操作，然后单击“**继续**”。
    
2. 导航到在此示例中 (工具的文件夹。在此示例中安装了 PsPing) 并测试这些 Office 365 Url：
    
  - psping portal.office.com:443
    
  - psping microsoft-my.sharepoint.com:443
    
  - psping outlook.office365.com:443
    
  - psping www.yammer.com:443
    
    ![PSPing 命令转到 microsoft-my.sharepoint.com 端口443。](../media/3258f620-4513-4e82-95c9-06b387fc3a82.PNG)
  
请务必包括端口号443。 请注意，Office 365 在加密频道上工作正常。 如果没有端口号，则您的请求将失败 PsPing。 在 ping 你的短列表后，请查找以毫秒为单位的平均时间 (ms) 。 这就是您想要录制的内容！
  
![该图显示了在往返时间为2.8 毫秒的情况下，客户端到代理 PSPing 的说明。](../media/96901aea-1093-4f1b-b5a3-6078e9035e6c.png)
  
如果您不熟悉代理旁路，并且想要分步采取措施，则需要先找出代理服务器的名称。 在 internet Explorer 中，转到 **工具** \> **Internet 选项** \> **连接** \> **LAN 设置** \> **高级**。 " **高级** " 选项卡是您将在其中看到列出的代理服务器的位置。 通过完成此任务在命令提示符处 Ping 代理服务器： 
  
 **Ping 代理服务器并获取阶段1到2的往返行程值（以毫秒为单位）**
  
1. 通过完成以下步骤运行提升的命令提示符：
    
1. 单击“**开始**”。
    
2. 在 " **开始搜索** " 框中，键入 cmd，然后按 CTRL + SHIFT + ENTER。
    
3. 如果出现“**用户帐户控制**”对话框，请确认所显示的是您想要执行的操作，然后单击“**继续**”。
    
2. 键入 ping \<the name of the proxy server your browser uses, or the IP address of the proxy server\> ，然后按 enter 键。 如果已安装 PsPing 或其他工具，则可以选择改用该工具。 
    
    您的命令可能如下例所示： 
    
  - ping ourproxy.ourdomain.industry.business.com
    
  - ping 155.55.121.55
    
  - ping ourproxy
    
  - psping ourproxy.ourdomain.industry.business.com:80
    
  - psping 155.55.121.55：80
    
  - psping ourproxy：80
    
3. 当跟踪停止发送测试数据包时，你将获得一个小摘要，其中列出了平均值（以毫秒为单位），这是你的值。 获取提示的屏幕截图并使用您的命名约定保存它。 此时，还可能会帮助您在图表中填入值。
    
或许你已在上午早上进行跟踪，并且你的客户端可以访问代理 (或快速退出 Internet 的任何出口服务器) 。 在这种情况下，你的号码可能如下所示：
  
![显示从一台客户端到2.8 毫秒的代理的往返时间的图形。](../media/1bd03544-23fc-47d4-bbae-c1feb466a5d8.PNG)
  
如果您的客户端计算机是对代理 (或出局) 服务器的访问权限之一，则可以通过远程连接到该计算机来运行该测试的下一步，从那里运行命令提示符 PsPing 到 Office 365 URL。 如果您没有对该计算机的访问权限，则可以联系网络资源，以获取下一条腿的帮助，并获得确切的号码。 如果不可能，请针对相关 Office 365 URL 采取 PsPing，并将其与 PsPing 或 Ping time 相对于代理服务器进行比较。 
  
例如，如果从客户端到 Office 365 URL 的51.84 毫秒，而从客户端到代理 (或出局点) 的时间为2.8 毫秒，则从外出365到 Office 的时间为49.04 毫秒。 同样，如果从客户端到代理的 PsPing 为12.25 毫秒，在一天的高度和从客户端到 Office 365 URL 的62.01 毫秒之间，则到 Office 365 URL 的代理传出的平均值为49.76 毫秒。
  
![显示从客户端到 Office 365 旁边的 ping 的其他图形（以毫秒为单位），以便可以减去这些值。](../media/cd764e77-5154-44ba-a5cd-443a628eb2d9.PNG)
  
在进行故障排除的过程中，您可能会发现，只是保留这些基准是很有趣的。 例如，如果发现从代理或传出点到 Office 365 URL 通常有大约40到59毫秒的延迟，并将客户端到约3到7毫秒的代理或出口点延迟 (具体取决于您在一天中看到的网络流量量) 那么，如果您的最后三个客户端代理或出局基准显示延迟为45毫秒，则您肯定会知道存在什么问题。
  
### <a name="advanced-methods"></a>高级方法

如果您确实想知道您的 Internet 请求在 Office 365 中发生的情况，您需要熟悉网络跟踪。 您喜欢这些跟踪、HTTPWatch、Netmon、消息分析程序、Wireshark、Fiddler、开发人员仪表板工具或任何其他工具的情况并不重要，只要该工具可以捕获和筛选网络流量。 在本节中，您将看到运行这些工具中的多个工具，以获得更完整的问题的详细信息是有益的。 在测试时，这些工具中的一些也会在自己的权限中充当代理。 在配套文章中使用的工具、 [Office 365 的性能故障排除计划](performance-troubleshooting-plan.md)、包括 [Netmon 3.4](https://www.microsoft.com/download/details.aspx?id=4865)、 [HTTPWatch](https://www.httpwatch.com/download/)或 [WireShark](https://www.wireshark.org/)。
  
性能基线是此方法的简单部分，其中的许多步骤与解决性能问题时的步骤相同。 创建性能基线的更高级方法要求您采用和存储网络跟踪。 本文中的大多数示例都使用 SharePoint Online，但您应该在订阅的 Office 365 服务中为测试和记录创建一系列常见操作。 下面是一个比较基准示例：
  
- SPO 的基线列表-* * 步骤1： * * 浏览 SPO 网站的主页并执行网络跟踪。 保存跟踪。 
    
- SPO 的基线列表- **步骤2：** 搜索术语 (如公司名称) 通过企业级搜索和执行网络跟踪。 保存跟踪。 
    
- SPO 的基线列表- **第3步：** 将大型文件上传到 SharePoint Online 文档库并执行网络跟踪。 保存跟踪。 
    
- SPO 的基线列表- **步骤4：** 浏览 OneDrive 网站的主页并执行网络跟踪。 保存跟踪。 
    
此列表应包括用户对 SharePoint Online 所执行的最重要的常见操作。 请注意，最后一步是跟踪到 OneDrive for business，这是在 SharePoint Online (主页的负载之间进行比较的，这通常是由公司) 和 OneDrive for business 主页进行自定义的，很少进行自定义。 当遇到速度较慢的 SharePoint Online 网站时，这是一个非常基本的测试。 你可以将此差异的记录构建到测试中。
  
如果您处于性能问题的中间部分，则许多步骤与采用比较基准时相同。 网络跟踪变得至关重要，因此我们将  *处理下*  一步的重要跟踪。 
  
若要解决性能问题，  *现在*  您需要在遇到性能问题时进行跟踪。 您需要具有适当的工具来收集日志，并且您需要一个行动计划，即，要采取的故障排除操作的列表，以收集您可以使用的最佳信息。 要做的第一件事就是记录测试的日期和时间，以便可以将文件保存在反映计时的文件夹中。 接下来，缩小问题步骤本身。 以下是您将用于测试的确切步骤。 不要忘记基本操作：如果问题仅与 Outlook 一起使用，请确保记录该问题行为只发生在一个 Office 365 服务中。 缩小此问题的范围将有助于您将注意力集中在可以解决的内容上。 
  
## <a name="see-also"></a>另请参阅

[管理 Office 365 终结点](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)

