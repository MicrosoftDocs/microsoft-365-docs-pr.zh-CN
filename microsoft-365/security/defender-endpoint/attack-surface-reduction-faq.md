---
title: '攻击面减少常见问题解答 (常见问题) '
description: 查找有关适用于终结点的 Microsoft Defender 攻击面减少规则的常见问题的解答。
keywords: 攻击面减少规则， asr， hips， 主机入侵防护系统， 保护规则， 反攻击， 攻击， 感染防护， microsoft defender 终结点
search.product: eADQiWindows 10XVcnh
ms.pagetype: security
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
author: martyav
ms.author: v-maave
ms.reviewer: ''
manager: dansimp
ms.custom: asr
ms.topic: article
ms.technology: mde
ms.openlocfilehash: 3ca429ca1fea125450fdbb8d1f3a0e3a745513d8
ms.sourcegitcommit: ff20f5b4e3268c7c98a84fb1cbe7db7151596b6d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2021
ms.locfileid: "52245692"
---
# <a name="attack-surface-reduction-frequently-asked-questions-faq"></a><span data-ttu-id="407ba-104">攻击面减少常见问题解答 (常见问题) </span><span class="sxs-lookup"><span data-stu-id="407ba-104">Attack surface reduction frequently asked questions (FAQ)</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]

<span data-ttu-id="407ba-105">**适用于：**</span><span class="sxs-lookup"><span data-stu-id="407ba-105">**Applies to:**</span></span>
- [<span data-ttu-id="407ba-106">Microsoft Defender for Endpoint</span><span class="sxs-lookup"><span data-stu-id="407ba-106">Microsoft Defender for Endpoint</span></span>](https://go.microsoft.com/fwlink/?linkid=2154037)
- [<span data-ttu-id="407ba-107">Microsoft 365 Defender</span><span class="sxs-lookup"><span data-stu-id="407ba-107">Microsoft 365 Defender</span></span>](https://go.microsoft.com/fwlink/?linkid=2118804)


## <a name="is-attack-surface-reduction-asr-part-of-windows"></a><span data-ttu-id="407ba-108">攻击面减少 (ASR) 是否属于Windows？</span><span class="sxs-lookup"><span data-stu-id="407ba-108">Is attack surface reduction (ASR) part of Windows?</span></span>

<span data-ttu-id="407ba-109">ASR 最初是作为 Microsoft Defender 防病毒 版本 1709 Windows 10的主要更新引入的一系列攻击防护功能的功能。</span><span class="sxs-lookup"><span data-stu-id="407ba-109">ASR was originally a feature of the suite of exploit guard features introduced as a major update to Microsoft Defender Antivirus, in Windows 10, version 1709.</span></span> <span data-ttu-id="407ba-110">Microsoft Defender 防病毒是应用程序本机反恶意软件Windows。</span><span class="sxs-lookup"><span data-stu-id="407ba-110">Microsoft Defender Antivirus is the native antimalware component of Windows.</span></span> <span data-ttu-id="407ba-111">但是，完整的 ASR 功能集仅适用于企业Windows许可证。</span><span class="sxs-lookup"><span data-stu-id="407ba-111">However, the full ASR feature-set is only available with a Windows enterprise license.</span></span> <span data-ttu-id="407ba-112">另请注意，ASR 规则排除项与规则排除项Microsoft Defender 防病毒分开管理。</span><span class="sxs-lookup"><span data-stu-id="407ba-112">Also note that ASR rule exclusions are managed separately from Microsoft Defender Antivirus exclusions.</span></span>

## <a name="do-i-need-to-have-an-enterprise-license-to-run-asr-rules"></a><span data-ttu-id="407ba-113">是否需要具有企业许可证才能运行 ASR 规则？</span><span class="sxs-lookup"><span data-stu-id="407ba-113">Do I need to have an enterprise license to run ASR rules?</span></span>

<span data-ttu-id="407ba-114">只有在你拥有适用于企业的企业许可证时，才支持整套 ASR 规则和Windows 10。</span><span class="sxs-lookup"><span data-stu-id="407ba-114">The full set of ASR rules and features is only supported if you have an enterprise license for Windows 10.</span></span> <span data-ttu-id="407ba-115">在没有企业许可证的情况下，可能只能使用有限数量的规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-115">A limited number of rules may work without an enterprise license.</span></span> <span data-ttu-id="407ba-116">如果已Microsoft 365 商业版，Microsoft Defender 防病毒安全解决方案，并通过 PowerShell 启用规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-116">If you have Microsoft 365 Business, set Microsoft Defender Antivirus as your primary security solution, and enable the rules through PowerShell.</span></span> <span data-ttu-id="407ba-117">在不使用企业许可证的情况下使用 ASR 不受正式支持，你将无法使用 ASR 的全部功能。</span><span class="sxs-lookup"><span data-stu-id="407ba-117">Using ASR without an enterprise license isn't officially supported and you won't be able to use the full capabilities of ASR.</span></span>

<span data-ttu-id="407ba-118">若要了解有关许可Windows，请参阅 Windows 10 [Licensing and](https://www.microsoft.com/licensing/product-licensing/windows10?activetab=windows10-pivot:primaryr5) get the [Volume Licensing guide for Windows 10](https://download.microsoft.com/download/2/D/1/2D14FE17-66C2-4D4C-AF73-E122930B60F6/Windows-10-Volume-Licensing-Guide.pdf)。</span><span class="sxs-lookup"><span data-stu-id="407ba-118">To learn more about Windows licensing, see [Windows 10 Licensing](https://www.microsoft.com/licensing/product-licensing/windows10?activetab=windows10-pivot:primaryr5) and get the [Volume Licensing guide for Windows 10](https://download.microsoft.com/download/2/D/1/2D14FE17-66C2-4D4C-AF73-E122930B60F6/Windows-10-Volume-Licensing-Guide.pdf).</span></span>

## <a name="is-asr-supported-if-i-have-an-e3-license"></a><span data-ttu-id="407ba-119">如果我有 E3 许可证，是否支持 ASR？</span><span class="sxs-lookup"><span data-stu-id="407ba-119">Is ASR supported if I have an E3 license?</span></span>

<span data-ttu-id="407ba-120">对。</span><span class="sxs-lookup"><span data-stu-id="407ba-120">Yes.</span></span> <span data-ttu-id="407ba-121">E3 及Windows Enterprise支持 ASR。</span><span class="sxs-lookup"><span data-stu-id="407ba-121">ASR is supported for Windows Enterprise E3 and above.</span></span> 

## <a name="which-features-are-supported-with-an-e5-license"></a><span data-ttu-id="407ba-122">E5 许可证支持哪些功能？</span><span class="sxs-lookup"><span data-stu-id="407ba-122">Which features are supported with an E5 license?</span></span>

<span data-ttu-id="407ba-123">E3 支持的所有规则也受 E5 支持。</span><span class="sxs-lookup"><span data-stu-id="407ba-123">All of the rules supported with E3 are also supported with E5.</span></span>

<span data-ttu-id="407ba-124">E5 添加了与 Defender for Endpoint 的更大集成。</span><span class="sxs-lookup"><span data-stu-id="407ba-124">E5 adds greater integration with Defender for Endpoint.</span></span> <span data-ttu-id="407ba-125">使用 E5，可以实时查看警报、微调规则排除项、配置 ASR 规则以及查看事件报告列表。</span><span class="sxs-lookup"><span data-stu-id="407ba-125">With E5, you can view alerts in real-time, fine-tune rule exclusions, configure ASR rules, and view lists of event reports.</span></span>

## <a name="what-are-the-currently-supported-asr-rules"></a><span data-ttu-id="407ba-126">当前支持的 ASR 规则是什么？</span><span class="sxs-lookup"><span data-stu-id="407ba-126">What are the currently supported ASR rules?</span></span>
<span data-ttu-id="407ba-127">ASR 当前支持以下所有规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-127">ASR currently supports all of the rules below.</span></span>

## <a name="what-rules-to-enable-all-or-can-i-turn-on-individual-rules"></a><span data-ttu-id="407ba-128">要启用哪些规则？</span><span class="sxs-lookup"><span data-stu-id="407ba-128">What rules to enable?</span></span> <span data-ttu-id="407ba-129">全部启用，或者我能否启用单个规则？</span><span class="sxs-lookup"><span data-stu-id="407ba-129">All, or can I turn on individual rules?</span></span>
<span data-ttu-id="407ba-130">为了帮助你找出最适合你的环境，我们建议你在审核模式下启用 ASR [规则](audit-windows-defender.md)。</span><span class="sxs-lookup"><span data-stu-id="407ba-130">To help you figure out what’s best for your environment, we recommended that you enable ASR rules in [audit mode](audit-windows-defender.md).</span></span> <span data-ttu-id="407ba-131">通过这种方法，可以确定对组织可能的影响。</span><span class="sxs-lookup"><span data-stu-id="407ba-131">With this approach, you’ll determine the possible affect to your organization.</span></span> <span data-ttu-id="407ba-132">例如，业务线应用程序。</span><span class="sxs-lookup"><span data-stu-id="407ba-132">For example, your line-of-business applications.</span></span>

## <a name="how-do-asr-rules-exclusions-work"></a><span data-ttu-id="407ba-133">ASR 规则排除如何工作？</span><span class="sxs-lookup"><span data-stu-id="407ba-133">How do ASR rules exclusions work?</span></span>
<span data-ttu-id="407ba-134">对于 ASR 规则，如果添加一个排除项，它将影响每个 ASR 规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-134">For ASR rules, if you add one exclusion, it will affect every ASR rule.</span></span>
<span data-ttu-id="407ba-135">以下两个特定规则不支持排除项：</span><span class="sxs-lookup"><span data-stu-id="407ba-135">The following two specific rules don't support exclusions:</span></span>

|<span data-ttu-id="407ba-136">规则名称</span><span class="sxs-lookup"><span data-stu-id="407ba-136">Rule name</span></span>|<span data-ttu-id="407ba-137">GUID</span><span class="sxs-lookup"><span data-stu-id="407ba-137">GUID</span></span>|<span data-ttu-id="407ba-138">文件&文件夹排除项</span><span class="sxs-lookup"><span data-stu-id="407ba-138">File & folder exclusions</span></span>|
|:--|:--|:--|
|<span data-ttu-id="407ba-139">阻止 JavaScript 或 VBScript 启动下载的可执行内容</span><span class="sxs-lookup"><span data-stu-id="407ba-139">Block JavaScript or VBScript from launching downloaded executable content</span></span>|<span data-ttu-id="407ba-140">D3E037E1-3EB8-44C8-A917-57927947596D</span><span class="sxs-lookup"><span data-stu-id="407ba-140">D3E037E1-3EB8-44C8-A917-57927947596D</span></span>|<span data-ttu-id="407ba-141">不支持</span><span class="sxs-lookup"><span data-stu-id="407ba-141">Not supported</span></span>|
|<span data-ttu-id="407ba-142">通过 WMI 事件订阅阻止持久性</span><span class="sxs-lookup"><span data-stu-id="407ba-142">Block persistence through WMI event subscription</span></span>|<span data-ttu-id="407ba-143">e6db77e5-3df2-4cf1-b95a-636979351e5b</span><span class="sxs-lookup"><span data-stu-id="407ba-143">e6db77e5-3df2-4cf1-b95a-636979351e5b</span></span>|<span data-ttu-id="407ba-144">不支持</span><span class="sxs-lookup"><span data-stu-id="407ba-144">Not supported</span></span>|

<span data-ttu-id="407ba-145">ASR 规则排除项支持通配符、路径和环境变量。</span><span class="sxs-lookup"><span data-stu-id="407ba-145">ASR rules exclusions support wildcards, paths, and environmental variables.</span></span> <span data-ttu-id="407ba-146">若要详细了解如何在 ASR 规则中使用通配符，请参阅配置和验证基于文件扩展名和文件夹位置 [的排除项](/windows/security/threat-protection/microsoft-defender-antivirus/configure-extension-file-exclusions-microsoft-defender-antivirus)。</span><span class="sxs-lookup"><span data-stu-id="407ba-146">For more information on how to use wildcards in ASR rules, see [configure and validate exclusions based on file extension and folder location](/windows/security/threat-protection/microsoft-defender-antivirus/configure-extension-file-exclusions-microsoft-defender-antivirus).</span></span>

<span data-ttu-id="407ba-147">请注意以下有关 ASR 规则排除项 (通配符和 env。</span><span class="sxs-lookup"><span data-stu-id="407ba-147">Be aware of the following items about ASR rules exclusions (including wildcards and env.</span></span> <span data-ttu-id="407ba-148">变量) ：</span><span class="sxs-lookup"><span data-stu-id="407ba-148">variables):</span></span>

- <span data-ttu-id="407ba-149">ASR 规则排除项独立于 Defender AV 排除项</span><span class="sxs-lookup"><span data-stu-id="407ba-149">ASR rules exclusions are independent from Defender AV exclusions</span></span>
- <span data-ttu-id="407ba-150">通配符不能用于定义驱动器号</span><span class="sxs-lookup"><span data-stu-id="407ba-150">Wildcards cannot be used to define a drive letter</span></span>
- <span data-ttu-id="407ba-151">如果要排除多个文件夹，在路径中使用多个 \ 实例来指示多个嵌套文件夹 (\* 例如 c：\Folder \* \* \Test) </span><span class="sxs-lookup"><span data-stu-id="407ba-151">If you want to exclude more than one folder, in a path, use multiple instances of \*\ to indicate multiple nested folders (for example, c:\Folder\*\*\Test)</span></span>
- <span data-ttu-id="407ba-152">Microsoft Endpoint Configuration Manager *不支持* 通配符 (\* 或 ？) </span><span class="sxs-lookup"><span data-stu-id="407ba-152">Microsoft Endpoint Configuration Manager *does not* support wildcards (\* or ?)</span></span>
- <span data-ttu-id="407ba-153">如果要排除包含随机字符的文件 (自动生成文件) ，可以使用"？"符号 (例如 C：\Folder\fileversion？.docx) </span><span class="sxs-lookup"><span data-stu-id="407ba-153">If you want to exclude a file, that contains random characters (automated file generation), you can use the '?' symbol (for example, C:\Folder\fileversion?.docx)</span></span>
- <span data-ttu-id="407ba-154">组策略中的 ASR 排除项不支持引号 (引擎将本机处理长路径、空格等，因此无需使用引号) </span><span class="sxs-lookup"><span data-stu-id="407ba-154">ASR exclusions in Group Policy don't support quotes (the engine will natively handle long path, spaces, etc., so there's no need to use quotes)</span></span>
- <span data-ttu-id="407ba-155">ASR 规则在 NT AUTHORITY\SYSTEM 帐户下运行，因此环境变量仅限于计算机变量。</span><span class="sxs-lookup"><span data-stu-id="407ba-155">ASR rules run under NT AUTHORITY\SYSTEM account, so environmental variables are limited to machine variables.</span></span>

## <a name="how-do-i-know-what-i-need-to-exclude"></a><span data-ttu-id="407ba-156">我如何知道需要排除哪些内容？</span><span class="sxs-lookup"><span data-stu-id="407ba-156">How do I know what I need to exclude?</span></span>
<span data-ttu-id="407ba-157">不同的 ASR 规则将具有不同的保护流。</span><span class="sxs-lookup"><span data-stu-id="407ba-157">Different ASR rules will have different protection flows.</span></span> <span data-ttu-id="407ba-158">请始终考虑要配置的 ASR 规则如何防范，以及实际执行流程如何平移。</span><span class="sxs-lookup"><span data-stu-id="407ba-158">Always think about what the ASR rule you are configuring protects against, and how the actual execution flow pans out.</span></span>

<span data-ttu-id="407ba-159">示例：阻止从 **Windows 本地** 安全机构子系统窃取凭据 直接从本地安全颁发机构子系统 (LSASS) 进程进行读取可能会带来安全风险，因为它可能会公开公司凭据。</span><span class="sxs-lookup"><span data-stu-id="407ba-159">Example: **Block credential stealing from the Windows local security authority subsystem** Reading directly from Local Security Authority Subsystem (LSASS) process can be a security risk, since it might expose corporate credentials.</span></span>

<span data-ttu-id="407ba-160">此规则可防止不受信任的进程直接访问 LSASS 内存。</span><span class="sxs-lookup"><span data-stu-id="407ba-160">This rule prevents untrusted processes from having direct access to LSASS memory.</span></span> <span data-ttu-id="407ba-161">每当进程尝试使用 OpenProcess () 访问 LSASS（具有 PROCESS_VM_READ 访问权限）时，该规则将专门阻止该访问权限。</span><span class="sxs-lookup"><span data-stu-id="407ba-161">Whenever a process tries to use the OpenProcess() function to access LSASS, with an access right of PROCESS_VM_READ, the rule will  specifically block that access right.</span></span>

:::image type="content" source="images/asrfaq1.png" alt-text="阻止凭据窃取 LSASS":::

<span data-ttu-id="407ba-163">看一下上面的示例，如果确实需要为阻止访问权限的进程创建异常，则添加文件名和完整路径将阻止该文件名，在允许访问 LSASS 进程内存之后，</span><span class="sxs-lookup"><span data-stu-id="407ba-163">Looking at the above example, if you really had to create an exception for the process that the access right was blocked, adding the filename along with full path would exclude it from being blocked and after allowed to access LSASS process memory.</span></span> <span data-ttu-id="407ba-164">值 0 表示 ASR 规则将忽略此文件/进程，并且不会阻止/审核它。</span><span class="sxs-lookup"><span data-stu-id="407ba-164">The value of 0 means that ASR rules will ignore this file/process and not block/audit it.</span></span>

:::image type="content" source="images/asrfaq2.png" alt-text="排除文件 asr":::

## <a name="what-are-the-rules-microsoft-recommends-enabling"></a><span data-ttu-id="407ba-166">Microsoft 建议启用哪些规则？</span><span class="sxs-lookup"><span data-stu-id="407ba-166">What are the rules Microsoft recommends enabling?</span></span>

<span data-ttu-id="407ba-167">我们建议启用每个可能的规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-167">We recommend enabling every possible rule.</span></span> <span data-ttu-id="407ba-168">但是，在某些情况下不应启用规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-168">However, there are some cases where you shouldn’t enable a rule.</span></span> <span data-ttu-id="407ba-169">例如，如果您使用的是 Microsoft Endpoint Configuration Manager (或 System Center Configuration Manager - SCCM) 来管理终结点，则不建议启用源自 PSExec 和 WMI 命令规则的阻止进程创建。</span><span class="sxs-lookup"><span data-stu-id="407ba-169">For example, we don't recommend enabling the Block process creations originating from PSExec and WMI commands rule, if you’re using Microsoft Endpoint Configuration Manager (or, System Center Configuration Manager - SCCM) to manage your endpoints.</span></span>

<span data-ttu-id="407ba-170">我们强烈建议您阅读我们的公共文档中提供的每个特定于规则的信息和/或 [警告](/microsoft-365/security/defender-endpoint/attack-surface-reduction.md)。</span><span class="sxs-lookup"><span data-stu-id="407ba-170">We highly recommend you that you read each rule-specific information and/or warnings, which are available in our [public documentation](/microsoft-365/security/defender-endpoint/attack-surface-reduction.md).</span></span>
<span data-ttu-id="407ba-171">跨多个保护支柱，Office、凭据、脚本、电子邮件等。1709 及更高版本支持所有 ASR 规则（通过 WMI 事件订阅阻止持久性Windows除外）：</span><span class="sxs-lookup"><span data-stu-id="407ba-171">spanning across multiple pillars of protection, like Office, Credentials, Scripts, E-Mail, etc. All ASR rules, except for Block persistence through WMI event subscription, are supported on Windows 1709 and later:</span></span>

* [<span data-ttu-id="407ba-172">阻止来自电子邮件客户端和 Webmail 的可执行内容</span><span class="sxs-lookup"><span data-stu-id="407ba-172">Block executable content from email client and webmail</span></span>](attack-surface-reduction.md#block-executable-content-from-email-client-and-webmail)
* [<span data-ttu-id="407ba-173">阻止所有Office应用程序创建子进程</span><span class="sxs-lookup"><span data-stu-id="407ba-173">Block all Office applications from creating child processes</span></span>](attack-surface-reduction.md#block-all-office-applications-from-creating-child-processes)
* [<span data-ttu-id="407ba-174">阻止Office应用程序创建可执行内容</span><span class="sxs-lookup"><span data-stu-id="407ba-174">Block Office applications from creating executable content</span></span>](attack-surface-reduction.md#block-office-applications-from-creating-executable-content)
* [<span data-ttu-id="407ba-175">阻止Office代码注入其他进程</span><span class="sxs-lookup"><span data-stu-id="407ba-175">Block Office applications from injecting code into other processes</span></span>](attack-surface-reduction.md#block-office-applications-from-injecting-code-into-other-processes)
* [<span data-ttu-id="407ba-176">阻止 JavaScript 或 VBScript 启动下载的可执行内容</span><span class="sxs-lookup"><span data-stu-id="407ba-176">Block JavaScript or VBScript from launching downloaded executable content</span></span>](attack-surface-reduction.md#block-javascript-or-vbscript-from-launching-downloaded-executable-content)
* [<span data-ttu-id="407ba-177">阻止执行可能混淆的脚本</span><span class="sxs-lookup"><span data-stu-id="407ba-177">Block execution of potentially obfuscated scripts</span></span>](attack-surface-reduction.md#block-execution-of-potentially-obfuscated-scripts)
* [<span data-ttu-id="407ba-178">从宏中阻止 Win32 API Office调用</span><span class="sxs-lookup"><span data-stu-id="407ba-178">Block Win32 API calls from Office macro</span></span>](attack-surface-reduction.md#block-win32-api-calls-from-office-macros)
* [<span data-ttu-id="407ba-179">使用高级防护抵御勒索软件</span><span class="sxs-lookup"><span data-stu-id="407ba-179">Use advanced protection against ransomware</span></span>](attack-surface-reduction.md#use-advanced-protection-against-ransomware)
* <span data-ttu-id="407ba-180">[阻止来自本地安全Windows子系统的](attack-surface-reduction.md#block-credential-stealing-from-the-windows-local-security-authority-subsystem)凭据 (lsass.exe) </span><span class="sxs-lookup"><span data-stu-id="407ba-180">[Block credential stealing from the Windows local security authority subsystem](attack-surface-reduction.md#block-credential-stealing-from-the-windows-local-security-authority-subsystem) (lsass.exe)</span></span>
* [<span data-ttu-id="407ba-181">阻止源自 PSExec 和 WMI 命令的进程创建</span><span class="sxs-lookup"><span data-stu-id="407ba-181">Block process creations originating from PSExec and WMI commands</span></span>](attack-surface-reduction.md#block-process-creations-originating-from-psexec-and-wmi-commands)
* [<span data-ttu-id="407ba-182">阻止从 USB 运行的不受信任的和未签名的进程</span><span class="sxs-lookup"><span data-stu-id="407ba-182">Block untrusted and unsigned processes that run from USB</span></span>](attack-surface-reduction.md#block-untrusted-and-unsigned-processes-that-run-from-usb)
* [<span data-ttu-id="407ba-183">阻止可执行文件运行，除非它们满足普遍标准、年龄或受信任的列表条件</span><span class="sxs-lookup"><span data-stu-id="407ba-183">Block executable files from running unless they meet a prevalence, age, or trusted list criteria</span></span>](attack-surface-reduction.md#block-executable-files-from-running-unless-they-meet-a-prevalence-age-or-trusted-list-criterion)
* [<span data-ttu-id="407ba-184">阻止Office应用程序创建子进程</span><span class="sxs-lookup"><span data-stu-id="407ba-184">Block Office communication applications from creating child processes</span></span>](attack-surface-reduction.md#block-office-communication-application-from-creating-child-processes)
* [<span data-ttu-id="407ba-185">阻止 Adobe Reader 创建子进程</span><span class="sxs-lookup"><span data-stu-id="407ba-185">Block Adobe Reader from creating child processes</span></span>](attack-surface-reduction.md#block-adobe-reader-from-creating-child-processes)
* [<span data-ttu-id="407ba-186">通过 WMI 事件订阅阻止持久性</span><span class="sxs-lookup"><span data-stu-id="407ba-186">Block persistence through WMI event subscription</span></span>](attack-surface-reduction.md#block-persistence-through-wmi-event-subscription)

## <a name="what-are-some-good-recommendations-for-getting-started-with-asr"></a><span data-ttu-id="407ba-187">有关 ASR 入门的一些很好建议是什么？</span><span class="sxs-lookup"><span data-stu-id="407ba-187">What are some good recommendations for getting started with ASR?</span></span>

<span data-ttu-id="407ba-188">测试 ASR 规则在一小段时间内在审核模式下运行 ASR 规则对组织的影响。</span><span class="sxs-lookup"><span data-stu-id="407ba-188">Test how ASR rules will impact your organization before enabling them by running ASR rules in audit mode for a brief period of time.</span></span> <span data-ttu-id="407ba-189">在审核模式下运行规则时，您可以识别可能错误地被阻止的任何业务线应用程序，并排除在 ASR 中。</span><span class="sxs-lookup"><span data-stu-id="407ba-189">While you are running the rules in audit mode, you can identify any line-of-business applications that might get blocked erroneously, and exclude them from ASR.</span></span>

<span data-ttu-id="407ba-190">大型组织应考虑在"圈"中推出 ASR 规则，通过审核和启用范围越来越广的设备子集中的规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-190">Larger organizations should consider rolling out ASR rules in "rings," by auditing and enabling rules in increasingly broader subsets of devices.</span></span> <span data-ttu-id="407ba-191">可以使用 Intune 或组策略管理工具将组织的设备排列到圈中。</span><span class="sxs-lookup"><span data-stu-id="407ba-191">You can arrange your organization's devices into rings by using Intune or a Group Policy management tool.</span></span>

## <a name="how-long-should-i-test-an-asr-rule-in-audit-mode-before-enabling-it"></a><span data-ttu-id="407ba-192">在启用 ASR 规则之前，应在审核模式下测试该规则多久？</span><span class="sxs-lookup"><span data-stu-id="407ba-192">How long should I test an ASR rule in audit mode before enabling it?</span></span>

<span data-ttu-id="407ba-193">将规则保持审核模式大约 30 天，以获得规则在整个组织中可用后如何运行的良好基线。</span><span class="sxs-lookup"><span data-stu-id="407ba-193">Keep the rule in audit mode for about 30 days to get a good baseline for how the rule will operate once it goes live throughout your organization.</span></span> <span data-ttu-id="407ba-194">在审核期间，您可以标识规则可能阻止的任何业务线应用程序，并配置规则以排除它们。</span><span class="sxs-lookup"><span data-stu-id="407ba-194">During the audit period, you can identify any line-of-business applications that might get blocked by the rule, and configure the rule to exclude them.</span></span>

## <a name="im-making-the-switch-from-a-third-party-security-solution-to-defender-for-endpoint-is-there-an-easy-way-to-export-rules-from-another-security-solution-to-asr"></a><span data-ttu-id="407ba-195">我要将第三方安全解决方案切换到 Defender for Endpoint。</span><span class="sxs-lookup"><span data-stu-id="407ba-195">I'm making the switch from a third-party security solution to Defender for Endpoint.</span></span> <span data-ttu-id="407ba-196">是否有一种将规则从另一个安全解决方案导出到 ASR 的"简单"方法？</span><span class="sxs-lookup"><span data-stu-id="407ba-196">Is there an "easy" way to export rules from another security solution to ASR?</span></span>

<span data-ttu-id="407ba-197">在大多数情况下，从 [Defender for Endpoint](https://docs.microsoft.com/windows/security/threat-protection) 建议的基线建议开始比尝试从另一个安全解决方案导入规则更简单、更好。</span><span class="sxs-lookup"><span data-stu-id="407ba-197">In most cases, it's easier and better to start with the baseline recommendations suggested by [Defender for Endpoint](https://docs.microsoft.com/windows/security/threat-protection) than to attempt to import rules from another security solution.</span></span> <span data-ttu-id="407ba-198">然后，使用审核模式、监视和分析等工具配置新解决方案以满足您的独特需求。</span><span class="sxs-lookup"><span data-stu-id="407ba-198">Then, use tools such as audit mode, monitoring, and analytics to configure your new solution to suit your unique needs.</span></span> 

<span data-ttu-id="407ba-199">大多数 ASR 规则的默认配置与 Defender for Endpoint 实时保护相结合，可抵御大量攻击和漏洞。</span><span class="sxs-lookup"><span data-stu-id="407ba-199">The default configuration for most ASR rules, combined with Defender for Endpoint's real-time protection, will protect against a large number of exploits and vulnerabilities.</span></span>

<span data-ttu-id="407ba-200">在 Defender for Endpoint 中，可以使用自定义指示器更新防护，以允许和阻止某些软件行为。</span><span class="sxs-lookup"><span data-stu-id="407ba-200">From within Defender for Endpoint, you can update your defenses with custom indicators, to allow and block certain software behaviors.</span></span> <span data-ttu-id="407ba-201">ASR 还允许以文件和文件夹排除的形式对规则进行一些自定义。</span><span class="sxs-lookup"><span data-stu-id="407ba-201">ASR also allows for some customization of rules, in the form of file and folder exclusions.</span></span> <span data-ttu-id="407ba-202">作为一般规则，最好在一段时间内审核规则，并配置可能被阻止的任何业务线应用程序的排除项。</span><span class="sxs-lookup"><span data-stu-id="407ba-202">As a general rule, it is best to audit a rule for a period of time, and configure exclusions for any line-of-business applications that might get blocked.</span></span>

## <a name="does-asr-support-file-or-folder-exclusions-that-include-system-variables-and-wildcards-in-the-path"></a><span data-ttu-id="407ba-203">ASR 是否支持路径中包括系统变量和通配符的文件或文件夹排除项？</span><span class="sxs-lookup"><span data-stu-id="407ba-203">Does ASR support file or folder exclusions that include system variables and wildcards in the path?</span></span>

<span data-ttu-id="407ba-204">对。</span><span class="sxs-lookup"><span data-stu-id="407ba-204">Yes.</span></span> <span data-ttu-id="407ba-205">有关从 ASR 规则中排除文件或文件夹的更多详细信息，请参阅从[ASR](enable-attack-surface-reduction.md#exclude-files-and-folders-from-asr-rules)规则中排除文件和文件夹[](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-antivirus/configure-extension-file-exclusions-microsoft-defender-antivirus#use-wildcards-in-the-file-name-and-folder-path-or-extension-exclusion-lists);有关在排除的文件路径中使用系统变量和通配符的详细信息，请参阅基于文件扩展名和文件夹位置配置和验证排除项。</span><span class="sxs-lookup"><span data-stu-id="407ba-205">See [Excluding files and folders from ASR rules](enable-attack-surface-reduction.md#exclude-files-and-folders-from-asr-rules) for more details on excluding files or folders from ASR rules, and [Configure and validate exclusions based on file extension and folder location](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-antivirus/configure-extension-file-exclusions-microsoft-defender-antivirus#use-wildcards-in-the-file-name-and-folder-path-or-extension-exclusion-lists) for more on using system variables and wildcards in excluded file paths.</span></span>

## <a name="do-asr-rules-cover-all-applications-by-default"></a><span data-ttu-id="407ba-206">默认情况下，ASR 规则是否涵盖所有应用程序？</span><span class="sxs-lookup"><span data-stu-id="407ba-206">Do ASR rules cover all applications by default?</span></span>

<span data-ttu-id="407ba-207">这取决于规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-207">It depends on the rule.</span></span> <span data-ttu-id="407ba-208">大多数 ASR 规则涵盖Microsoft Office服务的行为，如 Word、Excel、PowerPoint、OneNote 或 Outlook。</span><span class="sxs-lookup"><span data-stu-id="407ba-208">Most ASR rules cover the behavior of Microsoft Office products and services, such as Word, Excel, PowerPoint, and OneNote, or Outlook.</span></span> <span data-ttu-id="407ba-209">某些 ASR 规则（如阻止 *执行可能混淆的* 脚本）在作用域中更为一般。</span><span class="sxs-lookup"><span data-stu-id="407ba-209">Certain ASR rules, such as *Block execution of potentially obfuscated scripts*, are more general in scope.</span></span>

## <a name="does-asr-support-third-party-security-solutions"></a><span data-ttu-id="407ba-210">ASR 是否支持第三方安全解决方案？</span><span class="sxs-lookup"><span data-stu-id="407ba-210">Does ASR support third-party security solutions?</span></span>

<span data-ttu-id="407ba-211">ASR 使用Microsoft Defender 防病毒来阻止应用程序。</span><span class="sxs-lookup"><span data-stu-id="407ba-211">ASR uses Microsoft Defender Antivirus to block applications.</span></span> <span data-ttu-id="407ba-212">目前无法将 ASR 配置为使用另一个安全解决方案进行阻止。</span><span class="sxs-lookup"><span data-stu-id="407ba-212">It is not possible to configure ASR to use another security solution for blocking at this time.</span></span>

## <a name="i-have-an-e5-license-and-enabled-some-asr-rules-in-conjunction-with-defender-for-endpoint-is-it-possible-for-an-asr-event-to-not-show-up-at-all-in-defender-for-endpoints-event-timeline"></a><span data-ttu-id="407ba-213">我拥有 E5 许可证，并且与 Defender for Endpoint 一起启用了一些 ASR 规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-213">I have an E5 license and enabled some ASR rules in conjunction with Defender for Endpoint.</span></span> <span data-ttu-id="407ba-214">ASR 事件是否可能完全未显示在 Defender for Endpoint 的事件时间线中？</span><span class="sxs-lookup"><span data-stu-id="407ba-214">Is it possible for an ASR event to not show up at all in Defender for Endpoint's event timeline?</span></span>

<span data-ttu-id="407ba-215">每当 ASR 规则在本地触发通知时，有关事件的报告也会发送到 Defender for Endpoint 门户。</span><span class="sxs-lookup"><span data-stu-id="407ba-215">Whenever a notification is triggered locally by an ASR rule, a report on the event is also sent to the Defender for Endpoint portal.</span></span> <span data-ttu-id="407ba-216">如果在查找事件时遇到问题，可以使用搜索框筛选事件时间线。</span><span class="sxs-lookup"><span data-stu-id="407ba-216">If you're having trouble finding the event, you can filter the events timeline using the search box.</span></span> <span data-ttu-id="407ba-217">您还可以通过访问安全中心任务栏中的配置管理图标 **转到** 攻击面管理来查看 ASR 事件。 </span><span class="sxs-lookup"><span data-stu-id="407ba-217">You can also view ASR events by visiting **Go to attack surface management**, from the **Configuration management** icon in the Security Center taskbar.</span></span> <span data-ttu-id="407ba-218">攻击面管理页面包含报告检测选项卡，其中包括报告给 Defender for Endpoint 的 ASR 规则事件的完整列表。</span><span class="sxs-lookup"><span data-stu-id="407ba-218">The attack surface management page includes a tab for report detections, which includes a full list of ASR rule events reported to Defender for Endpoint.</span></span>

## <a name="i-applied-a-rule-using-gpo-now-when-i-try-to-check-the-indexing-options-for-the-rule-in-microsoft-outlook-i-get-a-message-stating-access-denied"></a><span data-ttu-id="407ba-219">我使用 GPO 应用了规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-219">I applied a rule using GPO.</span></span> <span data-ttu-id="407ba-220">现在，当我尝试检查 Microsoft Outlook 中的规则的索引选项时，我收到一条消息，指出"访问被拒绝"。</span><span class="sxs-lookup"><span data-stu-id="407ba-220">Now when I try to check the indexing options for the rule in Microsoft Outlook, I get a message stating, 'Access denied'.</span></span>

<span data-ttu-id="407ba-221">尝试直接从索引打开索引Windows 10。</span><span class="sxs-lookup"><span data-stu-id="407ba-221">Try opening the indexing options directly from Windows 10.</span></span>

1. <span data-ttu-id="407ba-222">选择 **"搜索**"任务栏Windows图标。</span><span class="sxs-lookup"><span data-stu-id="407ba-222">Select the **Search** icon on the Windows taskbar.</span></span>

1. <span data-ttu-id="407ba-223">在 **搜索框中输入** 索引选项。</span><span class="sxs-lookup"><span data-stu-id="407ba-223">Enter **Indexing options** into the search box.</span></span>

## <a name="are-the-criteria-used-by-the-rule-block-executable-files-from-running-unless-they-meet-a-prevalence-age-or-trusted-list-criterion-configurable-by-an-admin"></a><span data-ttu-id="407ba-224">规则使用的条件"除非可执行文件满足普遍程度、年龄或受信任的列表条件，否则阻止可执行文件运行"是否由管理员配置？</span><span class="sxs-lookup"><span data-stu-id="407ba-224">Are the criteria used by the rule, "Block executable files from running unless they meet a prevalence, age, or trusted list criterion," configurable by an admin?</span></span>

<span data-ttu-id="407ba-225">否。</span><span class="sxs-lookup"><span data-stu-id="407ba-225">No.</span></span> <span data-ttu-id="407ba-226">此规则使用的条件由 Microsoft 云保护维护，以使用从世界各地的数据持续更新受信任的列表。</span><span class="sxs-lookup"><span data-stu-id="407ba-226">The criteria used by this rule are maintained by Microsoft cloud protection, to keep the trusted list constantly up to date with data gathered from around the world.</span></span> <span data-ttu-id="407ba-227">本地管理员没有写入权限来更改此数据。</span><span class="sxs-lookup"><span data-stu-id="407ba-227">Local admins do not have write access to alter this data.</span></span> <span data-ttu-id="407ba-228">如果要将此规则配置为为企业定制它，可以将某些应用程序添加到排除列表以防止触发规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-228">If you are looking to configure this rule to tailor it for your enterprise, you can add certain applications to the exclusions list to prevent the rule from being triggered.</span></span>

## <a name="i-enabled-the-asr-rule-block-executable-files-from-running-unless-they-meet-a-prevalence-age-or-trusted-list-criterion-after-some-time-i-updated-a-piece-of-software-and-the-rule-is-now-blocking-it-even-though-it-didnt-before-did-something-go-wrong"></a><span data-ttu-id="407ba-229">我启用了 ASR 规则 *，阻止可执行文件运行，除非它们* 符合普遍、年龄或受信任的列表条件。</span><span class="sxs-lookup"><span data-stu-id="407ba-229">I enabled the ASR rule, *Block executable files from running unless they meet a prevalence, age, or trusted list criterion*.</span></span> <span data-ttu-id="407ba-230">一段时间之后，我更新了一个软件，规则现在阻止了它，即使以前没有更新过。</span><span class="sxs-lookup"><span data-stu-id="407ba-230">After some time, I updated a piece of software, and the rule is now blocking it, even though it didn't before.</span></span> <span data-ttu-id="407ba-231">出错了？</span><span class="sxs-lookup"><span data-stu-id="407ba-231">Did something go wrong?</span></span>

<span data-ttu-id="407ba-232">此规则依赖于每个具有已知信誉的应用程序，根据受信任应用列表的流行程度、年龄或包含情况进行度量。</span><span class="sxs-lookup"><span data-stu-id="407ba-232">This rule relies upon each application having a known reputation, as measured by prevalence, age, or inclusion on a list of trusted apps.</span></span> <span data-ttu-id="407ba-233">阻止或允许应用的规则决定最终由 Microsoft 云保护评估这些条件确定。</span><span class="sxs-lookup"><span data-stu-id="407ba-233">The rule's decision to block or allow an application is ultimately determined by Microsoft cloud protection's assessment of these criteria.</span></span>

<span data-ttu-id="407ba-234">通常，云保护可以确定应用程序的新版本与早期版本的相似性，因此无需进行长度重新评估。</span><span class="sxs-lookup"><span data-stu-id="407ba-234">Usually, cloud protection can determine that a new version of an application is similar enough to previous versions that it does not need to be reassessed at length.</span></span> <span data-ttu-id="407ba-235">但是，在切换版本后（尤其是在进行重大更新后）应用建立信誉可能需要一些时间。</span><span class="sxs-lookup"><span data-stu-id="407ba-235">However, it might take some time for the app to build reputation after switching versions, particularly after a major update.</span></span> <span data-ttu-id="407ba-236">在此期间，您可以将应用程序添加到排除列表，以防止此规则阻止重要应用程序。</span><span class="sxs-lookup"><span data-stu-id="407ba-236">In the meantime, you can add the application to the exclusions list, to prevent this rule from blocking important applications.</span></span> <span data-ttu-id="407ba-237">如果经常更新和运行新版本的应用程序，可以选择改为在审核模式下运行此规则。</span><span class="sxs-lookup"><span data-stu-id="407ba-237">If you are frequently updating and working with new versions of applications, you may opt instead to run this rule in audit mode.</span></span>

## <a name="i-recently-enabled-the-asr-rule-block-credential-stealing-from-the-windows-local-security-authority-subsystem-lsassexe-and-i-am-getting-a-large-number-of-notifications-what-is-going-on"></a><span data-ttu-id="407ba-238">我最近启用了 ASR 规则 *"* 阻止从本地安全Windows系统中窃取 (lsass.exe) ，我收到大量通知。</span><span class="sxs-lookup"><span data-stu-id="407ba-238">I recently enabled the ASR rule, *Block credential stealing from the Windows local security authority subsystem (lsass.exe)*, and I am getting a large number of notifications.</span></span> <span data-ttu-id="407ba-239">这是怎么回事？</span><span class="sxs-lookup"><span data-stu-id="407ba-239">What is going on?</span></span>

<span data-ttu-id="407ba-240">此规则生成的通知不一定指示恶意活动;但是，此规则仍可用于阻止恶意活动，因为恶意软件通常lsass.exe非法访问帐户。</span><span class="sxs-lookup"><span data-stu-id="407ba-240">A notification generated by this rule does not necessarily indicate malicious activity; however, this rule is still useful for blocking malicious activity, since malware often targets lsass.exe to gain illicit access to accounts.</span></span> <span data-ttu-id="407ba-241">登录lsass.exe进程将用户凭据存储在内存中。</span><span class="sxs-lookup"><span data-stu-id="407ba-241">The lsass.exe process stores user credentials in memory after a user has logged in.</span></span> <span data-ttu-id="407ba-242">Windows使用这些凭据验证用户并应用本地安全策略。</span><span class="sxs-lookup"><span data-stu-id="407ba-242">Windows uses these credentials to validate users and apply local security policies.</span></span>

<span data-ttu-id="407ba-243">因为一天中有许多合法进程将lsass.exe凭据，所以此规则可能非常干扰。</span><span class="sxs-lookup"><span data-stu-id="407ba-243">Because many legitimate processes throughout a typical day will be calling on lsass.exe for credentials, this rule can be especially noisy.</span></span> <span data-ttu-id="407ba-244">如果已知的合法应用程序导致此规则生成过多通知，您可以将其添加到排除列表。</span><span class="sxs-lookup"><span data-stu-id="407ba-244">If a known legitimate application causes this rule to generate an excessive number of notifications, you can add it to the exclusion list.</span></span> <span data-ttu-id="407ba-245">与其他大部分 ASR 规则相比，大多数其他 ASR 规则将生成相对较少的通知，因为调用 lsass.exe 是许多应用程序正常运行的典型情况。</span><span class="sxs-lookup"><span data-stu-id="407ba-245">Most other ASR rules will generate a relatively smaller number of notifications, in comparison to this one, since calling on lsass.exe is typical of many applications' normal functioning.</span></span>

## <a name="is-it-a-good-idea-to-enable-the-rule-block-credential-stealing-from-the-windows-local-security-authority-subsystem-lsassexe-alongside-lsa-protection"></a><span data-ttu-id="407ba-246">与 LSA 保护一起启用规则"阻止从本地安全Windows中窃取凭据 (lsass.exe) 是一个好主意吗？</span><span class="sxs-lookup"><span data-stu-id="407ba-246">Is it a good idea to enable the rule, *Block credential stealing from the Windows local security authority subsystem (lsass.exe)*, alongside LSA protection?</span></span>

<span data-ttu-id="407ba-247">如果还启用了 [LSA](https://docs.microsoft.com/windows-server/security/credentials-protection-and-management/configuring-additional-lsa-protection#BKMK_HowToConfigure) 保护，则启用此规则不会提供额外的保护。</span><span class="sxs-lookup"><span data-stu-id="407ba-247">Enabling this rule will not provide additional protection if you have [LSA protection](https://docs.microsoft.com/windows-server/security/credentials-protection-and-management/configuring-additional-lsa-protection#BKMK_HowToConfigure) enabled as well.</span></span> <span data-ttu-id="407ba-248">由于规则保护和 LSA 保护的运行方式都相同，因此同时运行这两个保护将非常多余。</span><span class="sxs-lookup"><span data-stu-id="407ba-248">Both the rule and LSA protection work in much the same way, so having both running at the same time would be redundant.</span></span> <span data-ttu-id="407ba-249">但是，有时你可能无法启用 LSA 保护。</span><span class="sxs-lookup"><span data-stu-id="407ba-249">However, sometimes you may not be able to enable LSA protection.</span></span> <span data-ttu-id="407ba-250">在这种情况下，您可以启用此规则，以针对目标恶意软件lsass.exe。</span><span class="sxs-lookup"><span data-stu-id="407ba-250">In those cases, you can enable this rule to provide equivalent protection against malware that target lsass.exe.</span></span>

## <a name="see-also"></a><span data-ttu-id="407ba-251">另请参阅</span><span class="sxs-lookup"><span data-stu-id="407ba-251">See also</span></span>

* [<span data-ttu-id="407ba-252">攻击面减少概述</span><span class="sxs-lookup"><span data-stu-id="407ba-252">Attack surface reduction overview</span></span>](attack-surface-reduction.md)
* [<span data-ttu-id="407ba-253">评估减少攻击面规则</span><span class="sxs-lookup"><span data-stu-id="407ba-253">Evaluate attack surface reduction rules</span></span>](evaluate-attack-surface-reduction.md)
* [<span data-ttu-id="407ba-254">自定义减少攻击面规则</span><span class="sxs-lookup"><span data-stu-id="407ba-254">Customize attack surface reduction rules</span></span>](customize-attack-surface-reduction.md)
* [<span data-ttu-id="407ba-255">启用攻击面减少规则</span><span class="sxs-lookup"><span data-stu-id="407ba-255">Enable attack surface reduction rules</span></span>](enable-attack-surface-reduction.md)
* [<span data-ttu-id="407ba-256">Microsoft Defender 与其他防病毒/反恶意软件的兼容性</span><span class="sxs-lookup"><span data-stu-id="407ba-256">Compatibility of Microsoft Defender with other antivirus/antimalware</span></span>](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-antivirus/microsoft-defender-antivirus-compatibility)


