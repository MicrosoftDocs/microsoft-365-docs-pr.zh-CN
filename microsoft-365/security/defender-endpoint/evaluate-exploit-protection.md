---
title: 查看 Exploit Protection 在演示中的工作原理
description: 了解 Exploit Protection 如何防止特定应用上发生可疑行为。
keywords: Exploit Protection， 攻击， 内核， 事件， 评估， 演示， 尝试， 缓解
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
ms.pagetype: security
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.date: 01/06/2021
ms.reviewer: ''
manager: dansimp
ms.technology: mde
ms.openlocfilehash: 4068c9e59872854a3d027395a55052bfa6841528
ms.sourcegitcommit: 956176ed7c8b8427fdc655abcd1709d86da9447e
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/23/2021
ms.locfileid: "51055442"
---
# <a name="evaluate-exploit-protection"></a><span data-ttu-id="edeaa-104">评估 Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-104">Evaluate exploit protection</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]

<span data-ttu-id="edeaa-105">**适用于：**</span><span class="sxs-lookup"><span data-stu-id="edeaa-105">**Applies to:**</span></span>
- [<span data-ttu-id="edeaa-106">Microsoft Defender for Endpoint</span><span class="sxs-lookup"><span data-stu-id="edeaa-106">Microsoft Defender for Endpoint</span></span>](https://go.microsoft.com/fwlink/?linkid=2154037)
- [<span data-ttu-id="edeaa-107">Microsoft 365 Defender</span><span class="sxs-lookup"><span data-stu-id="edeaa-107">Microsoft 365 Defender</span></span>](https://go.microsoft.com/fwlink/?linkid=2118804)

><span data-ttu-id="edeaa-108">想要体验 Microsoft Defender for Endpoint？</span><span class="sxs-lookup"><span data-stu-id="edeaa-108">Want to experience Microsoft Defender for Endpoint?</span></span> [<span data-ttu-id="edeaa-109">注册免费试用版。</span><span class="sxs-lookup"><span data-stu-id="edeaa-109">Sign up for a free trial.</span></span>](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-enablesiem-abovefoldlink)


<span data-ttu-id="edeaa-110">[Exploit Protection](exploit-protection.md) 可帮助保护设备免受使用攻击传播和感染其他设备的恶意软件的攻击。</span><span class="sxs-lookup"><span data-stu-id="edeaa-110">[Exploit protection](exploit-protection.md) helps protect devices from malware that uses exploits to spread and infect other devices.</span></span> <span data-ttu-id="edeaa-111">缓解可以应用于操作系统或单个应用。</span><span class="sxs-lookup"><span data-stu-id="edeaa-111">Mitigation can be applied to either the operating system or to an individual app.</span></span> <span data-ttu-id="edeaa-112">EMET 中增强的缓解体验Toolkit (许多功能) Exploit Protection 中。</span><span class="sxs-lookup"><span data-stu-id="edeaa-112">Many of the features that were part of the Enhanced Mitigation Experience Toolkit (EMET) are included in exploit protection.</span></span> <span data-ttu-id="edeaa-113"> (EMET 已终止支持。) </span><span class="sxs-lookup"><span data-stu-id="edeaa-113">(The EMET has reached its end of support.)</span></span>

<span data-ttu-id="edeaa-114">在审核中，你可以看到缓解如何适用于测试环境中的某些应用。</span><span class="sxs-lookup"><span data-stu-id="edeaa-114">In audit, you can see how mitigation works for certain apps in a test environment.</span></span> <span data-ttu-id="edeaa-115">这将显示 *如果在* 生产环境中启用 Exploit Protection，将发生的情况。</span><span class="sxs-lookup"><span data-stu-id="edeaa-115">This shows what *would* have happened if you enabled exploit protection in your production environment.</span></span> <span data-ttu-id="edeaa-116">这样，你可以验证 Exploit Protection 不会对业务线应用造成负面影响，并查看发生哪些可疑或恶意事件。</span><span class="sxs-lookup"><span data-stu-id="edeaa-116">This way, you can verify that exploit protection doesn't adversely affect your line-of-business apps, and see which suspicious or malicious events occur.</span></span>

> [!TIP]
> <span data-ttu-id="edeaa-117">还可以访问 Microsoft Defender Testground 网站 [，demo.wd.microsoft.com](https://demo.wd.microsoft.com?ocid=cx-wddocs-testground) 了解 Exploit Protection 的工作原理。</span><span class="sxs-lookup"><span data-stu-id="edeaa-117">You can also visit the Microsoft Defender Testground website at [demo.wd.microsoft.com](https://demo.wd.microsoft.com?ocid=cx-wddocs-testground) to see how exploit protection works.</span></span>

## <a name="enable-exploit-protection-for-testing"></a><span data-ttu-id="edeaa-118">启用 Exploit Protection 进行测试</span><span class="sxs-lookup"><span data-stu-id="edeaa-118">Enable exploit protection for testing</span></span>

<span data-ttu-id="edeaa-119">可以使用 Windows 安全中心应用或应用在测试模式下为特定程序设置缓解Windows PowerShell。</span><span class="sxs-lookup"><span data-stu-id="edeaa-119">You can set mitigations in a testing mode for specific programs by using the Windows Security app or Windows PowerShell.</span></span>

### <a name="windows-security-app"></a><span data-ttu-id="edeaa-120">Windows 安全应用</span><span class="sxs-lookup"><span data-stu-id="edeaa-120">Windows Security app</span></span>

1. <span data-ttu-id="edeaa-121">打开 Windows 安全应用。</span><span class="sxs-lookup"><span data-stu-id="edeaa-121">Open the Windows Security app.</span></span> <span data-ttu-id="edeaa-122">选择任务栏中的防护图标或搜索 Defender 的"开始" **菜单**。</span><span class="sxs-lookup"><span data-stu-id="edeaa-122">Select the shield icon in the task bar or search the start menu for **Defender**.</span></span>

2. <span data-ttu-id="edeaa-123">选择应用 **&浏览器控制** 磁贴 (或左侧菜单栏上的应用图标) 选择 Exploit **Protection**。</span><span class="sxs-lookup"><span data-stu-id="edeaa-123">Select the **App & browser control** tile (or the app icon on the left menu bar) and then select **Exploit protection**.</span></span>

3. <span data-ttu-id="edeaa-124">转到 **"程序设置** "，然后选择要应用保护的应用：</span><span class="sxs-lookup"><span data-stu-id="edeaa-124">Go to **Program settings** and choose the app you want to apply protection to:</span></span>

    1. <span data-ttu-id="edeaa-125">如果已列出要配置的应用，请选择它，然后选择"编辑 **"**</span><span class="sxs-lookup"><span data-stu-id="edeaa-125">If the app you want to configure is already listed, select it and then select **Edit**</span></span>
    2. <span data-ttu-id="edeaa-126">如果应用未在列表顶部列出，请选择" **添加程序"以自定义**。</span><span class="sxs-lookup"><span data-stu-id="edeaa-126">If the app is not listed at the top of the list select **Add program to customize**.</span></span> <span data-ttu-id="edeaa-127">然后，选择希望如何添加应用。</span><span class="sxs-lookup"><span data-stu-id="edeaa-127">Then, choose how you want to add the app.</span></span>
        - <span data-ttu-id="edeaa-128">使用 **"按程序名称** 添加"将缓解应用于具有该名称的任何正在运行的进程。</span><span class="sxs-lookup"><span data-stu-id="edeaa-128">Use **Add by program name** to have the mitigation applied to any running process with that name.</span></span> <span data-ttu-id="edeaa-129">指定具有扩展名的文件。</span><span class="sxs-lookup"><span data-stu-id="edeaa-129">Specify a file with an extension.</span></span> <span data-ttu-id="edeaa-130">你可以输入完整路径，将缓解限制为仅该位置中具有该名称的应用。</span><span class="sxs-lookup"><span data-stu-id="edeaa-130">You can enter a full path to limit the mitigation to only the app with that name in that location.</span></span>
        - <span data-ttu-id="edeaa-131">Use **Choose exact file path** to use a standard Windows Explorer file picker window to find and select the file you want.</span><span class="sxs-lookup"><span data-stu-id="edeaa-131">Use **Choose exact file path** to use a standard Windows Explorer file picker window to find and select the file you want.</span></span>

4. <span data-ttu-id="edeaa-132">选择应用后，你将看到可应用的所有缓解的列表。</span><span class="sxs-lookup"><span data-stu-id="edeaa-132">After selecting the app, you'll see a list of all the mitigations that can be applied.</span></span> <span data-ttu-id="edeaa-133">选择 **审核** 将仅在审核模式下应用缓解。</span><span class="sxs-lookup"><span data-stu-id="edeaa-133">Choosing **Audit** will apply the mitigation in audit mode only.</span></span> <span data-ttu-id="edeaa-134">如果你需要重新启动进程、应用或 Windows，你将收到通知。</span><span class="sxs-lookup"><span data-stu-id="edeaa-134">You'll be notified if you need to restart the process, app, or Windows.</span></span>

5. <span data-ttu-id="edeaa-135">对要配置的所有应用和缓解重复此过程。</span><span class="sxs-lookup"><span data-stu-id="edeaa-135">Repeat this procedure for all the apps and mitigations you want to configure.</span></span> <span data-ttu-id="edeaa-136">完成 **配置** 设置后，选择"应用"。</span><span class="sxs-lookup"><span data-stu-id="edeaa-136">Select **Apply** when you're done setting up your configuration.</span></span>

### <a name="powershell"></a><span data-ttu-id="edeaa-137">PowerShell</span><span class="sxs-lookup"><span data-stu-id="edeaa-137">PowerShell</span></span>

<span data-ttu-id="edeaa-138">若要将应用级别的缓解设置为审核模式，请与 `Set-ProcessMitigation` **审核模式** cmdlet 一起使用。</span><span class="sxs-lookup"><span data-stu-id="edeaa-138">To set app-level mitigations to audit mode, use `Set-ProcessMitigation` with the **Audit mode** cmdlet.</span></span>

<span data-ttu-id="edeaa-139">按以下格式配置每个缓解：</span><span class="sxs-lookup"><span data-stu-id="edeaa-139">Configure each mitigation in the following format:</span></span>

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

<span data-ttu-id="edeaa-140">其中：</span><span class="sxs-lookup"><span data-stu-id="edeaa-140">Where:</span></span>
```
* \<Scope>:
  * `-Name` to indicate the mitigations should be applied to a specific app. Specify the app's executable after this flag.
* \<Action>:
  * `-Enable` to enable the mitigation
    * `-Disable` to disable the mitigation
* \<Mitigation>:
  * The mitigation's cmdlet as defined in the following table. Each mitigation is separated with a comma.
```
 |<span data-ttu-id="edeaa-141">缓解措施</span><span class="sxs-lookup"><span data-stu-id="edeaa-141">Mitigation</span></span> | <span data-ttu-id="edeaa-142">审核模式 cmdlet</span><span class="sxs-lookup"><span data-stu-id="edeaa-142">Audit mode cmdlet</span></span> |
|---|---|
 |<span data-ttu-id="edeaa-143">ACG (任意代码) </span><span class="sxs-lookup"><span data-stu-id="edeaa-143">Arbitrary Code Guard (ACG)</span></span> | `AuditDynamicCode` |
 |<span data-ttu-id="edeaa-144">阻止低完整性图像</span><span class="sxs-lookup"><span data-stu-id="edeaa-144">Block low integrity images</span></span> | `AuditImageLoad`
 |<span data-ttu-id="edeaa-145">阻止不受信任的字体</span><span class="sxs-lookup"><span data-stu-id="edeaa-145">Block untrusted fonts</span></span> | <span data-ttu-id="edeaa-146">`AuditFont`, `FontAuditOnly`</span><span class="sxs-lookup"><span data-stu-id="edeaa-146">`AuditFont`, `FontAuditOnly`</span></span> |
 |<span data-ttu-id="edeaa-147">代码完整性防护</span><span class="sxs-lookup"><span data-stu-id="edeaa-147">Code integrity guard</span></span> | <span data-ttu-id="edeaa-148">`AuditMicrosoftSigned`, `AuditStoreSigned`</span><span class="sxs-lookup"><span data-stu-id="edeaa-148">`AuditMicrosoftSigned`, `AuditStoreSigned`</span></span> |
 |<span data-ttu-id="edeaa-149">禁用 Win32k 系统调用</span><span class="sxs-lookup"><span data-stu-id="edeaa-149">Disable Win32k system calls</span></span> | `AuditSystemCall` |
 |<span data-ttu-id="edeaa-150">不允许子进程</span><span class="sxs-lookup"><span data-stu-id="edeaa-150">Do not allow child processes</span></span> | `AuditChildProcess` |

<span data-ttu-id="edeaa-151">例如，若要在审核模式下 (名为) 的应用启用任意代码防护和 *ACG* testing.exe，请运行以下命令：</span><span class="sxs-lookup"><span data-stu-id="edeaa-151">For example, to enable Arbitrary Code Guard (ACG) in audit mode for an app named *testing.exe*, run the following command:</span></span>

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable AuditDynamicCode
```

<span data-ttu-id="edeaa-152">可以通过将 **替换为 来禁用** 审核 `-Enable` 模式 `-Disable` 。</span><span class="sxs-lookup"><span data-stu-id="edeaa-152">You can disable **audit mode** by replacing `-Enable` with `-Disable`.</span></span>

## <a name="review-exploit-protection-audit-events"></a><span data-ttu-id="edeaa-153">查看 Exploit Protection 审核事件</span><span class="sxs-lookup"><span data-stu-id="edeaa-153">Review exploit protection audit events</span></span>

<span data-ttu-id="edeaa-154">若要查看哪些应用已被阻止，请打开事件查看器，并筛选活动日志中的Security-Mitigations事件。</span><span class="sxs-lookup"><span data-stu-id="edeaa-154">To review which apps would have been blocked, open Event Viewer and filter for the following events in the Security-Mitigations log.</span></span>

| <span data-ttu-id="edeaa-155">功能</span><span class="sxs-lookup"><span data-stu-id="edeaa-155">Feature</span></span> | <span data-ttu-id="edeaa-156">提供程序/源</span><span class="sxs-lookup"><span data-stu-id="edeaa-156">Provider/source</span></span> | <span data-ttu-id="edeaa-157">事件 ID</span><span class="sxs-lookup"><span data-stu-id="edeaa-157">Event ID</span></span> | <span data-ttu-id="edeaa-158">说明</span><span class="sxs-lookup"><span data-stu-id="edeaa-158">Description</span></span> |
|---|---|--|---|
| <span data-ttu-id="edeaa-159">Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-159">Exploit protection</span></span> | <span data-ttu-id="edeaa-160">Security-Mitigations (内核模式/用户模式) </span><span class="sxs-lookup"><span data-stu-id="edeaa-160">Security-Mitigations (Kernel Mode/User Mode)</span></span> | <span data-ttu-id="edeaa-161">1</span><span class="sxs-lookup"><span data-stu-id="edeaa-161">1</span></span> | <span data-ttu-id="edeaa-162">ACG 审核</span><span class="sxs-lookup"><span data-stu-id="edeaa-162">ACG audit</span></span> |
| <span data-ttu-id="edeaa-163">Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-163">Exploit protection</span></span> | <span data-ttu-id="edeaa-164">Security-Mitigations (内核模式/用户模式) </span><span class="sxs-lookup"><span data-stu-id="edeaa-164">Security-Mitigations (Kernel Mode/User Mode)</span></span> | <span data-ttu-id="edeaa-165">3</span><span class="sxs-lookup"><span data-stu-id="edeaa-165">3</span></span> | <span data-ttu-id="edeaa-166">不允许子进程审核</span><span class="sxs-lookup"><span data-stu-id="edeaa-166">Do not allow child processes audit</span></span> |
| <span data-ttu-id="edeaa-167">Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-167">Exploit protection</span></span> | <span data-ttu-id="edeaa-168">Security-Mitigations (内核模式/用户模式) </span><span class="sxs-lookup"><span data-stu-id="edeaa-168">Security-Mitigations (Kernel Mode/User Mode)</span></span> | <span data-ttu-id="edeaa-169">5 </span><span class="sxs-lookup"><span data-stu-id="edeaa-169">5</span></span> | <span data-ttu-id="edeaa-170">阻止低完整性图像审核</span><span class="sxs-lookup"><span data-stu-id="edeaa-170">Block low integrity images audit</span></span> |
| <span data-ttu-id="edeaa-171">Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-171">Exploit protection</span></span> | <span data-ttu-id="edeaa-172">Security-Mitigations (内核模式/用户模式) </span><span class="sxs-lookup"><span data-stu-id="edeaa-172">Security-Mitigations (Kernel Mode/User Mode)</span></span> | <span data-ttu-id="edeaa-173">7 </span><span class="sxs-lookup"><span data-stu-id="edeaa-173">7</span></span> | <span data-ttu-id="edeaa-174">阻止远程图像审核</span><span class="sxs-lookup"><span data-stu-id="edeaa-174">Block remote images audit</span></span> |
| <span data-ttu-id="edeaa-175">Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-175">Exploit protection</span></span> | <span data-ttu-id="edeaa-176">Security-Mitigations (内核模式/用户模式) </span><span class="sxs-lookup"><span data-stu-id="edeaa-176">Security-Mitigations (Kernel Mode/User Mode)</span></span> | <span data-ttu-id="edeaa-177">9 </span><span class="sxs-lookup"><span data-stu-id="edeaa-177">9</span></span> | <span data-ttu-id="edeaa-178">禁用 win32k 系统调用审核</span><span class="sxs-lookup"><span data-stu-id="edeaa-178">Disable win32k system calls audit</span></span> |
| <span data-ttu-id="edeaa-179">Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-179">Exploit protection</span></span> | <span data-ttu-id="edeaa-180">Security-Mitigations (内核模式/用户模式) </span><span class="sxs-lookup"><span data-stu-id="edeaa-180">Security-Mitigations (Kernel Mode/User Mode)</span></span> | <span data-ttu-id="edeaa-181">11</span><span class="sxs-lookup"><span data-stu-id="edeaa-181">11</span></span> | <span data-ttu-id="edeaa-182">代码完整性防护审核</span><span class="sxs-lookup"><span data-stu-id="edeaa-182">Code integrity guard audit</span></span> |

## <a name="see-also"></a><span data-ttu-id="edeaa-183">另请参阅</span><span class="sxs-lookup"><span data-stu-id="edeaa-183">See also</span></span>

- [<span data-ttu-id="edeaa-184">启用 Exploit Protection</span><span class="sxs-lookup"><span data-stu-id="edeaa-184">Enable exploit protection</span></span>](enable-exploit-protection.md)
- [<span data-ttu-id="edeaa-185">配置和审核 Exploit Protection 缓解</span><span class="sxs-lookup"><span data-stu-id="edeaa-185">Configure and audit exploit protection mitigations</span></span>](customize-exploit-protection.md)
- [<span data-ttu-id="edeaa-186">导入、导出和部署 Exploit Protection 配置</span><span class="sxs-lookup"><span data-stu-id="edeaa-186">Import, export, and deploy exploit protection configurations</span></span>](import-export-exploit-protection-emet-xml.md)
- [<span data-ttu-id="edeaa-187">Exploit Protection 疑难解答</span><span class="sxs-lookup"><span data-stu-id="edeaa-187">Troubleshoot exploit protection</span></span>](troubleshoot-exploit-protection-mitigations.md)
