---
title: Microsoft 365 Defender 高级搜寻架构中的数据表
description: 了解高级搜寻架构中的表，以了解可运行威胁搜寻查询的数据
keywords: 高级搜寻， 威胁搜寻， 网络威胁搜寻， Microsoft 365 Defender， microsoft 365， m365， 搜索， 查询， 遥测， 架构参考， kusto， 表， 数据
search.product: eADQiWindows 10XVcnh
search.appverid: met150
ms.prod: m365-security
ms.mktglfcycl: deploy
ms.sitesec: library
ms.pagetype: security
f1.keywords:
- NOCSH
ms.author: maccruz
author: schmurky
localization_priority: Normal
manager: dansimp
audience: ITPro
ms.collection:
- M365-security-compliance
- m365initiative-m365-defender
ms.topic: article
ms.technology: m365d
ms.openlocfilehash: 0313d1e95682d52e44cf90360c8ef322f0cad5db
ms.sourcegitcommit: a8d8cee7df535a150985d6165afdfddfdf21f622
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/21/2021
ms.locfileid: "51932913"
---
# <a name="understand-the-advanced-hunting-schema"></a><span data-ttu-id="fa34a-104">了解高级搜寻架构</span><span class="sxs-lookup"><span data-stu-id="fa34a-104">Understand the advanced hunting schema</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender.md)]


<span data-ttu-id="fa34a-105">**适用于：**</span><span class="sxs-lookup"><span data-stu-id="fa34a-105">**Applies to:**</span></span>
- <span data-ttu-id="fa34a-106">Microsoft 365 Defender</span><span class="sxs-lookup"><span data-stu-id="fa34a-106">Microsoft 365 Defender</span></span>

[!INCLUDE [Prerelease information](../includes/prerelease.md)]

<span data-ttu-id="fa34a-107">高级 [搜寻](advanced-hunting-overview.md) 架构由多个表决定，这些表提供事件信息或有关设备、警报、标识和其他实体类型的信息。</span><span class="sxs-lookup"><span data-stu-id="fa34a-107">The [advanced hunting](advanced-hunting-overview.md) schema is made up of multiple tables that provide either event information or information about devices, alerts, identities, and other entity types.</span></span> <span data-ttu-id="fa34a-108">若要高效构建跨多个表的查询，需要了解高级搜寻架构中的表和列。</span><span class="sxs-lookup"><span data-stu-id="fa34a-108">To effectively build queries that span multiple tables, you need to understand the tables and the columns in the advanced hunting schema.</span></span>

## <a name="get-schema-information-in-the-security-center"></a><span data-ttu-id="fa34a-109">在安全中心获取架构信息</span><span class="sxs-lookup"><span data-stu-id="fa34a-109">Get schema information in the security center</span></span>
<span data-ttu-id="fa34a-110">构造查询时，请使用内置架构参考快速获取有关架构中每个表的以下信息：</span><span class="sxs-lookup"><span data-stu-id="fa34a-110">While constructing queries, use the built-in schema reference to quickly get the following information about each table in the schema:</span></span>

- <span data-ttu-id="fa34a-111">**表** 说明 表中包含的数据类型以及该数据的来源。</span><span class="sxs-lookup"><span data-stu-id="fa34a-111">**Tables description**—type of data contained in the table and the source of that data.</span></span>
- <span data-ttu-id="fa34a-112">**列**- 表中的所有列。</span><span class="sxs-lookup"><span data-stu-id="fa34a-112">**Columns**—all the columns in the table.</span></span>
- <span data-ttu-id="fa34a-113">**操作** 类型 - 列中可能 `ActionType` 的值，表示表支持的事件类型。</span><span class="sxs-lookup"><span data-stu-id="fa34a-113">**Action types**—possible values in the `ActionType` column representing the event types supported by the table.</span></span> <span data-ttu-id="fa34a-114">此信息仅针对包含事件信息的表提供。</span><span class="sxs-lookup"><span data-stu-id="fa34a-114">This information is provided only for tables that contain event information.</span></span>
- <span data-ttu-id="fa34a-115">**示例** 查询 - 具有表利用方式的示例查询。</span><span class="sxs-lookup"><span data-stu-id="fa34a-115">**Sample query**—example queries that feature how the table can be utilized.</span></span>

### <a name="access-the-schema-reference"></a><span data-ttu-id="fa34a-116">访问架构引用</span><span class="sxs-lookup"><span data-stu-id="fa34a-116">Access the schema reference</span></span>
<span data-ttu-id="fa34a-117">若要快速访问架构引用，请选择架构表示中表名称旁边的"查看引用"操作。</span><span class="sxs-lookup"><span data-stu-id="fa34a-117">To quickly access the schema reference, select the **View reference** action next to the table name in the schema representation.</span></span> <span data-ttu-id="fa34a-118">还可以选择" **架构引用** "来搜索表。</span><span class="sxs-lookup"><span data-stu-id="fa34a-118">You can also select **Schema reference** to search for a table.</span></span>   

![<span data-ttu-id="fa34a-119">显示如何访问门户内架构参考的图像</span><span class="sxs-lookup"><span data-stu-id="fa34a-119">Image showing how to access in-portal schema reference</span></span> ](../../media/mtp-ah/ah-reference.png) 

## <a name="learn-the-schema-tables"></a><span data-ttu-id="fa34a-120">了解架构表</span><span class="sxs-lookup"><span data-stu-id="fa34a-120">Learn the schema tables</span></span>
<span data-ttu-id="fa34a-121">以下引用列出了架构中的所有表。</span><span class="sxs-lookup"><span data-stu-id="fa34a-121">The following reference lists all the tables in the schema.</span></span> <span data-ttu-id="fa34a-122">每个表名称链接到描述该表的列名称的页面。</span><span class="sxs-lookup"><span data-stu-id="fa34a-122">Each table name links to a page describing the column names for that table.</span></span> <span data-ttu-id="fa34a-123">表和列名称还将在安全中心列出，作为高级搜寻屏幕上的架构表示的一部分。</span><span class="sxs-lookup"><span data-stu-id="fa34a-123">Table and column names are also listed in the security center as part of the schema representation on the advanced hunting screen.</span></span>

| <span data-ttu-id="fa34a-124">表名</span><span class="sxs-lookup"><span data-stu-id="fa34a-124">Table name</span></span> | <span data-ttu-id="fa34a-125">说明</span><span class="sxs-lookup"><span data-stu-id="fa34a-125">Description</span></span> |
|------------|-------------|
| <span data-ttu-id="fa34a-126">**[AlertEvidence](advanced-hunting-alertevidence-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-126">**[AlertEvidence](advanced-hunting-alertevidence-table.md)**</span></span> | <span data-ttu-id="fa34a-127">与警报关联的文件、IP 地址、URL、用户或设备</span><span class="sxs-lookup"><span data-stu-id="fa34a-127">Files, IP addresses, URLs, users, or devices associated with alerts</span></span> |
| <span data-ttu-id="fa34a-128">**[AlertInfo](advanced-hunting-alertinfo-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-128">**[AlertInfo](advanced-hunting-alertinfo-table.md)**</span></span> | <span data-ttu-id="fa34a-129">来自 Microsoft Defender for Endpoint、Microsoft Defender for Office 365、Microsoft Cloud App Security 和 Microsoft Defender for Identity 的警报，包括严重性信息和威胁分类</span><span class="sxs-lookup"><span data-stu-id="fa34a-129">Alerts from Microsoft Defender for Endpoint, Microsoft Defender for Office 365, Microsoft Cloud App Security, and Microsoft Defender for Identity, including severity information and threat categorization</span></span>  |
| <span data-ttu-id="fa34a-130">**[AppFileEvents](advanced-hunting-appfileevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-130">**[AppFileEvents](advanced-hunting-appfileevents-table.md)**</span></span> | <span data-ttu-id="fa34a-131">云应用和服务中的文件相关活动</span><span class="sxs-lookup"><span data-stu-id="fa34a-131">File-related activities in cloud apps and services</span></span> |
| <span data-ttu-id="fa34a-132">**[CloudAppEvents](advanced-hunting-cloudappevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-132">**[CloudAppEvents](advanced-hunting-cloudappevents-table.md)**</span></span> | <span data-ttu-id="fa34a-133">涉及 Office 365 和其他云应用和服务中的帐户和对象的事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-133">Events involving accounts and objects in Office 365 and other cloud apps and services</span></span> |
| <span data-ttu-id="fa34a-134">**[DeviceEvents](advanced-hunting-deviceevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-134">**[DeviceEvents](advanced-hunting-deviceevents-table.md)**</span></span> | <span data-ttu-id="fa34a-135">多个事件类型，包括安全控件（如 Windows Defender 防病毒和 Exploit Protection）触发的事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-135">Multiple event types, including events triggered by security controls such as Windows Defender Antivirus and exploit protection</span></span> |
| <span data-ttu-id="fa34a-136">**[DeviceFileCertificateInfo](advanced-hunting-DeviceFileCertificateInfo-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-136">**[DeviceFileCertificateInfo](advanced-hunting-DeviceFileCertificateInfo-table.md)**</span></span> | <span data-ttu-id="fa34a-137">从终结点上的证书验证事件获取的已签名文件的证书信息</span><span class="sxs-lookup"><span data-stu-id="fa34a-137">Certificate information of signed files obtained from certificate verification events on endpoints</span></span> |
| <span data-ttu-id="fa34a-138">**[DeviceFileEvents](advanced-hunting-devicefileevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-138">**[DeviceFileEvents](advanced-hunting-devicefileevents-table.md)**</span></span> | <span data-ttu-id="fa34a-139">文件创建、修改和其他文件系统事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-139">File creation, modification, and other file system events</span></span> |
| <span data-ttu-id="fa34a-140">**[DeviceImageLoadEvents](advanced-hunting-deviceimageloadevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-140">**[DeviceImageLoadEvents](advanced-hunting-deviceimageloadevents-table.md)**</span></span> | <span data-ttu-id="fa34a-141">DLL 加载事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-141">DLL loading events</span></span> |
| <span data-ttu-id="fa34a-142">**[DeviceInfo](advanced-hunting-deviceinfo-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-142">**[DeviceInfo](advanced-hunting-deviceinfo-table.md)**</span></span> | <span data-ttu-id="fa34a-143">计算机信息，包括操作系统信息</span><span class="sxs-lookup"><span data-stu-id="fa34a-143">Machine information, including OS information</span></span> |
| <span data-ttu-id="fa34a-144">**[DeviceLogonEvents](advanced-hunting-devicelogonevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-144">**[DeviceLogonEvents](advanced-hunting-devicelogonevents-table.md)**</span></span> | <span data-ttu-id="fa34a-145">设备上登录和其他身份验证事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-145">Sign-ins and other authentication events on devices</span></span> |
| <span data-ttu-id="fa34a-146">**[DeviceNetworkEvents](advanced-hunting-devicenetworkevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-146">**[DeviceNetworkEvents](advanced-hunting-devicenetworkevents-table.md)**</span></span> | <span data-ttu-id="fa34a-147">网络连接和相关事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-147">Network connection and related events</span></span> |
| <span data-ttu-id="fa34a-148">**[DeviceNetworkInfo](advanced-hunting-devicenetworkinfo-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-148">**[DeviceNetworkInfo](advanced-hunting-devicenetworkinfo-table.md)**</span></span> | <span data-ttu-id="fa34a-149">设备的网络属性，包括物理适配器、IP 和 MAC 地址，以及连接的网络和域</span><span class="sxs-lookup"><span data-stu-id="fa34a-149">Network properties of devices, including physical adapters, IP and MAC addresses, as well as connected networks and domains</span></span> |
| <span data-ttu-id="fa34a-150">**[DeviceProcessEvents](advanced-hunting-deviceprocessevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-150">**[DeviceProcessEvents](advanced-hunting-deviceprocessevents-table.md)**</span></span> | <span data-ttu-id="fa34a-151">过程创建和相关事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-151">Process creation and related events</span></span> |
| <span data-ttu-id="fa34a-152">**[DeviceRegistryEvents](advanced-hunting-deviceregistryevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-152">**[DeviceRegistryEvents](advanced-hunting-deviceregistryevents-table.md)**</span></span> | <span data-ttu-id="fa34a-153">创建和修改注册表项</span><span class="sxs-lookup"><span data-stu-id="fa34a-153">Creation and modification of registry entries</span></span> |
| <span data-ttu-id="fa34a-154">**[DeviceTvmSecureConfigurationAssessment](advanced-hunting-devicetvmsecureconfigurationassessment-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-154">**[DeviceTvmSecureConfigurationAssessment](advanced-hunting-devicetvmsecureconfigurationassessment-table.md)**</span></span> | <span data-ttu-id="fa34a-155">威胁和漏洞管理评估事件，指示设备上的各种安全配置的状态</span><span class="sxs-lookup"><span data-stu-id="fa34a-155">Threat & Vulnerability Management assessment events, indicating the status of various security configurations on devices</span></span> |
| <span data-ttu-id="fa34a-156">**[DeviceTvmSecureConfigurationAssessmentKB](advanced-hunting-devicetvmsecureconfigurationassessmentkb-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-156">**[DeviceTvmSecureConfigurationAssessmentKB](advanced-hunting-devicetvmsecureconfigurationassessmentkb-table.md)**</span></span> | <span data-ttu-id="fa34a-157">威胁和漏洞管理用于评估设备的各种安全配置的知识库；包括各种标准和基准的映射</span><span class="sxs-lookup"><span data-stu-id="fa34a-157">Knowledge base of various security configurations used by Threat & Vulnerability Management to assess devices; includes mappings to various standards and benchmarks</span></span>  |
| <span data-ttu-id="fa34a-158">**[DeviceTvmSoftwareInventory](advanced-hunting-devicetvmsoftwareinventory-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-158">**[DeviceTvmSoftwareInventory](advanced-hunting-devicetvmsoftwareinventory-table.md)**</span></span> | <span data-ttu-id="fa34a-159">设备上安装的软件清单，包括其版本信息和停止支持状态</span><span class="sxs-lookup"><span data-stu-id="fa34a-159">Inventory of software installed on devices, including their version information and end-of-support status</span></span> |
| <span data-ttu-id="fa34a-160">**[DeviceTvmSoftwareVulnerabilities](advanced-hunting-devicetvmsoftwarevulnerabilities-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-160">**[DeviceTvmSoftwareVulnerabilities](advanced-hunting-devicetvmsoftwarevulnerabilities-table.md)**</span></span> | <span data-ttu-id="fa34a-161">在设备上发现的软件漏洞以及可解决每个漏洞的可用安全更新列表</span><span class="sxs-lookup"><span data-stu-id="fa34a-161">Software vulnerabilities found on devices and the list of available security updates that address each vulnerability</span></span> |
| <span data-ttu-id="fa34a-162">**[DeviceTvmSoftwareVulnerabilitiesKB](advanced-hunting-devicetvmsoftwarevulnerabilitieskb-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-162">**[DeviceTvmSoftwareVulnerabilitiesKB](advanced-hunting-devicetvmsoftwarevulnerabilitieskb-table.md)**</span></span> | <span data-ttu-id="fa34a-163">公开披露的漏洞的知识库，包括攻击代码是否已公开</span><span class="sxs-lookup"><span data-stu-id="fa34a-163">Knowledge base of publicly disclosed vulnerabilities, including whether exploit code is publicly available</span></span> |
| <span data-ttu-id="fa34a-164">**[EmailAttachmentInfo](advanced-hunting-emailattachmentinfo-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-164">**[EmailAttachmentInfo](advanced-hunting-emailattachmentinfo-table.md)**</span></span> | <span data-ttu-id="fa34a-165">有关附加到电子邮件的文件的信息</span><span class="sxs-lookup"><span data-stu-id="fa34a-165">Information about files attached to emails</span></span> |
| <span data-ttu-id="fa34a-166">**[EmailEvents](advanced-hunting-emailevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-166">**[EmailEvents](advanced-hunting-emailevents-table.md)**</span></span> | <span data-ttu-id="fa34a-167">Microsoft 365 电子邮件事件，包括电子邮件传递和阻止事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-167">Microsoft 365 email events, including email delivery and blocking events</span></span> |
| <span data-ttu-id="fa34a-168">**[EmailPostDeliveryEvents](advanced-hunting-emailpostdeliveryevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-168">**[EmailPostDeliveryEvents](advanced-hunting-emailpostdeliveryevents-table.md)**</span></span> | <span data-ttu-id="fa34a-169">在 Microsoft 365 将电子邮件传递到收件人邮箱后发生的安全事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-169">Security events that occur post-delivery, after Microsoft 365 has delivered the emails to the recipient mailbox</span></span> |
| <span data-ttu-id="fa34a-170">**[EmailUrlInfo](advanced-hunting-emailurlinfo-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-170">**[EmailUrlInfo](advanced-hunting-emailurlinfo-table.md)**</span></span> | <span data-ttu-id="fa34a-171">有关电子邮件 URL 的信息</span><span class="sxs-lookup"><span data-stu-id="fa34a-171">Information about URLs on emails</span></span> |
| <span data-ttu-id="fa34a-172">**[IdentityDirectoryEvents](advanced-hunting-identitydirectoryevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-172">**[IdentityDirectoryEvents](advanced-hunting-identitydirectoryevents-table.md)**</span></span> | <span data-ttu-id="fa34a-173">涉及运行 Active Directory 和 AD (本地域控制器) 。</span><span class="sxs-lookup"><span data-stu-id="fa34a-173">Events involving an on-premises domain controller running Active Directory (AD).</span></span> <span data-ttu-id="fa34a-174">此表涵盖域控制器上一系列与标识相关的事件和系统事件。</span><span class="sxs-lookup"><span data-stu-id="fa34a-174">This table covers a range of identity-related events and system events on the domain controller.</span></span> |
| <span data-ttu-id="fa34a-175">**[IdentityInfo](advanced-hunting-identityinfo-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-175">**[IdentityInfo](advanced-hunting-identityinfo-table.md)**</span></span> | <span data-ttu-id="fa34a-176">来自各种源的帐户信息，包括 Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="fa34a-176">Account information from various sources, including Azure Active Directory</span></span> |
| <span data-ttu-id="fa34a-177">**[IdentityLogonEvents](advanced-hunting-identitylogonevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-177">**[IdentityLogonEvents](advanced-hunting-identitylogonevents-table.md)**</span></span> | <span data-ttu-id="fa34a-178">Active Directory 和 Microsoft 联机服务上的身份验证事件</span><span class="sxs-lookup"><span data-stu-id="fa34a-178">Authentication events on Active Directory and Microsoft online services</span></span> |
| <span data-ttu-id="fa34a-179">**[IdentityQueryEvents](advanced-hunting-identityqueryevents-table.md)**</span><span class="sxs-lookup"><span data-stu-id="fa34a-179">**[IdentityQueryEvents](advanced-hunting-identityqueryevents-table.md)**</span></span> | <span data-ttu-id="fa34a-180">对 Active Directory 对象的查询，例如用户、组、设备和域</span><span class="sxs-lookup"><span data-stu-id="fa34a-180">Queries for Active Directory objects, such as users, groups, devices, and domains</span></span> |

## <a name="related-topics"></a><span data-ttu-id="fa34a-181">相关主题</span><span class="sxs-lookup"><span data-stu-id="fa34a-181">Related topics</span></span>
- [<span data-ttu-id="fa34a-182">高级搜寻概述</span><span class="sxs-lookup"><span data-stu-id="fa34a-182">Advanced hunting overview</span></span>](advanced-hunting-overview.md)
- [<span data-ttu-id="fa34a-183">了解查询语言</span><span class="sxs-lookup"><span data-stu-id="fa34a-183">Learn the query language</span></span>](advanced-hunting-query-language.md)
- [<span data-ttu-id="fa34a-184">处理查询结果</span><span class="sxs-lookup"><span data-stu-id="fa34a-184">Work with query results</span></span>](advanced-hunting-query-results.md)
- [<span data-ttu-id="fa34a-185">使用共享查询</span><span class="sxs-lookup"><span data-stu-id="fa34a-185">Use shared queries</span></span>](advanced-hunting-shared-queries.md)
- [<span data-ttu-id="fa34a-186">跨设备、电子邮件、应用和标识进行查寻</span><span class="sxs-lookup"><span data-stu-id="fa34a-186">Hunt across devices, emails, apps, and identities</span></span>](advanced-hunting-query-emails-devices.md)
- [<span data-ttu-id="fa34a-187">应用查询最佳做法</span><span class="sxs-lookup"><span data-stu-id="fa34a-187">Apply query best practices</span></span>](advanced-hunting-best-practices.md)
