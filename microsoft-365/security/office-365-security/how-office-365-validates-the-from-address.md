---
title: Office 365 如何通过验证发件人地址来防止钓鱼
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- OWC150
- MET150
ms.assetid: eef8408b-54d3-4d7d-9cf7-ad2af10b2e0e
ms.collection:
- M365-security-compliance
description: Lear：关于来自 Office 365 中的入站邮件的电子邮件地址的要求。 截至2017年11月，服务现在需要符合 RFC 规范的地址，以帮助防止欺骗。
ms.openlocfilehash: 4df073cfff3c36f60a013237d95548cb48fa7b5f
ms.sourcegitcommit: 9ed3283dd6dd959faeca5c22613f9126261b9590
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/16/2020
ms.locfileid: "43528997"
---
# <a name="how-office-365-validates-the-from-address-to-prevent-phishing"></a><span data-ttu-id="b4497-104">Office 365 如何通过验证发件人地址来防止钓鱼</span><span class="sxs-lookup"><span data-stu-id="b4497-104">How Office 365 validates the From address to prevent phishing</span></span>

<span data-ttu-id="b4497-105">Office 365 电子邮件帐户会收到越来越多的网络钓鱼攻击。</span><span class="sxs-lookup"><span data-stu-id="b4497-105">Office 365 email accounts receive an increasingly large number of phishing attacks.</span></span> <span data-ttu-id="b4497-106">除了使用[欺骗（伪造）发件人电子邮件地址](anti-spoofing-protection.md)之外，攻击者通常使用来自冲突 internet 标准的发件人地址中的值。</span><span class="sxs-lookup"><span data-stu-id="b4497-106">In addition to using [spoofed (forged) sender email addresses](anti-spoofing-protection.md), attackers often use values in the From address that violate internet standards.</span></span> <span data-ttu-id="b4497-107">为了帮助阻止这种类型的网络钓鱼，Office 365 和 Outlook.com 现在要求入站邮件包含符合 RFC 标准的发件人地址，如本主题中所述。</span><span class="sxs-lookup"><span data-stu-id="b4497-107">To help prevent this type of phishing, Office 365 and Outlook.com now require inbound messages to include an RFC-compliant From address as described in this topic.</span></span> <span data-ttu-id="b4497-108">此强制已于2017年11月启用。</span><span class="sxs-lookup"><span data-stu-id="b4497-108">This enforcement was enabled in November 2017.</span></span>

<span data-ttu-id="b4497-109">**注意**：</span><span class="sxs-lookup"><span data-stu-id="b4497-109">**Notes**:</span></span>

- <span data-ttu-id="b4497-110">如果您定期收到来自地址格式不正确（如本主题所述）的组织发来的电子邮件，则鼓励这些组织更新其电子邮件服务器以遵守新式安全标准。</span><span class="sxs-lookup"><span data-stu-id="b4497-110">If you regularly receive email from organizations that have malformed From addresses as described in this topic, encourage these organizations to update their email servers to comply with modern security standards.</span></span>

- <span data-ttu-id="b4497-111">"相关发件人" 字段（由 "代表发送" 和 "邮寄列表" 使用）不受这些要求的影响。</span><span class="sxs-lookup"><span data-stu-id="b4497-111">The related Sender field (used by Send on Behalf and mailing lists) isn't affected by these requirements.</span></span> <span data-ttu-id="b4497-112">有关详细信息，请参阅以下博客文章：[当我们引用电子邮件的 "发件人" 时，我们意味着什么？](https://blogs.msdn.microsoft.com/tzink/2017/06/22/what-do-we-mean-when-we-refer-to-the-sender-of-an-email/)。</span><span class="sxs-lookup"><span data-stu-id="b4497-112">For more information, see the following blog post: [What do we mean when we refer to the 'sender' of an email?](https://blogs.msdn.microsoft.com/tzink/2017/06/22/what-do-we-mean-when-we-refer-to-the-sender-of-an-email/).</span></span>

## <a name="an-overview-of-email-message-standards"></a><span data-ttu-id="b4497-113">电子邮件标准概述</span><span class="sxs-lookup"><span data-stu-id="b4497-113">An overview of email message standards</span></span>

<span data-ttu-id="b4497-114">标准 SMTP 电子邮件由*邮件信封*和邮件内容组成。</span><span class="sxs-lookup"><span data-stu-id="b4497-114">A standard SMTP email message consists of a *message envelope* and message content.</span></span> <span data-ttu-id="b4497-115">邮件信封包含在 SMTP 服务器之间传输和传递邮件所需的信息。</span><span class="sxs-lookup"><span data-stu-id="b4497-115">The message envelope contains information that's required for transmitting and delivering the message between SMTP servers.</span></span> <span data-ttu-id="b4497-116">邮件内容包含邮件头字段（统称为*邮件头*）和邮件正文。</span><span class="sxs-lookup"><span data-stu-id="b4497-116">The message content contains message header fields (collectively called the *message header*) and the message body.</span></span> <span data-ttu-id="b4497-117">[Rfc 5321](https://tools.ietf.org/html/rfc5321)中介绍了邮件信封，并且[rfc 5322](https://tools.ietf.org/html/rfc5322)中介绍了邮件头。</span><span class="sxs-lookup"><span data-stu-id="b4497-117">The message envelope is described in [RFC 5321](https://tools.ietf.org/html/rfc5321), and the message header is described in [RFC 5322](https://tools.ietf.org/html/rfc5322).</span></span> <span data-ttu-id="b4497-118">收件人从不会看到实际邮件信封，因为它是由邮件传输进程生成的，并且实际上并不是邮件的一部分。</span><span class="sxs-lookup"><span data-stu-id="b4497-118">Recipients never see the actual message envelope because it's generated by the message transmission process, and it isn't actually part of the message.</span></span>

- <span data-ttu-id="b4497-119">`5321.MailFrom`地址（也称为 "**发**件人地址"、"P1 发件人" 或 "信封发件人"）是在邮件的 SMTP 传输中使用的电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="b4497-119">The `5321.MailFrom` address (also known as the **MAIL FROM** address, P1 sender, or envelope sender) is the email address that's used in the SMTP transmission of the message.</span></span> <span data-ttu-id="b4497-120">此电子邮件地址通常记录在邮件标头中的 "**返回路径**标头" 字段中（尽管发件人可以指定不同的**返回路径**电子邮件地址）。</span><span class="sxs-lookup"><span data-stu-id="b4497-120">This email address is typically recorded in the **Return-Path** header field in the message header (although it's possible for the sender to designate a different **Return-Path** email address).</span></span>

- <span data-ttu-id="b4497-121">`5322.From` （也称为 "来自地址" 或 "P2 发件人"）是 "**发**件人" 头字段中的电子邮件地址，是电子邮件客户端中显示的发件人的电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="b4497-121">The `5322.From` (also known as the From address or P2 sender) is the email address in the **From** header field, and is the sender's email address that's displayed in email clients.</span></span> <span data-ttu-id="b4497-122">"发件人" 地址是本主题中要求的重点。</span><span class="sxs-lookup"><span data-stu-id="b4497-122">The From address is the focus of the requirements in this topic.</span></span>

<span data-ttu-id="b4497-123">"发件人" 地址在多个 Rfc 中进行了详细定义（例如，RFC 5322 节3.2.3、3.4 和3.4.1，以及[rfc 3696](https://tools.ietf.org/html/rfc3696)）。</span><span class="sxs-lookup"><span data-stu-id="b4497-123">The From address is defined in detail across several RFCs (for example, RFC 5322 sections 3.2.3, 3.4, and 3.4.1, and [RFC 3696](https://tools.ietf.org/html/rfc3696)).</span></span> <span data-ttu-id="b4497-124">寻址方面有很多变化，被视为有效或无效。</span><span class="sxs-lookup"><span data-stu-id="b4497-124">There are many variations on addressing and what's considered valid or invalid.</span></span> <span data-ttu-id="b4497-125">为简单起见，我们建议采用以下格式和定义：</span><span class="sxs-lookup"><span data-stu-id="b4497-125">To keep it simple, we recommend the following format and definitions:</span></span>

`From: "Display Name" <EmailAddress>`

- <span data-ttu-id="b4497-126">**显示名称**：描述电子邮件地址所有者的可选短语。</span><span class="sxs-lookup"><span data-stu-id="b4497-126">**Display Name**: An optional phrase that describes the owner of the email address.</span></span>

  - <span data-ttu-id="b4497-127">我们建议您始终将显示名称括在双引号（"）中，如下所示。</span><span class="sxs-lookup"><span data-stu-id="b4497-127">We recommend that you always enclose the display name in double quotation marks (") as shown.</span></span> <span data-ttu-id="b4497-128">如果显示名称包含逗号，则_必须_将字符串括在每个 RFC 5322 的双引号中。</span><span class="sxs-lookup"><span data-stu-id="b4497-128">If the display name contains a comma, you _must_ enclose the string in double quotation marks per RFC 5322.</span></span>
  - <span data-ttu-id="b4497-129">如果 "发件人" 地址包含显示名称，则 EmailAddress 值必须括在尖括号（< >）中，如图所示。</span><span class="sxs-lookup"><span data-stu-id="b4497-129">If the From address includes a display name, the EmailAddress value must be enclosed in angle brackets (< >) as shown.</span></span>
  - <span data-ttu-id="b4497-130">Microsoft 强烈建议您在显示名称和电子邮件地址之间插入空格。</span><span class="sxs-lookup"><span data-stu-id="b4497-130">Microsoft strongly recommends that you insert a space between the display name and the email address.</span></span>

- <span data-ttu-id="b4497-131">**EmailAddress**：电子邮件地址使用以下格式`local-part@domain`：</span><span class="sxs-lookup"><span data-stu-id="b4497-131">**EmailAddress**: An email address uses the format `local-part@domain`:</span></span>

  - <span data-ttu-id="b4497-132">**本地-部分**：标识与地址关联的邮箱的字符串。</span><span class="sxs-lookup"><span data-stu-id="b4497-132">**local-part**: A string that identifies the mailbox associated with the address.</span></span> <span data-ttu-id="b4497-133">此值在域中是唯一的。</span><span class="sxs-lookup"><span data-stu-id="b4497-133">This value is unique within the domain.</span></span> <span data-ttu-id="b4497-134">通常，使用邮箱所有者的用户名或 GUID。</span><span class="sxs-lookup"><span data-stu-id="b4497-134">Often, the mailbox owner's username or GUID is used.</span></span>
  - <span data-ttu-id="b4497-135">**domain**：电子邮件服务器的完全限定域名（FQDN），该域名托管由电子邮件地址的本地部分标识的邮箱。</span><span class="sxs-lookup"><span data-stu-id="b4497-135">**domain**: The fully qualified domain name (FQDN) of the email server that hosts the mailbox identified by the local-part of the email address.</span></span>

  <span data-ttu-id="b4497-136">以下是 EmailAddress 值的一些额外注意事项：</span><span class="sxs-lookup"><span data-stu-id="b4497-136">These are some additional considerations for the EmailAddress value:</span></span>

  - <span data-ttu-id="b4497-137">仅有一个电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="b4497-137">Only one email address.</span></span>
  - <span data-ttu-id="b4497-138">建议不要用空格分隔尖括号。</span><span class="sxs-lookup"><span data-stu-id="b4497-138">We recommend that you do not separate the angle brackets with spaces.</span></span>
  - <span data-ttu-id="b4497-139">不要在电子邮件地址后面添加其他文本。</span><span class="sxs-lookup"><span data-stu-id="b4497-139">Don't include additional text after the email address.</span></span>

## <a name="examples-of-valid-and-invalid-from-addresses"></a><span data-ttu-id="b4497-140">有效和无效发件人地址的示例</span><span class="sxs-lookup"><span data-stu-id="b4497-140">Examples of valid and invalid From addresses</span></span>

<span data-ttu-id="b4497-141">以下发件人的电子邮件地址是有效的：</span><span class="sxs-lookup"><span data-stu-id="b4497-141">The following From email addresses are valid:</span></span>

- `From: sender@contoso.com`

- `From: <sender@contoso.com>`

- <span data-ttu-id="b4497-142">`From: < sender@contoso.com >`（不建议这样做，因为尖括号和电子邮件地址之间有空格。）</span><span class="sxs-lookup"><span data-stu-id="b4497-142">`From: < sender@contoso.com >` (Not recommended because there are spaces between the angle brackets and the email address.)</span></span>

- `From: "Sender, Example" <sender.example@contoso.com>`

- `From: "Office 365" <sender@contoso.com>`

- <span data-ttu-id="b4497-143">`From: Office 365 <sender@contoso.com>`（不建议这样做，因为显示名称没有括在双引号内。）</span><span class="sxs-lookup"><span data-stu-id="b4497-143">`From: Office 365 <sender@contoso.com>` (Not recommended because the display name is not enclosed in double quotation marks.)</span></span>

<span data-ttu-id="b4497-144">以下发件人的电子邮件地址无效：</span><span class="sxs-lookup"><span data-stu-id="b4497-144">The following From email addresses are invalid:</span></span>

- <span data-ttu-id="b4497-145">**发件人地址不**是：某些自动邮件不包含发件人地址。</span><span class="sxs-lookup"><span data-stu-id="b4497-145">**No From address**: Some automated messages don't include a From address.</span></span> <span data-ttu-id="b4497-146">过去，当 Office 365 或 Outlook.com 收到不含发件人地址的邮件时，该服务会添加以下默认发件人： address，以使邮件可交付：</span><span class="sxs-lookup"><span data-stu-id="b4497-146">In the past, when Office 365 or Outlook.com received a message without a From address, the service added the following default From: address to make the message deliverable:</span></span>

  `From: <>`

  <span data-ttu-id="b4497-147">现在，"发件人" 地址为空的邮件将不再被接受。</span><span class="sxs-lookup"><span data-stu-id="b4497-147">Now, messages with a blank From address are no longer accepted.</span></span>

- <span data-ttu-id="b4497-148">`From: Office 365 sender@contoso.com`（显示名称存在，但电子邮件地址不是括在尖括号中。）</span><span class="sxs-lookup"><span data-stu-id="b4497-148">`From: Office 365 sender@contoso.com` (The display name is present, but the email address is not enclosed in angle brackets.)</span></span>

- <span data-ttu-id="b4497-149">`From: "Office 365" <sender@contoso.com> (Sent by a process)`（电子邮件地址后的文本。）</span><span class="sxs-lookup"><span data-stu-id="b4497-149">`From: "Office 365" <sender@contoso.com> (Sent by a process)` (Text after the email address.)</span></span>

- <span data-ttu-id="b4497-150">`From: Sender, Example <sender.example@contoso.com>`（显示名称包含逗号，但未括在双引号内。）</span><span class="sxs-lookup"><span data-stu-id="b4497-150">`From: Sender, Example <sender.example@contoso.com>` (The display name contains a comma, but is not enclosed in double quotation marks.)</span></span>

- <span data-ttu-id="b4497-151">`From: "Office 365 <sender@contoso.com>"`（整数值不正确地括在双引号中。）</span><span class="sxs-lookup"><span data-stu-id="b4497-151">`From: "Office 365 <sender@contoso.com>"` (The whole value is incorrectly enclosed in double quotation marks.)</span></span>

- <span data-ttu-id="b4497-152">`From: "Office 365 <sender@contoso.com>" sender@contoso.com`（显示名称存在，但电子邮件地址不是括在尖括号中。）</span><span class="sxs-lookup"><span data-stu-id="b4497-152">`From: "Office 365 <sender@contoso.com>" sender@contoso.com` (The display name is present, but the email address is not enclosed in angle brackets.)</span></span>

- <span data-ttu-id="b4497-153">`From: Office 365<sender@contoso.com>`（显示名称和左尖括号之间没有空格。）</span><span class="sxs-lookup"><span data-stu-id="b4497-153">`From: Office 365<sender@contoso.com>` (No space between the display name and the left angle bracket.)</span></span>

- <span data-ttu-id="b4497-154">`From: "Office 365"<sender@contoso.com>`（右双引号和左尖括号之间没有空格。）</span><span class="sxs-lookup"><span data-stu-id="b4497-154">`From: "Office 365"<sender@contoso.com>` (No space between the closing double quotation mark and the left angle bracket.)</span></span>

## <a name="suppress-auto-replies-to-your-custom-domain"></a><span data-ttu-id="b4497-155">禁止对自定义域的自动答复</span><span class="sxs-lookup"><span data-stu-id="b4497-155">Suppress auto-replies to your custom domain</span></span>

<span data-ttu-id="b4497-156">不能使用值`From: <>`来禁止显示自动答复。</span><span class="sxs-lookup"><span data-stu-id="b4497-156">You can't use the value `From: <>` to suppress auto-replies.</span></span> <span data-ttu-id="b4497-157">相反，您需要为您的自定义域设置空的 MX 记录。</span><span class="sxs-lookup"><span data-stu-id="b4497-157">Instead, you need to set up a null MX record for your custom domain.</span></span> <span data-ttu-id="b4497-158">自动答复（和所有答复）将自然被隐含，因为响应服务器不会向其发送邮件的发布地址。</span><span class="sxs-lookup"><span data-stu-id="b4497-158">Auto-replies (and all replies) are naturally suppressed because there is no published address that the responding server can send messages to.</span></span>

- <span data-ttu-id="b4497-159">选择无法接收电子邮件的电子邮件域。</span><span class="sxs-lookup"><span data-stu-id="b4497-159">Choose an email domain that can't receive email.</span></span> <span data-ttu-id="b4497-160">例如，如果您的主域是 contoso.com，则可以选择 noreply.contoso.com。</span><span class="sxs-lookup"><span data-stu-id="b4497-160">For example, if your primary domain is contoso.com, you might choose noreply.contoso.com.</span></span>

- <span data-ttu-id="b4497-161">此域的 null MX 记录由一个句点组成。</span><span class="sxs-lookup"><span data-stu-id="b4497-161">The null MX record for this domain consists of a single period.</span></span>

<span data-ttu-id="b4497-162">例如：</span><span class="sxs-lookup"><span data-stu-id="b4497-162">For example:</span></span>

```text
noreply.contoso.com IN MX .
```

<span data-ttu-id="b4497-163">有关设置 MX 记录的详细信息，请参阅[在任何 DNS 托管提供商处创建适用于 Office 365 的 dns 记录](../../admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider.md)。</span><span class="sxs-lookup"><span data-stu-id="b4497-163">For more information about setting up MX records, see [Create DNS records at any DNS hosting provider for Office 365](../../admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider.md).</span></span>

<span data-ttu-id="b4497-164">有关发布空 MX 的详细信息，请参阅[RFC 7505](https://tools.ietf.org/html/rfc7505)。</span><span class="sxs-lookup"><span data-stu-id="b4497-164">For more information about publishing a null MX, see [RFC 7505](https://tools.ietf.org/html/rfc7505).</span></span>

## <a name="override-from-address-enforcement"></a><span data-ttu-id="b4497-165">从地址强制中覆盖</span><span class="sxs-lookup"><span data-stu-id="b4497-165">Override From address enforcement</span></span>

<span data-ttu-id="b4497-166">若要绕过入站电子邮件的发件人地址要求，可以使用 IP 允许列表（连接筛选）或邮件流规则（也称为传输规则），如在[Office 365 中创建安全发件人列表中](create-safe-sender-lists-in-office-365.md)所述。</span><span class="sxs-lookup"><span data-stu-id="b4497-166">To bypass the From address requirements for inbound email, you can use the IP Allow List (connection filtering) or mail flow rules (also known as transport rules) as described in [Create safe sender lists in Office 365](create-safe-sender-lists-in-office-365.md).</span></span>

<span data-ttu-id="b4497-167">您不能覆盖从 Office 365 发送出的出站电子邮件的发件人地址要求。</span><span class="sxs-lookup"><span data-stu-id="b4497-167">You can't override the From address requirements for outbound email that you send from Office 365.</span></span> <span data-ttu-id="b4497-168">此外，Outlook.com 不允许覆盖任何种类，即使支持也是如此。</span><span class="sxs-lookup"><span data-stu-id="b4497-168">In addition, Outlook.com will not allow overrides of any kind, even through support.</span></span>

## <a name="other-ways-to-prevent-and-protect-against-cybercrimes-in-office-365"></a><span data-ttu-id="b4497-169">阻止和防止 cybercrimes 在 Office 365 中的其他方法</span><span class="sxs-lookup"><span data-stu-id="b4497-169">Other ways to prevent and protect against cybercrimes in Office 365</span></span>

<span data-ttu-id="b4497-170">有关如何加强组织抵御网络钓鱼、垃圾邮件、数据泄露和其他威胁的详细信息，请参阅[保护 Office 365 和 Microsoft 365 商业版计划](../../admin/security-and-compliance/secure-your-business-data.md)的十大方法。</span><span class="sxs-lookup"><span data-stu-id="b4497-170">For more information on how you can strengthen your organization against phishing, spam, data breaches, and other threats, see [Top 10 ways to secure Office 365 and Microsoft 365 Business plans](../../admin/security-and-compliance/secure-your-business-data.md).</span></span>
